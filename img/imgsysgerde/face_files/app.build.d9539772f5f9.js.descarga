!function(){var requirejs,require,define;!function(a){function b(a,b){return r.call(a,b)}function c(a,b){var c,d,e,f,g,h,i,j,k,l,m=b&&b.split("/"),n=p.map,o=n&&n["*"]||{};if(a&&"."===a.charAt(0)&&b){for(m=m.slice(0,m.length-1),a=m.concat(a.split("/")),j=0;j<a.length;j+=1)if("."===(l=a[j]))a.splice(j,1),j-=1;else if(".."===l){if(1===j&&(".."===a[2]||".."===a[0]))break;j>0&&(a.splice(j-1,2),j-=2)}a=a.join("/")}if((m||o)&&n){for(c=a.split("/"),j=c.length;j>0;j-=1){if(d=c.slice(0,j).join("/"),m)for(k=m.length;k>0;k-=1)if((e=n[m.slice(0,k).join("/")])&&(e=e[d])){f=e,g=j;break}if(f)break;!h&&o&&o[d]&&(h=o[d],i=j)}!f&&h&&(f=h,g=i),f&&(c.splice(0,g,f),a=c.join("/"))}return a}function d(b,c){return function(){return k.apply(a,s.call(arguments,0).concat([b,c]))}}function e(a){return function(b){return c(b,a)}}function f(a){return function(b){n[a]=b}}function g(c){if(b(o,c)){var d=o[c];delete o[c],q[c]=!0,j.apply(a,d)}if(!b(n,c)&&!b(q,c))throw new Error("No "+c);return n[c]}function h(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function i(a){return function(){return p&&p.config&&p.config[a]||{}}}var j,k,l,m,n={},o={},p={},q={},r=Object.prototype.hasOwnProperty,s=[].slice;l=function(a,b){var d,f=h(a),i=f[0];return a=f[1],i&&(i=c(i,b),d=g(i)),i?a=d&&d.normalize?d.normalize(a,e(b)):c(a,b):(a=c(a,b),f=h(a),i=f[0],a=f[1],i&&(d=g(i))),{f:i?i+"!"+a:a,n:a,pr:i,p:d}},m={require:function(a){return d(a)},exports:function(a){var b=n[a];return void 0!==b?b:n[a]={}},module:function(a){return{id:a,uri:"",exports:n[a],config:i(a)}}},j=function(c,e,h,i){var j,k,p,r,s,t,u=[];if(i=i||c,"function"==typeof h){for(e=!e.length&&h.length?["require","exports","module"]:e,s=0;s<e.length;s+=1)if(r=l(e[s],i),"require"===(k=r.f))u[s]=m.require(c);else if("exports"===k)u[s]=m.exports(c),t=!0;else if("module"===k)j=u[s]=m.module(c);else if(b(n,k)||b(o,k)||b(q,k))u[s]=g(k);else{if(!r.p)throw new Error(c+" missing "+k);r.p.load(r.n,d(i,!0),f(k),{}),u[s]=n[k]}p=h.apply(n[c],u),c&&(j&&j.exports!==a&&j.exports!==n[c]?n[c]=j.exports:p===a&&t||(n[c]=p))}else c&&(n[c]=h)},requirejs=require=k=function(b,c,d,e,f){return"string"==typeof b?m[b]?m[b](c):g(l(b,c).f):(b.splice||(p=b,c.splice?(b=c,c=d,d=null):b=a),c=c||function(){},"function"==typeof d&&(d=e,e=f),e?j(a,b,c,d):setTimeout(function(){j(a,b,c,d)},15),k)},k.config=function(a){return p=a,k},define=function(a,c,d){c.splice||(d=c,c=[]),b(n,a)||(o[a]=[a,c,d])},define.amd={jQuery:!0}}(),define("../libs/almond",function(){}),function(){define("jquery",[],function(){return jQuery})}.call(this),function(){function a(a,b,c){for(var d=(c||0)-1,e=a?a.length:0;++d<e;)if(a[d]===b)return d;return-1}function b(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(c<d||void 0===d)return-1}return a.index-b.index}function c(a){return"\\"+qb[a]}function d(){}function e(a){return a instanceof e?a:new f(a)}function f(a,b){this.__chain__=!!b,this.__wrapped__=a}function g(a,b,c){if("function"!=typeof a)return Oa;if(void 0===b)return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return Ba(a,b)}function h(a,b,c,d){for(var e=(d||0)-1,f=a?a.length:0,g=[];++e<f;){var i=a[e];if(i&&"object"==typeof i&&"number"==typeof i.length&&(Ub(i)||q(i))){b||(i=h(i,b,c));var j=-1,k=i.length,l=g.length;for(g.length+=k;++j<k;)g[l++]=i[j]}else c||g.push(i)}return g}function i(a,b,c,d){if(a===b)return 0!==a||1/a==1/b;var f=typeof a,g=typeof b;if(!(a!==a||a&&pb[f]||b&&pb[g]))return!1;if(null==a||null==b)return a===b;var h=Fb.call(a);if(h!=Fb.call(b))return!1;switch(h){case ib:case jb:return+a==+b;case lb:return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case nb:case ob:return a==String(b)}var j=h==hb;if(!j){if(Cb.call(a,"__wrapped__ ")||b instanceof e)return i(a.__wrapped__||a,b.__wrapped__||b,c,d);if(h!=mb)return!1;var k=a.constructor,l=b.constructor;if(k!=l&&!(D(k)&&k instanceof k&&D(l)&&l instanceof l))return!1}c||(c=[]),d||(d=[]);for(var m=c.length;m--;)if(c[m]==a)return d[m]==b;var n=!0,o=0;if(c.push(a),d.push(b),j){if(o=b.length,n=o==a.length)for(;o--&&(n=i(a[o],b[o],c,d)););return n}return _b(b,function(b,e,f){if(Cb.call(f,e))return o++,!(n=Cb.call(a,e)&&i(a[e],b,c,d))&&bb}),n&&_b(a,function(a,b,c){if(Cb.call(c,b))return!(n=--o>-1)&&bb}),n}function j(a,b,c){for(var d=-1,e=o(),f=a?a.length:0,g=[],h=c?[]:g;++d<f;){var i=a[d],j=c?c(i,d,a):i;(b?!d||h[h.length-1]!==j:e(h,j)<0)&&(c&&h.push(j),g.push(i))}return g}function k(a){return function(b,c,d){var e={};c=Ea(c,d,3);var f=-1,g=b?b.length:0;if("number"==typeof g)for(;++f<g;){var h=b[f];a(e,h,c(h,f,b),b)}else ac(b,function(b,d,f){a(e,b,c(b,d,f),f)});return e}}function l(a,b,c,d,e,f){var g=1&b,h=2&b,i=4&b,j=8&b,k=16&b,n=32&b,o=a;if(!h&&!D(a))throw new TypeError;if(k&&!c.length&&(b&=-17,k=c=!1),n&&!d.length&&(b&=-33,n=d=!1),g&&!(h||i||n)&&(Tb.fastBind||Hb&&k)){if(k){var p=[e];Eb.apply(p,c)}var q=k?Hb.apply(a,p):Hb.call(a,e)}else q=function(){var p=arguments,r=g?e:this;if((i||k||n)&&(p=Qb.call(p),k&&Gb.apply(p,c),n&&Eb.apply(p,d),i&&p.length<f))return b|=16,l(a,j?b:-4&b,p,null,e,f);if(h&&(a=r[o]),this instanceof q){r=m(a.prototype);var s=a.apply(r,p);return E(s)?s:r}return a.apply(r,p)};return q}function m(a){return E(a)?Ib(a):{}}function n(a){return Xb[a]}function o(){var b=(b=e.indexOf)===na?a:b;return b}function p(a){return Yb[a]}function q(a){return a&&"object"==typeof a&&"number"==typeof a.length&&Fb.call(a)==gb||!1}function r(a){if(!a)return a;for(var b=1,c=arguments.length;b<c;b++){var d=arguments[b];if(d)for(var e in d)a[e]=d[e]}return a}function s(a){return E(a)?Ub(a)?Qb.call(a):r({},a):a}function t(a){if(!a)return a;for(var b=1,c=arguments.length;b<c;b++){var d=arguments[b];if(d)for(var e in d)void 0===a[e]&&(a[e]=d[e])}return a}function u(a){var b=[];return _b(a,function(a,c){D(a)&&b.push(c)}),b.sort()}function v(a,b){return!!a&&Cb.call(a,b)}function w(a){for(var b=-1,c=Wb(a),d=c.length,e={};++b<d;){var f=c[b];e[a[f]]=f}return e}function x(a){return!0===a||!1===a||Fb.call(a)==ib}function y(a){return!!a&&("object"==typeof a&&Fb.call(a)==jb)}function z(a){return!!a&&1===a.nodeType}function A(a){if(!a)return!0;if(Ub(a)||J(a))return!a.length;for(var b in a)if(Cb.call(a,b))return!1;return!0}function B(a,b){return i(a,b)}function C(a){return Kb(a)&&!Lb(parseFloat(a))}function D(a){return"function"==typeof a}function E(a){return!(!a||!pb[typeof a])}function F(a){return H(a)&&a!=+a}function G(a){return null===a}function H(a){return"number"==typeof a||Fb.call(a)==lb}function I(a){return!(!a||!pb[typeof a])&&Fb.call(a)==nb}function J(a){return"string"==typeof a||Fb.call(a)==ob}function K(a){return void 0===a}function L(a){var b=o(),c=h(arguments,!0,!1,1),d={};return _b(a,function(a,e){b(c,e)<0&&(d[e]=a)}),d}function M(a){for(var b=-1,c=Wb(a),d=c.length,e=Array(d);++b<d;){var f=c[b];e[b]=[f,a[f]]}return e}function N(a){for(var b=-1,c=h(arguments,!0,!1,1),d=c.length,e={};++b<d;){var f=c[b];f in a&&(e[f]=a[f])}return e}function O(a){for(var b=-1,c=Wb(a),d=c.length,e=Array(d);++b<d;)e[b]=a[c[b]];return e}function P(a,b){var c=o(),d=a?a.length:0,e=!1;return d&&"number"==typeof d?e=c(a,b)>-1:ac(a,function(a){return(e=a===b)&&bb}),e}function Q(a,b,c){var d=!0;b=Ea(b,c,3);var e=-1,f=a?a.length:0;if("number"==typeof f)for(;++e<f&&(d=!!b(a[e],e,a)););else ac(a,function(a,c,e){return!(d=!!b(a,c,e))&&bb});return d}function R(a,b,c){var d=[];b=Ea(b,c,3);var e=-1,f=a?a.length:0;if("number"==typeof f)for(;++e<f;){var g=a[e];b(g,e,a)&&d.push(g)}else ac(a,function(a,c,e){b(a,c,e)&&d.push(a)});return d}function S(a,b,c){b=Ea(b,c,3);var d=-1,e=a?a.length:0;if("number"!=typeof e){var f;return ac(a,function(a,c,d){if(b(a,c,d))return f=a,bb}),f}for(;++d<e;){var g=a[d];if(b(g,d,a))return g}}function T(a,b){return ia(a,b,!0)}function U(a,b,c){var d=-1,e=a?a.length:0;if(b=b&&void 0===c?b:g(b,c,3),"number"==typeof e)for(;++d<e&&b(a[d],d,a)!==bb;);else ac(a,b)}function V(a,b){var c=a?a.length:0;if("number"==typeof c)for(;c--&&!1!==b(a[c],c,a););else{var d=Wb(a);c=d.length,ac(a,function(a,e,f){return e=d?d[--c]:--c,!1===b(f[e],e,f)&&bb})}}function W(a,b){var c=Qb.call(arguments,2),d=-1,e="function"==typeof b,f=a?a.length:0,g=Array("number"==typeof f?f:0);return U(a,function(a){g[++d]=(e?b:a[b]).apply(a,c)}),g}function X(a,b,c){var d=-1,e=a?a.length:0;if(b=Ea(b,c,3),"number"==typeof e)for(var f=Array(e);++d<e;)f[d]=b(a[d],d,a);else f=[],ac(a,function(a,c,e){f[++d]=b(a,c,e)});return f}function Y(a,b,c){var d=-1/0,e=d,f=-1,g=a?a.length:0;if(b||"number"!=typeof g)b=Ea(b,c,3),U(a,function(a,c,f){var g=b(a,c,f);g>d&&(d=g,e=a)});else for(;++f<g;){var h=a[f];h>e&&(e=h)}return e}function Z(a,b,c){var d=1/0,e=d,f=-1,g=a?a.length:0;if(b||"number"!=typeof g)b=Ea(b,c,3),U(a,function(a,c,f){var g=b(a,c,f);g<d&&(d=g,e=a)});else for(;++f<g;){var h=a[f];h<e&&(e=h)}return e}function $(a,b){var c=-1,d=a?a.length:0;if("number"==typeof d)for(var e=Array(d);++c<d;)e[c]=a[c][b];return e||X(a,b)}function _(a,b,c,d){if(!a)return c;var e=arguments.length<3;b=g(b,d,4);var f=-1,h=a.length;if("number"==typeof h)for(e&&(c=a[++f]);++f<h;)c=b(c,a[f],f,a);else ac(a,function(a,d,f){c=e?(e=!1,a):b(c,a,d,f)});return c}function aa(a,b,c,d){var e=arguments.length<3;return b=g(b,d,4),V(a,function(a,d,f){c=e?(e=!1,a):b(c,a,d,f)}),c}function ba(a,b,c){return b=Ea(b,c,3),R(a,function(a,c,d){return!b(a,c,d)})}function ca(a,b,c){var d=a?a.length:0;if("number"!=typeof d&&(a=O(a)),null==b||c)return a?a[Ra(d-1)]:_a;var e=da(a);return e.length=Ob(Nb(0,b),e.length),e}function da(a){var b=-1,c=a?a.length:0,d=Array("number"==typeof c?c:0);return U(a,function(a){var c=Ra(++b);d[b]=d[c],d[c]=a}),d}function ea(a){var b=a?a.length:0;return"number"==typeof b?b:Wb(a).length}function fa(a,b,c){var d;b=Ea(b,c,3);var e=-1,f=a?a.length:0;if("number"==typeof f)for(;++e<f&&!(d=b(a[e],e,a)););else ac(a,function(a,c,e){return(d=b(a,c,e))&&bb});return!!d}function ga(a,c,d){var e=-1,f=a?a.length:0,g=Array("number"==typeof f?f:0);for(c=Ea(c,d,3),U(a,function(a,b,d){g[++e]={criteria:c(a,b,d),index:e,value:a}}),f=g.length,g.sort(b);f--;)g[f]=g[f].value;return g}function ha(a){return Ub(a)?Qb.call(a):a&&"number"==typeof a.length?X(a):O(a)}function ia(a,b,c){return c&&A(b)?_a:(c?S:R)(a,b)}function ja(a){for(var b=-1,c=a?a.length:0,d=[];++b<c;){var e=a[b];e&&d.push(e)}return d}function ka(a){for(var b=-1,c=o(),d=a.length,e=h(arguments,!0,!0,1),f=[];++b<d;){var g=a[b];c(e,g)<0&&f.push(g)}return f}function la(a,b,c){var d=0,e=a?a.length:0;if("number"!=typeof b&&null!=b){var f=-1;for(b=Ea(b,c,3);++f<e&&b(a[f],f,a);)d++}else if(null==(d=b)||c)return a?a[0]:_a;return Qb.call(a,0,Ob(Nb(0,d),e))}function ma(a,b){return h(a,b)}function na(b,c,d){if("number"==typeof d){var e=b?b.length:0;d=d<0?Nb(0,e+d):d||0}else if(d){var f=ua(b,c);return b[f]===c?f:-1}return a(b,c,d)}function oa(a,b,c){var d=0,e=a?a.length:0;if("number"!=typeof b&&null!=b){var f=e;for(b=Ea(b,c,3);f--&&b(a[f],f,a);)d++}else d=null==b||c?1:b||d;return Qb.call(a,0,Ob(Nb(0,e-d),e))}function pa(a){var b=arguments,c=b.length,d=-1,e=o(),f=a?a.length:0,g=[];a:for(;++d<f;){var h=a[d];if(e(g,h)<0){for(var i=c;--i;)if(e(b[i],h)<0)continue a;g.push(h)}}return g}function qa(a,b,c){var d=0,e=a?a.length:0;if("number"!=typeof b&&null!=b){var f=e;for(b=Ea(b,c,3);f--&&b(a[f],f,a);)d++}else if(null==(d=b)||c)return a?a[e-1]:_a;return Qb.call(a,Nb(0,e-d))}function ra(a,b,c){var d=a?a.length:0;for("number"==typeof c&&(d=(c<0?Nb(0,d+c):Ob(c,d-1))+1);d--;)if(a[d]===b)return d;return-1}function sa(a,b,c){a=+a||0,c=+c||1,null==b&&(b=a,a=0);for(var d=-1,e=Nb(0,Ab((b-a)/c)),f=Array(e);++d<e;)f[d]=a,a+=c;return f}function ta(a,b,c){if("number"!=typeof b&&null!=b){var d=0,e=-1,f=a?a.length:0;for(b=Ea(b,c,3);++e<f&&b(a[e],e,a);)d++}else d=null==b||c?1:Nb(0,b);return Qb.call(a,d)}function ua(a,b,c,d){var e=0,f=a?a.length:e;for(c=c?Ea(c,d,1):Oa,b=c(b);e<f;){var g=e+f>>>1;c(a[g])<b?e=g+1:f=g}return e}function va(a){return j(h(arguments,!0,!0))}function wa(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c=d&&d[b]===a?null:b,b=!1),null!=c&&(c=Ea(c,d,3)),j(a,b,c)}function xa(a){return ka(a,Qb.call(arguments,1))}function ya(){for(var a=-1,b=Y($(arguments,"length")),c=Array(b<0?0:b);++a<b;)c[a]=$(arguments,a);return c}function za(a,b){for(var c=-1,d=a?a.length:0,e={};++c<d;){var f=a[c];b?e[f]=b[c]:f&&(e[f[0]]=f[1])}return e}function Aa(a,b){if(!D(b))throw new TypeError;return function(){if(--a<1)return b.apply(this,arguments)}}function Ba(a,b){return arguments.length>2?l(a,17,Qb.call(arguments,2),null,b):l(a,1,null,null,b)}function Ca(a){for(var b=arguments.length>1?h(arguments,!0,!1,1):u(a),c=-1,d=b.length;++c<d;){var e=b[c];a[e]=l(a[e],1,null,null,a)}return a}function Da(){for(var a=arguments,b=a.length;b--;)if(!D(a[b]))throw new TypeError;return function(){for(var b=arguments,c=a.length;c--;)b=[a[c].apply(this,b)];return b[0]}}function Ea(a,b,c){var d=typeof a;if(null==a||"function"==d)return g(a,b,c);if("object"!=d)return function(b){return b[a]};var e=Wb(a);return function(b){for(var c=e.length,d=!1;c--&&(d=b[e[c]]===a[e[c]]););return d}}function Fa(a,b,c){var d,e,f,g,h,i,j,k=0,l=!1,m=!0;if(!D(a))throw new TypeError;if(b=Nb(0,b)||0,!0===c){var n=!0;m=!1}else E(c)&&(n=c.leading,l="maxWait"in c&&(Nb(b,c.maxWait)||0),m="trailing"in c?c.trailing:m);var o=function(){var c=b-(Db()-g);if(c<=0){e&&clearTimeout(e);var l=j;e=i=j=_a,l&&(k=Db(),f=a.apply(h,d))}else i=setTimeout(o,c)},p=function(){i&&clearTimeout(i),e=i=j=_a,(m||l!==b)&&(k=Db(),f=a.apply(h,d))};return function(){if(d=arguments,g=Db(),h=this,j=m&&(i||!n),!1===l)var c=n&&!i;else{e||n||(k=g);var q=l-(g-k);q<=0?(e&&(e=clearTimeout(e)),k=g,f=a.apply(h,d)):e||(e=setTimeout(p,q))}return i||b===l||(i=setTimeout(o,b)),c&&(f=a.apply(h,d)),f}}function Ga(a){if(!D(a))throw new TypeError;var b=Qb.call(arguments,1);return setTimeout(function(){a.apply(_a,b)},1)}function Ha(a,b){if(!D(a))throw new TypeError;var c=Qb.call(arguments,2);return setTimeout(function(){a.apply(_a,c)},b)}function Ia(a,b){var c={};return function(){var d=b?b.apply(this,arguments):cb+arguments[0];return Cb.call(c,d)?c[d]:c[d]=a.apply(this,arguments)}}function Ja(a){var b,c;if(!D(a))throw new TypeError;return function(){return b?c:(b=!0,c=a.apply(this,arguments),a=null,c)}}function Ka(a){return l(a,16,Qb.call(arguments,1))}function La(a,b,c){var d=!0,e=!0;if(!D(a))throw new TypeError;return!1===c?d=!1:E(c)&&(d="leading"in c?c.leading:d,e="trailing"in c?c.trailing:e),c={},c.leading=d,c.maxWait=b,c.trailing=e,Fa(a,b,c)}function Ma(a,b){if(!D(b))throw new TypeError;return function(){var c=[a];return Eb.apply(c,arguments),b.apply(this,c)}}function Na(a){return null==a?"":String(a).replace($b,n)}function Oa(a){return a}function Pa(a){U(u(a),function(b){var c=e[b]=a[b];e.prototype[b]=function(){var a=[this.__wrapped__];Eb.apply(a,arguments);var b=c.apply(e,a);return this.__chain__?new f(b,!0):b}})}function Qa(){return rb._=yb,this}function Ra(a,b){return null==a&&null==b&&(b=1),a=+a||0,null==b?(b=a,a=0):b=+b||0,a+Bb(Pb()*(b-a+1))}function Sa(a,b){if(a){var c=a[b];return D(c)?a[b]():c}}function Ta(a,b,d){var f=e,g=f.templateSettings;a||(a=""),d=t({},d,g);var h=0,i="__p += '",j=d.variable,k=RegExp((d.escape||eb).source+"|"+(d.interpolate||eb).source+"|"+(d.evaluate||eb).source+"|$","g");a.replace(k,function(b,d,e,f,g){return i+=a.slice(h,g).replace(fb,c),d&&(i+="' +\n_.escape("+d+") +\n'"),f&&(i+="';\n"+f+";\n__p += '"),e&&(i+="' +\n((__t = ("+e+")) == null ? '' : __t) +\n'"),h=g+b.length,b}),i+="';\n",j||(j="obj",i="with ("+j+" || {}) {\n"+i+"\n}\n"),i="function("+j+") {\nvar __t, __p = '', __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n"+i+"return __p\n}";try{var l=Function("_","return "+i)(f)}catch(m){throw m.source=i,m}return b?l(b):(l.source=i,l)}function Ua(a,b,c){a=(a=+a)>-1?a:0;var d=-1,e=Array(a);for(b=g(b,c,1);++d<a;)e[d]=b(d);return e}function Va(a){return null==a?"":String(a).replace(Zb,p)}function Wa(a){var b=++ab+"";return a?a+b:b}function Xa(a){return a=new f(a),a.__chain__=!0,a}function Ya(a,b){return b(a),a}function Za(){return this.__chain__=!0,this}function $a(){return this.__wrapped__}var _a,ab=0,bb={},cb=+new Date+"",db=/<%=([\s\S]+?)%>/g,eb=/($^)/,fb=/['\n\r\t\u2028\u2029\\]/g,gb="[object Arguments]",hb="[object Array]",ib="[object Boolean]",jb="[object Date]",kb="[object Function]",lb="[object Number]",mb="[object Object]",nb="[object RegExp]",ob="[object String]",pb={boolean:!1,function:!0,object:!0,number:!1,string:!1,undefined:!1},qb={"\\":"\\","'":"'","\n":"n","\r":"r","\t":"t","\u2028":"u2028","\u2029":"u2029"},rb=pb[typeof window]&&window||this,sb=pb[typeof exports]&&exports&&!exports.nodeType&&exports,tb=pb[typeof module]&&module&&!module.nodeType&&module,ub=tb&&tb.exports===sb&&sb,vb=pb[typeof global]&&global;!vb||vb.global!==vb&&vb.window!==vb||(rb=vb);var wb=[],xb=Object.prototype,yb=rb._,zb=RegExp("^"+String(xb.valueOf).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),Ab=Math.ceil,Bb=Math.floor,Cb=xb.hasOwnProperty,Db=zb.test(Db=Date.now)&&Db||function(){return+new Date},Eb=wb.push,Fb=xb.toString,Gb=wb.unshift,Hb=zb.test(Hb=Fb.bind)&&Hb,Ib=zb.test(Ib=Object.create)&&Ib,Jb=zb.test(Jb=Array.isArray)&&Jb,Kb=rb.isFinite,Lb=rb.isNaN,Mb=zb.test(Mb=Object.keys)&&Mb,Nb=Math.max,Ob=Math.min,Pb=Math.random,Qb=wb.slice,Rb=zb.test(rb.attachEvent),Sb=Hb&&!/\n|true/.test(Hb+Rb);f.prototype=e.prototype;var Tb={};!function(){var a={0:1,length:1};Tb.fastBind=Hb&&!Sb,Tb.spliceObjects=(wb.splice.call(a,0,1),!a[0])}(),e.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:db,variable:""},Ib||(m=function(a){if(E(a)){d.prototype=a;var b=new d;d.prototype=null}return b||{}}),q(arguments)||(q=function(a){return a&&"object"==typeof a&&"number"==typeof a.length&&Cb.call(a,"callee")||!1});var Ub=Jb||function(a){return a&&"object"==typeof a&&"number"==typeof a.length&&Fb.call(a)==hb||!1},Vb=function(a){var b,c=a,d=[];if(!c)return d;if(!pb[typeof a])return d;for(b in c)Cb.call(c,b)&&d.push(b);return d},Wb=Mb?function(a){return E(a)?Mb(a):[]}:Vb,Xb={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},Yb=w(Xb),Zb=RegExp("("+Wb(Yb).join("|")+")","g"),$b=RegExp("["+Wb(Xb).join("")+"]","g"),_b=function(a,b){var c,d=a,e=d;if(!d)return e;if(!pb[typeof d])return e;for(c in d)if(b(d[c],c,a)===bb)return e;return e},ac=function(a,b){var c,d=a,e=d;if(!d)return e;if(!pb[typeof d])return e;for(c in d)if(Cb.call(d,c)&&b(d[c],c,a)===bb)return e;return e};D(/x/)&&(D=function(a){return"function"==typeof a&&Fb.call(a)==kb});var bc=k(function(a,b,c){Cb.call(a,c)?a[c]++:a[c]=1}),cc=k(function(a,b,c){(Cb.call(a,c)?a[c]:a[c]=[]).push(b)}),dc=k(function(a,b,c){a[c]=b});e.after=Aa,e.bind=Ba,e.bindAll=Ca,e.chain=Xa,e.compact=ja,e.compose=Da,e.countBy=bc,e.debounce=Fa,e.defaults=t,e.defer=Ga,e.delay=Ha,e.difference=ka,e.filter=R,e.flatten=ma,e.forEach=U,e.functions=u,e.groupBy=cc,e.indexBy=dc,e.initial=oa,e.intersection=pa,e.invert=w,e.invoke=W,e.keys=Wb,e.map=X,e.max=Y,e.memoize=Ia,e.min=Z,e.omit=L,e.once=Ja,e.pairs=M,e.partial=Ka,e.pick=N,e.pluck=$,e.range=sa,e.reject=ba,e.rest=ta,e.shuffle=da,e.sortBy=ga,e.tap=Ya,e.throttle=La,e.times=Ua,e.toArray=ha,e.union=va,e.uniq=wa,e.values=O,e.where=ia,e.without=xa,e.wrap=Ma,e.zip=ya,e.collect=X,e.drop=ta,e.each=U,e.extend=r,e.methods=u,e.object=za,e.select=R,e.tail=ta,e.unique=wa,e.clone=s,e.contains=P,e.escape=Na,e.every=Q,e.find=S,e.has=v,e.identity=Oa,e.indexOf=na,e.isArguments=q,e.isArray=Ub,e.isBoolean=x,e.isDate=y,e.isElement=z,e.isEmpty=A,e.isEqual=B,e.isFinite=C,e.isFunction=D,e.isNaN=F,e.isNull=G,e.isNumber=H,e.isObject=E,e.isRegExp=I,e.isString=J,e.isUndefined=K,e.lastIndexOf=ra,e.mixin=Pa,e.noConflict=Qa,e.random=Ra,e.reduce=_,e.reduceRight=aa,e.result=Sa,e.size=ea,e.some=fa,e.sortedIndex=ua,e.template=Ta,e.unescape=Va,e.uniqueId=Wa,e.all=Q,e.any=fa,e.detect=S,e.findWhere=T,e.foldl=_,e.foldr=aa,e.include=P,e.inject=_,e.first=la,e.last=qa,e.sample=ca,e.take=la,e.head=la,Pa(e),e.VERSION="2.2.1",e.prototype.chain=Za,e.prototype.value=$a,U(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=wb[a];e.prototype[a]=function(){var a=this.__wrapped__;return b.apply(a,arguments),Tb.spliceObjects||0!==a.length||delete a[0],this}}),U(["concat","join","slice"],function(a){var b=wb[a];e.prototype[a]=function(){var a=this.__wrapped__,c=b.apply(a,arguments);return this.__chain__&&(c=new f(c),c.__chain__=!0),c}}),"function"==typeof define&&"object"==typeof define.amd&&define.amd?(rb._=e,define("underscore",[],function(){return e})):sb&&tb?ub?(tb.exports=e)._=e:sb._=e:rb._=e}.call(this),function(a,b){"undefined"!=typeof exports?b(a,exports,require("underscore")):"function"==typeof define&&define.amd?define("backbone",["underscore","jquery","exports"],function(c,d,e){a.Backbone=b(a,e,c,d)}):a.Backbone=b(a,{},a._,a.jQuery||a.Zepto||a.ender||a.$)}(this,function(a,b,c,d){var e=a.Backbone,f=[],g=f.push,h=f.slice,i=f.splice;b.VERSION="1.0.0",b.$=d,b.noConflict=function(){return a.Backbone=e,this},b.emulateHTTP=!1,b.emulateJSON=!1;var j=b.Events={on:function(a,b,c){return l(this,"on",a,[b,c])&&b?(this._events||(this._events={}),(this._events[a]||(this._events[a]=[])).push({callback:b,context:c,ctx:c||this}),this):this},once:function(a,b,d){if(!l(this,"once",a,[b,d])||!b)return this;var e=this,f=c.once(function(){e.off(a,f),b.apply(this,arguments)});return f._callback=b,this.on(a,f,d)},off:function(a,b,d){var e,f,g,h,i,j,k,m;if(!this._events||!l(this,"off",a,[b,d]))return this;if(!a&&!b&&!d)return this._events={},this;for(h=a?[a]:c.keys(this._events),i=0,j=h.length;i<j;i++)if(a=h[i],g=this._events[a]){if(this._events[a]=e=[],b||d)for(k=0,m=g.length;k<m;k++)f=g[k],(b&&b!==f.callback&&b!==f.callback._callback||d&&d!==f.context)&&e.push(f);e.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=h.call(arguments,1);if(!l(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;return c&&m(c,b),d&&m(d,arguments),this},stopListening:function(a,b,c){var d=this._listeners;if(!d)return this;var e=!b&&!c;"object"==typeof b&&(c=this),a&&((d={})[a._listenerId]=a);for(var f in d)d[f].off(b,c,this),e&&delete this._listeners[f];return this}},k=/\s+/,l=function(a,b,c,d){if(!c)return!0;if("object"==typeof c){for(var e in c)a[b].apply(a,[e,c[e]].concat(d));return!1}if(k.test(c)){for(var f=c.split(k),g=0,h=f.length;g<h;g++)a[b].apply(a,[f[g]].concat(d));return!1}return!0},m=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b)}},n={listenTo:"on",listenToOnce:"once"};c.each(n,function(a,b){j[b]=function(b,d,e){return(this._listeners||(this._listeners={}))[b._listenerId||(b._listenerId=c.uniqueId("l"))]=b,"object"==typeof d&&(e=this),b[a](d,e,this),this}}),j.bind=j.on,j.unbind=j.off,c.extend(b,j);var o=b.Model=function(a,b){var d,e=a||{};b||(b={}),this.cid=c.uniqueId("c"),this.attributes={},c.extend(this,c.pick(b,p)),b.parse&&(e=this.parse(e,b)||{}),(d=c.result(this,"defaults"))&&(e=c.defaults({},e,d)),this.set(e,b),this.changed={},this.initialize.apply(this,arguments)},p=["url","urlRoot","collection"];c.extend(o.prototype,j,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(a){return c.clone(this.attributes)},sync:function(){return b.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return c.escape(this.get(a))},has:function(a){return null!=this.get(a)},set:function(a,b,d){var e,f,g,h,i,j,k,l;if(null==a)return this;if("object"==typeof a?(f=a,d=b):(f={})[a]=b,d||(d={}),!this._validate(f,d))return!1;g=d.unset,i=d.silent,h=[],j=this._changing,this._changing=!0,j||(this._previousAttributes=c.clone(this.attributes),this.changed={}),l=this.attributes,k=this._previousAttributes,this.idAttribute in f&&(this.id=f[this.idAttribute]);for(e in f)b=f[e],c.isEqual(l[e],b)||h.push(e),c.isEqual(k[e],b)?delete this.changed[e]:this.changed[e]=b,g?delete l[e]:l[e]=b;if(!i){h.length&&(this._pending=!0);for(var m=0,n=h.length;m<n;m++)this.trigger("change:"+h[m],this,l[h[m]],d)}if(j)return this;if(!i)for(;this._pending;)this._pending=!1,this.trigger("change",this,d);return this._pending=!1,this._changing=!1,this},unset:function(a,b){return this.set(a,void 0,c.extend({},b,{unset:!0}))},clear:function(a){var b={};for(var d in this.attributes)b[d]=void 0;return this.set(b,c.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!c.isEmpty(this.changed):c.has(this.changed,a)},changedAttributes:function(a){if(!a)return!!this.hasChanged()&&c.clone(this.changed);var b,d=!1,e=this._changing?this._previousAttributes:this.attributes;for(var f in a)c.isEqual(e[f],b=a[f])||((d||(d={}))[f]=b);return d},previous:function(a){return null!=a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return c.clone(this._previousAttributes)},fetch:function(a){a=a?c.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=this,d=a.success;return a.success=function(c){if(!b.set(b.parse(c,a),a))return!1;d&&d(b,c,a),b.trigger("sync",b,c,a)},M(this,a),this.sync("read",this,a)},save:function(a,b,d){var e,f,g,h=this.attributes;if(null==a||"object"==typeof a?(e=a,d=b):(e={})[a]=b,e&&(!d||!d.wait)&&!this.set(e,d))return!1;if(d=c.extend({validate:!0},d),!this._validate(e,d))return!1;e&&d.wait&&(this.attributes=c.extend({},h,e)),void 0===d.parse&&(d.parse=!0);var i=this,j=d.success;return d.success=function(a){i.attributes=h;var b=i.parse(a,d);if(d.wait&&(b=c.extend(e||{},b)),c.isObject(b)&&!i.set(b,d))return!1;j&&j(i,a,d),i.trigger("sync",i,a,d)},M(this,d),f=this.isNew()?"create":d.patch?"patch":"update","patch"===f&&(d.attrs=e),g=this.sync(f,this,d),e&&d.wait&&(this.attributes=h),g},destroy:function(a){a=a?c.clone(a):{};var b=this,d=a.success,e=function(){b.trigger("destroy",b,b.collection,a)};if(a.success=function(c){(a.wait||b.isNew())&&e(),d&&d(b,c,a),b.isNew()||b.trigger("sync",b,c,a)},this.isNew())return a.success(),!1;M(this,a);var f=this.sync("delete",this,a);return a.wait||e(),f},url:function(){var a=c.result(this,"urlRoot")||c.result(this.collection,"url")||L();return this.isNew()?a:a+("/"===a.charAt(a.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(a,b){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(a){return this._validate({},c.extend(a||{},{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=c.extend({},this.attributes,a);var d=this.validationError=this.validate(a,b)||null;return!d||(this.trigger("invalid",this,d,c.extend(b||{},{validationError:d})),!1)}});var q=["keys","values","pairs","invert","pick","omit"];c.each(q,function(a){o.prototype[a]=function(){var b=h.call(arguments);return b.unshift(this.attributes),c[a].apply(c,b)}});var r=b.Collection=function(a,b){b||(b={}),b.url&&(this.url=b.url),b.model&&(this.model=b.model),void 0!==b.comparator&&(this.comparator=b.comparator),this._reset(),this.initialize.apply(this,arguments),a&&this.reset(a,c.extend({silent:!0},b))},s={add:!0,remove:!0,merge:!0},t={add:!0,merge:!1,remove:!1};c.extend(r.prototype,j,{model:o,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return b.sync.apply(this,arguments)},add:function(a,b){return this.set(a,c.defaults(b||{},t))},remove:function(a,b){a=c.isArray(a)?a.slice():[a],b||(b={});var d,e,f,g;for(d=0,e=a.length;d<e;d++)(g=this.get(a[d]))&&(delete this._byId[g.id],delete this._byId[g.cid],f=this.indexOf(g),this.models.splice(f,1),this.length--,b.silent||(b.index=f,g.trigger("remove",g,this,b)),this._removeReference(g));return this},set:function(a,b){b=c.defaults(b||{},s),b.parse&&(a=this.parse(a,b)),c.isArray(a)||(a=a?[a]:[]);var d,e,f,h,j,k=b.at,l=this.comparator&&null==k&&!1!==b.sort,m=c.isString(this.comparator)?this.comparator:null,n=[],o=[],p={};for(d=0,e=a.length;d<e;d++)(f=this._prepareModel(a[d],b))&&((h=this.get(f))?(b.remove&&(p[h.cid]=!0),b.merge&&(h.set(f.attributes,b),l&&!j&&h.hasChanged(m)&&(j=!0))):b.add&&(n.push(f),f.on("all",this._onModelEvent,this),this._byId[f.cid]=f,null!=f.id&&(this._byId[f.id]=f)));if(b.remove){for(d=0,e=this.length;d<e;++d)p[(f=this.models[d]).cid]||o.push(f);o.length&&this.remove(o,b)}if(n.length&&(l&&(j=!0),this.length+=n.length,null!=k?i.apply(this.models,[k,0].concat(n)):g.apply(this.models,n)),j&&this.sort({silent:!0}),b.silent)return this;for(d=0,e=n.length;d<e;d++)(f=n[d]).trigger("add",f,this,b);return j&&this.trigger("sort",this,b),this},reset:function(a,b){b||(b={});for(var d=0,e=this.models.length;d<e;d++)this._removeReference(this.models[d]);return b.previousModels=this.models,this._reset(),this.add(a,c.extend({silent:!0},b)),b.silent||this.trigger("reset",this,b),this},push:function(a,b){return a=this._prepareModel(a,b),this.add(a,c.extend({at:this.length},b)),a},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a),b},unshift:function(a,b){return a=this._prepareModel(a,b),this.add(a,c.extend({at:0},b)),a},shift:function(a){var b=this.at(0);return this.remove(b,a),b},slice:function(a,b){return this.models.slice(a,b)},get:function(a){if(null!=a)return this._byId[null!=a.id?a.id:a.cid||a]},at:function(a){return this.models[a]},where:function(a,b){return c.isEmpty(a)?b?void 0:[]:this[b?"find":"filter"](function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},findWhere:function(a){return this.where(a,!0)},sort:function(a){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return a||(a={}),c.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(c.bind(this.comparator,this)),a.silent||this.trigger("sort",this,a),this},sortedIndex:function(a,b,d){b||(b=this.comparator);var e=c.isFunction(b)?b:function(a){return a.get(b)};return c.sortedIndex(this.models,a,e,d)},pluck:function(a){return c.invoke(this.models,"get",a)},fetch:function(a){a=a?c.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=a.success,d=this;return a.success=function(c){var e=a.reset?"reset":"set";d[e](c,a),b&&b(d,c,a),d.trigger("sync",d,c,a)},M(this,a),this.sync("read",this,a)},create:function(a,b){if(b=b?c.clone(b):{},!(a=this._prepareModel(a,b)))return!1;b.wait||this.add(a,b);var d=this,e=b.success;return b.success=function(c){b.wait&&d.add(a,b),e&&e(a,c,b)},a.save(null,b),a},parse:function(a,b){return a},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(a,b){if(a instanceof o)return a.collection||(a.collection=this),a;b||(b={}),b.collection=this;var c=new this.model(a,b);return c._validate(a,b)?c:(this.trigger("invalid",this,a,b),!1)},_removeReference:function(a){this===a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){("add"!==a&&"remove"!==a||c===this)&&("destroy"===a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],null!=b.id&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments))}});var u=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];c.each(u,function(a){r.prototype[a]=function(){var b=h.call(arguments);return b.unshift(this.models),c[a].apply(c,b)}})
;var v=["groupBy","countBy","sortBy"];c.each(v,function(a){r.prototype[a]=function(b,d){var e=c.isFunction(b)?b:function(a){return a.get(b)};return c[a](this.models,e,d)}});var w=b.View=function(a){this.cid=c.uniqueId("view"),this._configure(a||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},x=/^(\S+)\s*(.*)$/,y=["model","collection","el","id","attributes","className","tagName","events"];c.extend(w.prototype,j,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(a,c){return this.$el&&this.undelegateEvents(),this.$el=a instanceof b.$?a:b.$(a),this.el=this.$el[0],!1!==c&&this.delegateEvents(),this},delegateEvents:function(a){if(!a&&!(a=c.result(this,"events")))return this;this.undelegateEvents();for(var b in a){var d=a[b];if(c.isFunction(d)||(d=this[a[b]]),d){var e=b.match(x),f=e[1],g=e[2];d=c.bind(d,this),f+=".delegateEvents"+this.cid,""===g?this.$el.on(f,d):this.$el.on(f,g,d)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(a){this.options&&(a=c.extend({},c.result(this,"options"),a)),c.extend(this,c.pick(a,y)),this.options=a},_ensureElement:function(){if(this.el)this.setElement(c.result(this,"el"),!1);else{var a=c.extend({},c.result(this,"attributes"));this.id&&(a.id=c.result(this,"id")),this.className&&(a.class=c.result(this,"className"));var d=b.$("<"+c.result(this,"tagName")+">").attr(a);this.setElement(d,!1)}}}),b.sync=function(a,d,e){var f=z[a];c.defaults(e||(e={}),{emulateHTTP:b.emulateHTTP,emulateJSON:b.emulateJSON});var g={type:f,dataType:"json"};if(e.url||(g.url=c.result(d,"url")||L()),null!=e.data||!d||"create"!==a&&"update"!==a&&"patch"!==a||(g.contentType="application/json",g.data=JSON.stringify(e.attrs||d.toJSON(e))),e.emulateJSON&&(g.contentType="application/x-www-form-urlencoded",g.data=g.data?{model:g.data}:{}),e.emulateHTTP&&("PUT"===f||"DELETE"===f||"PATCH"===f)){g.type="POST",e.emulateJSON&&(g.data._method=f);var h=e.beforeSend;e.beforeSend=function(a){if(a.setRequestHeader("X-HTTP-Method-Override",f),h)return h.apply(this,arguments)}}"GET"===g.type||e.emulateJSON||(g.processData=!1),"PATCH"!==g.type||!window.ActiveXObject||window.external&&window.external.msActiveXFilteringEnabled||(g.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var i=e.xhr=b.ajax(c.extend(g,e));return d.trigger("request",d,i,e),i};var z={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};b.ajax=function(){return b.$.ajax.apply(b.$,arguments)};var A=b.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},B=/\((.*?)\)/g,C=/(\(\?)?:\w+/g,D=/\*\w+/g,E=/[\-{}\[\]+?.,\\\^$|#\s]/g;c.extend(A.prototype,j,{initialize:function(){},route:function(a,d,e){c.isRegExp(a)||(a=this._routeToRegExp(a)),c.isFunction(d)&&(e=d,d=""),e||(e=this[d]);var f=this;return b.history.route(a,function(c){var g=f._extractParameters(a,c);e&&e.apply(f,g),f.trigger.apply(f,["route:"+d].concat(g)),f.trigger("route",d,g),b.history.trigger("route",f,d,g)}),this},navigate:function(a,c){return b.history.navigate(a,c),this},_bindRoutes:function(){if(this.routes){this.routes=c.result(this,"routes");for(var a,b=c.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){return a=a.replace(E,"\\$&").replace(B,"(?:$1)?").replace(C,function(a,b){return b?a:"([^/]+)"}).replace(D,"(.*?)"),new RegExp("^"+a+"$")},_extractParameters:function(a,b){var d=a.exec(b).slice(1);return c.map(d,function(a){return a?decodeURIComponent(a):null})}});var F=b.History=function(){this.handlers=[],c.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},G=/^[#\/]|\s+$/g,H=/^\/+|\/+$/g,I=/msie [\w.]+/,J=/\/$/;F.started=!1,c.extend(F.prototype,j,{interval:50,getHash:function(a){var b=(a||this).location.href.match(/#(.*)$/);return b?b[1]:""},getFragment:function(a,b){if(null==a)if(this._hasPushState||!this._wantsHashChange||b){a=this.location.pathname;var c=this.root.replace(J,"");a.indexOf(c)||(a=a.substr(c.length))}else a=this.getHash();return a.replace(G,"")},start:function(a){if(F.started)throw new Error("Backbone.history has already been started");F.started=!0,this.options=c.extend({},{root:"/"},this.options,a),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var d=this.getFragment(),e=document.documentMode,f=I.exec(navigator.userAgent.toLowerCase())&&(!e||e<=7);this.root=("/"+this.root+"/").replace(H,"/"),f&&this._wantsHashChange&&(this.iframe=b.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(d)),this._hasPushState?b.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!f?b.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=d;var g=this.location,h=g.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!h?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&h&&g.hash&&(this.fragment=this.getHash().replace(G,""),this.history.replaceState({},document.title,this.root+this.fragment+g.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){b.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),F.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(a){var b=this.getFragment();if(b===this.fragment&&this.iframe&&(b=this.getFragment(this.getHash(this.iframe))),b===this.fragment)return!1;this.iframe&&this.navigate(b),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(a){var b=this.fragment=this.getFragment(a);return c.any(this.handlers,function(a){if(a.route.test(b))return a.callback(b),!0})},navigate:function(a,b){if(!F.started)return!1;if(b&&!0!==b||(b={trigger:b}),a=this.getFragment(a||""),this.fragment!==a){this.fragment=a;var c=this.root+a;if(this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,c);else{if(!this._wantsHashChange)return this.location.assign(c);this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace))}b.trigger&&this.loadUrl(a)}},_updateHash:function(a,b,c){if(c){var d=a.href.replace(/(javascript:|#).*$/,"");a.replace(d+"#"+b)}else a.hash="#"+b}}),b.history=new F;var K=function(a,b){var d,e=this;d=a&&c.has(a,"constructor")?a.constructor:function(){return e.apply(this,arguments)},c.extend(d,e,b);var f=function(){this.constructor=d};return f.prototype=e.prototype,d.prototype=new f,a&&c.extend(d.prototype,a),d.__super__=e.prototype,d};o.extend=r.extend=A.extend=w.extend=F.extend=K;var L=function(){throw new Error('A "url" property or function must be specified')},M=function(a,b){var c=b.error;b.error=function(d){c&&c(a,d,b),a.trigger("error",a,d,b)}};return b}),define("templates",[],function(){function nulls(a){return null!=a}var jade={};Array.isArray||(Array.isArray=function(a){return"[object Array]"==Object.prototype.toString.call(a)}),Object.keys||(Object.keys=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b}),jade.merge=function(a,b){var c=a.class,d=b.class;(c||d)&&(c=c||[],d=d||[],Array.isArray(c)||(c=[c]),Array.isArray(d)||(d=[d]),c=c.filter(nulls),d=d.filter(nulls),a.class=c.concat(d).join(" "));for(var e in b)"class"!=e&&(a[e]=b[e]);return a},jade.attrs=function(a,b){var c=[],d=a.terse;delete a.terse;var e=Object.keys(a),f=e.length;if(f){c.push("");for(var g=0;g<f;++g){var h=e[g],i=a[h];"boolean"==typeof i||null==i?i&&(d?c.push(h):c.push(h+'="'+h+'"')):0==h.indexOf("data")&&"string"!=typeof i?c.push(h+"='"+JSON.stringify(i)+"'"):"class"==h&&Array.isArray(i)?c.push(h+'="'+jade.escape(i.join(" "))+'"'):b&&b[h]?c.push(h+'="'+jade.escape(i)+'"'):c.push(h+'="'+i+'"')}}return c.join(" ")},jade.escape=function(a){return String(a).replace(/&(?!(\w+|\#\d+);)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},jade.rethrow=function(a,b,c){if(!b)throw a;var d=3,e=require("fs").readFileSync(b,"utf8"),f=e.split("\n"),g=Math.max(c-d,0),h=Math.min(f.length,c+d),d=f.slice(g,h).map(function(a,b){var d=b+g+1;return(d==c?"  > ":"    ")+d+"| "+a}).join("\n");throw a.path=b,a.message=(b||"Jade")+":"+c+"\n"+d+"\n\n"+a.message,a};var exports=exports||{};return exports.Templates=exports.Templates||{},exports.Templates.account=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div class="container account-page"><div class="row"><div class="span8"><h2 class="icon-account">Your Account</h2></div></div><div class="row"><div class="span5"><h3>Change Email or Password</h3><iframe src="/accounts/profile/" scrolling="no" frameborder="0"></iframe><h3>Delete Account</h3><p>If you choose you delete your account, you will loose all the icon fonts associated</p><a id="delete-account" href="/accounts/delete/" class="btn btn-danger">Delete your account</a></div><div class="span5 offset2"><h3>Leave Fontastic</h3><a href="/accounts/logout/" class="btn">Logout</a><h3>Billing</h3><a href="#billing" class="btn">Billing History</a></div></div></div>')}return buf.join("")},exports.Templates.admin_iconset=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div draggable="true" class="iconset-header"><div class="drag-handle"></div><a'),buf.push(attrs({href:"#",class:"iconset-name"+" "+(locals.is_closed?"closed":"")},{class:!0,href:!0})),buf.push(">"+escape(null==(interp=name)?"":interp)+'</a><div class="icon-counter"></div><div class="found-icons-counter"></div>'),locals.grid_size&&buf.push('<div title="Grid size" class="iconset-grid-size">'+escape(null==(interp=grid_size)?"":interp)+"</div>"),1==locals.type?buf.push('<div class="iconset-type">Public</div>'):2==locals.type&&buf.push('<div class="iconset-type">Premium</div>'),buf.push('<div class="dropdown"><a data-toggle="dropdown" href="#" class="dropdown-toggle icon-down">MENU</a><ul role="menu" aria-labelledby="dropdownMenu" class="dropdown-menu"><li><a href="#" class="add-icons">Add icons to this set</a><div class="file-input-wrap"><input type="file" multiple="multiple" class="add-icons-input"/></div></li><li><a href="#" class="edit">Change set name</a></li>'),locals.id&&(buf.push("<li><a"),buf.push(attrs({href:"/admin/fontastic/iconset/"+id+"/",target:"blank"},{href:!0,target:!0})),buf.push(">Administration</a></li>")),buf.push('<li><a href="#" class="delete-iconset">Delete this set</a></li></ul></div>'),(locals.author_name||locals.license_name)&&(buf.push('<div class="iconset-info">'),locals.author_name&&(locals.author_url?(buf.push("<a"),buf.push(attrs({href:""+author_url,target:"blank"},{href:!0,target:!0})),buf.push(">by "+escape(null==(interp=author_name)?"":interp)+"</a>")):buf.push("<span>by "+escape(null==(interp=author_name)?"":interp)+"</span>")),locals.license_name&&(locals.license_url?(buf.push("<a"),buf.push(attrs({href:""+license_url,target:"blank","data-placement":"bottom",title:license_name,class:"license-name"},{href:!0,target:!0,"data-placement":!0,title:!0})),buf.push(">License</a>")):(buf.push("<span"),buf.push(attrs({"data-placement":"bottom",title:license_name,class:"license-name"},{"data-placement":!0,title:!0})),buf.push(">License</span>"))),buf.push("</div>")),buf.push("</div><div"),buf.push(attrs({class:"icons-wrapper"+" "+(locals.is_closed?"closed":"")},{class:!0})),buf.push('><ul class="icons"></ul>'),function(){if("number"==typeof icon_groups.length)for(var a=0,b=icon_groups.length;a<b;a++){var c=icon_groups[a];buf.push("<div"),buf.push(attrs({"data-group-id":c.id,class:"icon-group"},{"data-group-id":!0})),buf.push('><div class="icon-group-header"><div class="icon-group-name">'+escape(null==(interp=c.name)?"":interp)+'</div><a href="#" class="icon-import add-icons-to-group"></a><div class="file-input-wrap"><input type="file" multiple="multiple" class="add-icons-to-group-input"/></div></div><ul class="icons"></ul></div>')}else{var b=0;for(var a in icon_groups){b++;var c=icon_groups[a];buf.push("<div"),buf.push(attrs({"data-group-id":c.id,class:"icon-group"},{"data-group-id":!0})),buf.push('><div class="icon-group-header"><div class="icon-group-name">'+escape(null==(interp=c.name)?"":interp)+'</div><a href="#" class="icon-import add-icons-to-group"></a><div class="file-input-wrap"><input type="file" multiple="multiple" class="add-icons-to-group-input"/></div></div><ul class="icons"></ul></div>')}}}.call(this),buf.push("</div>")}return buf.join("")},exports.Templates.admin_iconset_form=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div class="modal-header"><h4>Edit icon set</h4></div><div class="modal-body"><div class="control-group"><label>Icon Set Name<div class="controls"><input'),buf.push(attrs({name:"name",type:"text",value:""+name},{name:!0,type:!0,value:!0})),buf.push('/></div></label></div><div class="control-group"><label>Authour Name<div class="controls"><input'),buf.push(attrs({name:"author_name",type:"text",value:""+author_name},{name:!0,type:!0,value:!0})),buf.push('/></div></label></div><div class="control-group"><label>Authour URL<div class="controls"><input'),buf.push(attrs({name:"author_url",type:"text",value:""+author_url},{name:!0,type:!0,value:!0})),buf.push('/></div></label></div><div class="control-group"><label>License Name<div class="controls"><input'),buf.push(attrs({name:"license_name",type:"text",value:""+license_name},{name:!0,type:!0,value:!0})),buf.push('/></div></label></div><div class="control-group"><label>License URL<div class="controls"><input'),buf.push(attrs({name:"license_url",type:"text",value:""+license_url},{name:!0,type:!0,value:!0})),buf.push('/></div></label></div></div><div class="modal-footer"><button type="submit" class="btn btn-primary">Submit</button><a href="#" data-dismiss="modal" aria-hidden="true" class="btn">Cancel</a></div>')}return buf.join("")},exports.Templates.alert=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;header&&buf.push('<div class="modal-header"><h4>'+escape(null==(interp=header)?"":interp)+"</h4></div>"),buf.push('<div class="modal-body"><p>'+escape(null==(interp=body)?"":interp)+'</p></div><div class="modal-footer"><a href="#" data-dismiss="modal" aria-hidden="true" class="btn">Ok</a></div>')}return buf.join("")},exports.Templates.billing=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div class="container payments-page"><div class="row"><div class="span8"><h2>Billing History</h2></div></div><div class="row"><div class="span12"><table class="table table-hover table-striped"><thead><tr><th>Date</th><th>Description</th><th>Amount</th><th>Pdf Invoice</th></tr></thead><tbody>'),function(){if("number"==typeof items.length)for(var a=0,b=items.length;a<b;a++){var c=items[a];buf.push("<tr><td>"+escape(null==(interp=c.payment_date)?"":interp)+"</td><td>"+escape(null==(interp=c.item_name)?"":interp)+"</td><td>"+escape(null==(interp=c.amount)?"":interp)+"</td><td><a"),buf.push(attrs({href:"/payments/invoice/"+c.id},{href:!0})),buf.push(">Invoice "+escape(null==(interp=c.id)?"":interp)+"</a></td></tr>")}else{var b=0;for(var a in items){b++;var c=items[a];buf.push("<tr><td>"+escape(null==(interp=c.payment_date)?"":interp)+"</td><td>"+escape(null==(interp=c.item_name)?"":interp)+"</td><td>"+escape(null==(interp=c.amount)?"":interp)+"</td><td><a"),buf.push(attrs({href:"/payments/invoice/"+c.id},{href:!0})),buf.push(">Invoice "+escape(null==(interp=c.id)?"":interp)+"</a></td></tr>")}}}.call(this),buf.push("</tbody></table></div></div></div>")}return buf.join("")},exports.Templates.confirm=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;header&&buf.push('<div class="modal-header"><h4>'+escape(null==(interp=header)?"":interp)+"</h4></div>"),buf.push('<div class="modal-body"><p>'+escape(null==(interp=body)?"":interp)+"</p><br/><p>"+escape(null==(interp=notice)?"":interp)+'</p><p><input type="text" name="verify" value="" class="verify"/></p></div><div class="modal-footer"><a href="#" class="submit btn btn-primary disabled">'+escape(null==(interp=submitText)?"":interp)+'</a><a href="#" data-dismiss="modal" aria-hidden="true" class="btn">Cancel</a></div>')}return buf.join("")},exports.Templates.customize_layout=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div class="title-bar">CSS Class Mapping</div><div class="glyphs-css-region"></div><div class="title-bar">Character mapping<div class="reset-characters"><div class="dropdown"><a data-toggle="dropdown" href="#" class="dropdown-toggle">Reset Characters<b class="caret"></b></a><ul role="menu" aria-labelledby="dropdownMenu" class="dropdown-menu"><li><a id="latin" href="#" class="reset-code-mapping">Basic Latin</a></li><li><a id="pua" href="#" class="reset-code-mapping">PUA</a></li></ul></div></div></div><div class="glyphs-region"></div>')}return buf.join("")},exports.Templates.deploy_button=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;if(buf.push("<div"),buf.push(attrs({class:"hosting-wrap"+" "+(user.hosting_is_suspended?"hosting-suspended":"")},{class:!0})),buf.push('><div class="deploy-wrap"><h2>Icon Font Cloud</h2><div class="info">Publish and update your icons in one click, using our Icon Cloud.<br/></div>'),user.hosting_is_suspended?buf.push('<a href="#" class="deploy disabled btn icon-deploy">Overlimit</a><a href="/#hosting">Please upgrade to continue the hosting service.</a><br/><br/>'):(hosting_timestamp&&!hosting_need_upgrade||buf.push('<a href="#" class="deploy btn btn-primary icon-deploy"><div class="for-ready">Publish</div><div class="for-processing">Processing...</div><div class="glyph-count">0</div></a>'),hosting_timestamp&&!hosting_need_upgrade&&buf.push('<a href="#" class="deploy disabled btn icon-deploy">Published</a>')),hosting_timestamp?buf.push('<div class="publish-infos"><p class="hosting-usage">Page views this month:\n'+escape(null==(interp=user.hosting_request_count)?"":interp)+" / "+escape(null==(interp=user.hosting_request_limit)?"":interp)+'</p><p class="gray">Last update: '+escape(null==(interp=lastDeployment)?"":interp)+'</p><p><a href="#" class="undeploy">Unpublish</a></p></div>'):buf.push("<br/><br/><br/>"),!user.hosting_is_suspended&&hosting_timestamp){buf.push('<div class="hosting-link-wrap"><div class="info strong">Copy this code into your HTML page header:</div><div class="hosting-link ellipsis">');var __val__=hostingLink;if(buf.push(escape(null==__val__?"":__val__)),buf.push('</div><div class="info"><div class="small">Non-cached files (serving from LA data center, No Browser Cache)</div></div>'),user.hosting_plan.hosting_has_cdn){buf.push('<div class="hosting-link ellipsis">');var __val__=hostingCdnLink;buf.push(escape(null==__val__?"":__val__)),buf.push('</div><div class="info"><div class="small">Cached files (serving from CloudFlare, Browser Cache TTL at 30 minutes)</div></div>')}buf.push("</div>")}user.hosting_plan.commercial_use||buf.push('<p class="small"><div class="green">Free for personal use (no limits on impressions or bandwidth usage).</div><a href="#hosting" class="gray underline">Upgrade to premium Plan for use in commercial projects</a></p>'),buf.push('</div><div class="download-wrap"><h2>Or install manually</h2><div class="info">Download and install your icon font manually.<br/><a href="#" class="download-font-help gray underline"> How to install your font?</a></div><a href="#" class="download btn"><div class="for-ready">Download</div><div class="for-processing">Processing...</div><div class="glyph-count">0</div></a><br/><br/></div></div>')}return buf.join("")},exports.Templates.dialog=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;header&&buf.push('<div class="modal-header"><h4>'+escape(null==(interp=header)?"":interp)+"</h4></div>"),buf.push('<div class="modal-body"><p>'+escape(null==(interp=body)?"":interp)+'</p></div><div class="modal-footer"><a href="#" class="submit btn btn-primary">'+escape(null==(interp=submitText)?"":interp)+'</a><a href="#" data-dismiss="modal" aria-hidden="true" class="btn">Cancel</a></div>')}return buf.join("")},exports.Templates.download_font_help=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div class="modal-header"><h4>How to install your Font?</h4></div><div class="modal-body"><div class="how-to-wrap"><div class="steps"><div class="row"><div class="tip"><div class="number">1</div>Download the font and unzip it:<img src="/static/images/download/1.png"/></div><div class="tip"><div class="number">2</div>Add the CSS file “styles.css” to your project, and link to it from your HTML page.</div><div class="tip"><div class="number">3</div>Copy the "fonts" folder into your website project:<img src="/static/images/download/2.png"/></div><div class="tip"><div class="number">4</div>Insert the icon class name into any HTML tag to add the icon. The default CSS class prefix is \'icon-\':<br/><br/><img src="/static/images/download/5.png"/></div></div></div></div></div><div class="modal-footer"><a href="#" data-dismiss="modal" aria-hidden="true" class="btn">Close</a></div>')}return buf.join("")},exports.Templates.download_sprite_help=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div class="modal-header"><h4>Adding SVG sprite to your project</h4></div><div class="modal-body"><div class="how-to-wrap"><div class="steps"><div class="tip"><p>Note: this instruction is for manual installation process only. So if you use our Icon Cloud you don\'t need to read it.</p></div><div class="tip"><p><div class="number">1</div>Upload the icons.svg file to your server. In our examples below we assume that the sprite file will be available at: <code>http://yoursite.com/images/icons.svg</code></p></div><div class="tip"><p><div class="number">2</div>Go to "Icons Reference" and choose an icon that you want to have on your HTML page. Then click and copy its markup to your HTML page. For instance, the markup for a twitter icon could look like this:</p><pre><code><span class="hljs-tag">&lt;<span class="hljs-title">svg</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"icon-twitter"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">use</span> <span class="hljs-attribute">xlink:href</span>=<span class="hljs-value">"#icon-twitter"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">use</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">svg</span>&gt;</span>\n</code></pre></div><div class="tip"><p><div class="number">3</div>Now it\'s time to add the sprite file URL to the icon markup. In the example below, the URL is <code>/images/icons.svg</code>. So now the twitter icon markup could look like this:</p><pre><code><span class="hljs-tag">&lt;<span class="hljs-title">svg</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"icon-twitter"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">use</span> <span class="hljs-attribute">xlink:href</span>=<span class="hljs-value">"/images/icons.svg#icon-twitter"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">use</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">svg</span>&gt;</span>\n</code></pre></div><div class="tip"><p><div class="number">4</div>Add the code below to the CSS file that you use for your html page:</p><pre><code><span class="hljs-attr_selector">[class^="icon-"]</span>, <span class="hljs-attr_selector">[class*=" icon-"]</span> <span class="hljs-rules">{\n    <span class="hljs-rule"><span class="hljs-attribute">height</span>:<span class="hljs-value"> <span class="hljs-number">32px</span></span></span>;\n    <span class="hljs-rule"><span class="hljs-attribute">width</span>:<span class="hljs-value"> <span class="hljs-number">32px</span></span></span>;\n    <span class="hljs-rule"><span class="hljs-attribute">display</span>:<span class="hljs-value"> inline-block</span></span>; \n    <span class="hljs-rule"><span class="hljs-attribute">fill</span>:<span class="hljs-value"> currentColor</span></span>; \n}</span>\n</code></pre><p>You can use <code>height</code> and <code>width</code> properties to control icon size. To define icon color use <code>fill</code> property. Note: <code>currentColor</code> keyword inherits the color value of a parent element.</p></div><div class="tip"><p><div class="number">5</div>For IE capability you can use a great polyfill: <a href="https://github.com/jonathantneal/svg4everybody" target="blank">svg4everybody</a></p></div><div class="tip"><p> <b>Remember: </b>with Icon Cloud you don\'t have to worry about IE capability, the sprite file and other stuff. We\'ll take care of all of that for you, just click the "Publish" button and give it a try.</p></div></div></div></div><div class="modal-footer"><a href="#" data-dismiss="modal" aria-hidden="true" class="btn">Close</a><br/><br/></div>')}return buf.join("")},exports.Templates.editable=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div title="Click to edit" class="editable-value">'+escape(null==(interp=value)?"":interp)+'</div><form class="editable-form"><input'),buf.push(attrs({type:"text",placeholder:placeholder,value:value,required:!0},{type:!0,placeholder:!0,value:!0,required:!0})),buf.push('/><button type="submit" class="btn btn-primary">Submit</button><button class="cancel btn">Cancel</button></form>')}return buf.join("")},exports.Templates.empty_view=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push(""+escape(null==(interp=message)?"":interp))}return buf.join("")},exports.Templates.font_form=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div class="modal-header"><h4>Font settings</h4></div><div class="modal-body"><div class="control-group"><label>Font Name<div class="controls"><input'),buf.push(attrs({name:"full_name",type:"text",value:""+full_name},{name:!0,type:!0,value:!0})),buf.push('/></div></label></div><div class="control-group"><label>CSS Class Prefix<div class="controls"><input'),buf.push(attrs({name:"css_class_prefix",type:"text",value:""+css_class_prefix},{name:!0,type:!0,value:!0})),buf.push('/></div></label></div></div><div class="modal-body delete-font-wrap"><label>Click to delete this font</label><a href="#" data-dismiss="modal" class="btn btn-danger delete-font">Delete this font</a></div><div class="modal-footer"><button type="submit" class="btn btn-primary">Save</button><a href="#" data-dismiss="modal" aria-hidden="true" class="btn">Cancel</a></div>')}return buf.join("")},exports.Templates.font_layout=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div class="fontbar-region"></div><div class="navbar-region"></div><div class="container"><div class="content"></div></div>')}return buf.join("")},exports.Templates.font_share=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div class="modal-header"><h4>Share font or transfer ownership</h4></div><div class="modal-body"><div class="control-group"><div class="controls"><label class="radio inline"><input type="radio" name="action" value="copy"/>Copy to User</label><label class="radio inline"><input type="radio" name="action" value="transfer"/>Transfer Ownership</label></div></div><div class="control-group"><label>Target User Email<div class="controls"><input name="to_user" type="email" value=""/></div></label></div><p class="text-info">If the font includes premium icons, premium icons will not be shared.</p></div><div class="modal-footer"><button type="submit" class="btn btn-primary">Submit</button><a href="#" data-dismiss="modal" aria-hidden="true" class="btn">Cancel</a></div>')}return buf.join("")},exports.Templates.fontbar=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div class="container"><div class="row fontbar"><div class="span4"><div class="select-font-wrap"></div></div><div class="span8"><ul class="nav"><li><div class="undo-buttons-wrap"></div></li><li><a id="reset-current-font" href="#">Deselect All Icons</a></li><li><a href="#" class="edit-font">Modify Font</a></li><li><a href="#" class="share-font">Share Font</a></li><li><a href="#" class="new-font">New Font</a></li></ul></div></div></div>')}return buf.join("")},exports.Templates.glyph=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<a href="#" title="Delete glyph" class="delete"></a><div class="svg-wrap">');var __val__=svg;buf.push(null==__val__?"":__val__),buf.push('</div><div class="input-wrap"><input'),buf.push(attrs({type:"text",value:codeInputValue},{type:!0,value:!0})),buf.push("/></div>")}return buf.join("")},exports.Templates.glyph_css=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp
;buf.push('<a href="#" title="Delete glyph" class="delete"></a><div class="svg-wrap">');var __val__=svg;buf.push(null==__val__?"":__val__),buf.push('</div><div class="input-wrap"><input'),buf.push(attrs({type:"text",value:css_class},{type:!0,value:!0})),buf.push("/></div>")}return buf.join("")},exports.Templates.hosting_plans=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div class="container hosting-plans-page"><div class="row title-wrap"><div class="span12"><div class="main-title">Save time with our Icon Cloud</div><div class="second-title">Publish your icons without efforts using our superfast Icon Cloud.<br/>When you change your icons on Fontastic, they are instantly updated on your website.</div></div></div><div class="row plans-wrap"><div class="span12">'),function(){if("number"==typeof hosting_plans.length)for(var a=0,b=hosting_plans.length;a<b;a++){var c=hosting_plans[a];buf.push('<div class="plan-item-wrap"><div'),buf.push(attrs({class:"plan-item"+" "+(c.is_current?"current-plan":"")},{class:!0})),buf.push('><div class="plan-limit-wrap"><div class="plan-limit">'),c.commercial_use?0==c.commercial_sites?buf.push("Unlimited"):buf.push(escape(null==(interp=c.commercial_sites)?"":interp)+" Domains"):buf.push("No Commercial"),buf.push('</div><div class="plan-title">Unlimited Icon Fonts</div><div class="plan-title">Unlimited Page Views</div></div><div class="plan-price">'),"0.00"==c.price?buf.push("Free"):(buf.push("$"+escape(null==(interp=c.price)?"":interp)+'<span class="plan-price-month">/ MONTH</span>'),void 0!==c.annual_price&&null!=c.annual_price&&buf.push("&nbsp;&bull;&nbsp;$"+escape(null==(interp=c.annual_price)?"":interp)+'<span class="plan-price-month">/ YEAR</span>')),buf.push('</div><div class="plan-feature">Icon Hosting</div>'),c.hosting_has_cdn&&buf.push('<div class="plan-feature"><strong class="fluo">Ultra-Fast Delivery with<br/>CloudFlare CDN</strong></div>'),buf.push('<div class="plan-feature">SSL Links for Hosting</div><div class="plan-button-wrap"><a'),buf.push(attrs({href:""+c.url,class:"plan-button"+" "+(c.is_current&&!c.is_annual_paid?"inactive":"")},{class:!0,href:!0})),buf.push(">"),c.is_current&&!c.is_annual_paid?buf.push("Current Plan"):buf.push("Upgrade Now&nbsp;<small>($"+escape(null==(interp=c.price)?"":interp)+"/m)</small>"),buf.push("</a>"),void 0!==c.annual_price&&null!=c.annual_price&&(buf.push("<br/><a"),buf.push(attrs({href:c.url+"?period=year",class:"plan-button"+" "+(c.is_current&&c.is_annual_paid?"inactive":"")},{class:!0,href:!0})),buf.push(">"),c.is_current&&c.is_annual_paid?buf.push("Current Plan"):buf.push("Upgrade Now&nbsp;<small>($"+escape(null==(interp=c.annual_price)?"":interp)+"/y)</small>"),buf.push("</a>")),buf.push("</div></div></div>")}else{var b=0;for(var a in hosting_plans){b++;var c=hosting_plans[a];buf.push('<div class="plan-item-wrap"><div'),buf.push(attrs({class:"plan-item"+" "+(c.is_current?"current-plan":"")},{class:!0})),buf.push('><div class="plan-limit-wrap"><div class="plan-limit">'),c.commercial_use?0==c.commercial_sites?buf.push("Unlimited"):buf.push(escape(null==(interp=c.commercial_sites)?"":interp)+" Domains"):buf.push("No Commercial"),buf.push('</div><div class="plan-title">Unlimited Icon Fonts</div><div class="plan-title">Unlimited Page Views</div></div><div class="plan-price">'),"0.00"==c.price?buf.push("Free"):(buf.push("$"+escape(null==(interp=c.price)?"":interp)+'<span class="plan-price-month">/ MONTH</span>'),void 0!==c.annual_price&&null!=c.annual_price&&buf.push("&nbsp;&bull;&nbsp;$"+escape(null==(interp=c.annual_price)?"":interp)+'<span class="plan-price-month">/ YEAR</span>')),buf.push('</div><div class="plan-feature">Icon Hosting</div>'),c.hosting_has_cdn&&buf.push('<div class="plan-feature"><strong class="fluo">Ultra-Fast Delivery with<br/>CloudFlare CDN</strong></div>'),buf.push('<div class="plan-feature">SSL Links for Hosting</div><div class="plan-button-wrap"><a'),buf.push(attrs({href:""+c.url,class:"plan-button"+" "+(c.is_current&&!c.is_annual_paid?"inactive":"")},{class:!0,href:!0})),buf.push(">"),c.is_current&&!c.is_annual_paid?buf.push("Current Plan"):buf.push("Upgrade Now&nbsp;<small>($"+escape(null==(interp=c.price)?"":interp)+"/m)</small>"),buf.push("</a>"),void 0!==c.annual_price&&null!=c.annual_price&&(buf.push("<br/><a"),buf.push(attrs({href:c.url+"?period=year",class:"plan-button"+" "+(c.is_current&&c.is_annual_paid?"inactive":"")},{class:!0,href:!0})),buf.push(">"),c.is_current&&c.is_annual_paid?buf.push("Current Plan"):buf.push("Upgrade Now&nbsp;<small>($"+escape(null==(interp=c.annual_price)?"":interp)+"/y)</small>"),buf.push("</a>")),buf.push("</div></div></div>")}}}.call(this),buf.push('</div></div><div class="row"><div class="span8 offset2"><h2 class="third-title">Why Using the Fontastic Icon Cloud?</h2><ul class="list-check"><li><strong>Save time. Publish and update your icons in one click!</strong><br/>|\nNo need to worry about downloading the icons font, transfering icons files each time you make a change.\nAs soon as you change your icons, they are updated on your website. We take care of everything.</li><li><strong>Your icon appears as soon as the page load.</strong><br/>Your icons are hosted on our reliable icon server.\nThey are delivered using CloudFlare, to distribute content to end users via CDN, with low latency and high data transfer speeds.\nYour icons are delivered in a flash!<br/><img src="/static/images/cloudflare.png" title="" alt="" width="197px" height="84px" style="margin:10px"/></li><li><strong>30 Days Money Back Guarantee</strong><br/>If you’re not satisfied, you can just&nbsp;<a href="mailto:info@fontastic.me?Subject=Refund%20Fontastic%20IconCloud">write us</a>&nbsp;to cancel your service and get a full refund. No questions asked. No risks.</li></ul></div></div><div class="row hosting-faq"><div class="span8 offset2"><p><strong>Is the  page views limit per icon font, or per all icon fonts I publish?</strong><br/>The limit is for the sum of all the icon fonts you are using in your account.</p><p><strong>Can I cancel my account at any time?</strong><br/>Yes, you can easily cancel your account at any time from within the application. You will receive a confirmation via email, and you won’t be billed again.</p><p><strong>What happens if I go over my monthly page views limit?</strong><br/>Don’t worry, we’ll alert you a few days before you reach the limit. When you reach 80% of your page views limit, we’ll send you an email to alert you. Even if you go over your limit, we won’t cut your service, but we’ll alert you again and give you a 3 days grace period to upgrade.</p><p><strong>Still have questions?</strong><br/><a href="mailto:info@fontastic.me?Subject=About%20Fontastic%20IconCloud">Contact us</a>&nbsp;via email, or&nbsp;<a href="https://twitter.com/befontastic">Tweet us.</a></p></div></div></div>')}return buf.join("")},exports.Templates.icon=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push("<div"),buf.push(attrs({"data-id":id,class:"icon"},{"data-id":!0})),buf.push(">");var __val__=svg;buf.push(null==__val__?"":__val__),buf.push("</div>")}return buf.join("")},exports.Templates.iconset=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div class="iconset-header"><a'),buf.push(attrs({href:"#",class:"iconset-name"+" "+(locals.is_closed?"closed":"")},{class:!0,href:!0})),buf.push(">"+escape(null==(interp=name)?"":interp)+'</a><div class="icon-counter"></div><div class="found-icons-counter"></div>'),locals.grid_size&&buf.push('<div title="Grid size" class="iconset-grid-size">'+escape(null==(interp=grid_size)?"":interp)+"</div>"),2!=locals.type||locals.trial||buf.push('<div class="iconset-type">Premium</div>'),locals.trial&&buf.push('<div class="trial-info">Trial will expire <span class="trial-expiration"></span></div>'),locals.discount_percent&&(buf.push("<a"),buf.push(attrs({href:"#iconsets/"+icon_pack_uuid,class:"discount-link"},{href:!0})),buf.push(">Buy now "+escape(null==(interp=discount_percent)?"":interp)+"% off</a>")),(locals.author_name||locals.license_name)&&(buf.push('<div class="iconset-info">'),locals.author_name&&(locals.author_url?(buf.push("<a"),buf.push(attrs({href:""+author_url,target:"blank"},{href:!0,target:!0})),buf.push(">by "+escape(null==(interp=author_name)?"":interp)+"</a>")):buf.push("<span>by "+escape(null==(interp=author_name)?"":interp)+"</span>")),locals.license_name&&(locals.license_url?(buf.push("<a"),buf.push(attrs({href:""+license_url,target:"blank","data-placement":"bottom",title:license_name,class:"license-name"},{href:!0,target:!0,"data-placement":!0,title:!0})),buf.push(">License</a>")):(buf.push("<span"),buf.push(attrs({"data-placement":"bottom",title:license_name,class:"license-name"},{"data-placement":!0,title:!0})),buf.push(">License</span>"))),buf.push("</div>")),buf.push("</div><div"),buf.push(attrs({class:"icons-wrapper"+" "+(locals.is_closed?"closed":"")},{class:!0})),buf.push('><ul class="icons"></ul>'),function(){if("number"==typeof icon_groups.length)for(var a=0,b=icon_groups.length;a<b;a++){var c=icon_groups[a];buf.push("<div"),buf.push(attrs({"data-group-id":c.id,class:"icon-group"},{"data-group-id":!0})),buf.push('><div class="icon-group-header"><div class="icon-group-name">'+escape(null==(interp=c.name)?"":interp)+'</div></div><ul class="icons"></ul></div>')}else{var b=0;for(var a in icon_groups){b++;var c=icon_groups[a];buf.push("<div"),buf.push(attrs({"data-group-id":c.id,class:"icon-group"},{"data-group-id":!0})),buf.push('><div class="icon-group-header"><div class="icon-group-name">'+escape(null==(interp=c.name)?"":interp)+'</div></div><ul class="icons"></ul></div>')}}}.call(this),buf.push("</div>")}return buf.join("")},exports.Templates.iconset_form=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div class="modal-header"><h4>Change icon set name</h4></div><div class="modal-body"><div class="control-group"><label>Icon Set Name<div class="controls"><input'),buf.push(attrs({name:"name",type:"text",value:""+name},{name:!0,type:!0,value:!0})),buf.push('/></div></label></div></div><div class="modal-footer"><button type="submit" class="btn btn-primary">Save</button><a href="#" data-dismiss="modal" aria-hidden="true" class="btn">Cancel</a></div>')}return buf.join("")},exports.Templates.iconset_preview=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div class="container iconset-preview-page"><div class="row"><div class="span6"><h1>'+escape(null==(interp=locals.name)?"":interp)+' </h1><p class="collection-infos">Creator:  '),locals.author_url?(buf.push("<a"),buf.push(attrs({href:""+locals.author_url,target:"blank"},{href:!0,target:!0})),buf.push(">"+escape(null==(interp=locals.author_name)?"":interp)+"</a>")):buf.push(""+escape(null==(interp=locals.author_name)?"":interp)),buf.push("&nbsp; &nbsp; |  &nbsp; &nbsp; License: "),locals.license_url?(buf.push("<a"),buf.push(attrs({href:""+locals.license_url,target:"blank"},{href:!0,target:!0})),buf.push(">"+escape(null==(interp=locals.license_name)?"":interp)+"</a>")):buf.push(""+escape(null==(interp=locals.license_name)?"":interp)),buf.push('</p><div class="description">');var __val__=locals.description;if(buf.push(null==__val__?"":__val__),buf.push('</div></div><div class="span5 offset1 activation-block">'),locals.discount_percent&&buf.push('<div class="discount-price"><p class="large"><strong>Activate '+escape(null==(interp=icon_counter)?"":interp)+" Icons </strong>- $"+escape(null==(interp=locals.discountPrice)?"":interp)+'  </p><p> <b class="red">'+escape(null==(interp=locals.discount_percent)?"":interp)+'% off </b>the original price: <span class="strike">  $'+escape(null==(interp=price)?"":interp)+'</span></p><p class="small">Price increase imminent! <br/>Offer expires in <span class="discount-expiration red"></span></p></div>'),buf.push('<div class="regular-price">'),locals.attachment_price){var attachmentPrice=price+attachment_price;buf.push('<div class="price-selection"><label class="radio checked"><input type="radio" name="option" value="default" checked="checked"/>Activate '+escape(null==(interp=icon_counter)?"":interp)+"  icons - $"+escape(null==(interp=price)?"":interp)+'</label><label class="radio"><input type="radio" name="option" value="attachment"/>Activate '+escape(null==(interp=icon_counter)?"":interp)+" icons +  Download Vector Sources\n - $"+escape(null==(interp=attachmentPrice)?"":interp)+'<br/><p class="small">After payment, download vector sources to use icons in Illustrator, Photoshop, Sketch... </p></label></div>')}else buf.push('<p class="large"></p><strong>Activate '+escape(null==(interp=icon_counter)?"":interp)+" Icons </strong>- $"+escape(null==(interp=price)?"":interp)+"<p></p>");buf.push("</div><a"),buf.push(attrs({href:"/payments/payment/"+uuid+"/",class:"buy"+" btn btn-primary"},{href:!0})),buf.push('> \nActivate Now </a><p class="collection-btn-infos">Instant activation after purchase</p><p class="collection-btn-infos"><img src="/static/images/paypal.png"/></p></div></div><div class="row"><div class="span12"><div class="preview"><br/><img'),buf.push(attrs({src:locals.preview},{src:!0})),buf.push("/><br/><br/></div></div></div></div>")}return buf.join("")},exports.Templates.iconsets=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div class="filter-info-wrap"><div class="filter-info"></div><a href="#" data-placement="bottom" title="Cancel search" class="filter-reset icon-remove"></a></div><ul class="iconsets"></ul><a href="#iconsets" class="btn btn-medium gray icon-categories">Add More Icons</a><br/><br/><br/><br/><br/>')}return buf.join("")},exports.Templates.iconsets_management=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div class="container"><h2 class="icon-categories">Add more icons</h2><div class="row"><div class="span8"> <div class="introduction"> \nTo make Fontastic faster, we activate by default the essential icon sets.\nYou can activate more, deactivate the icons sets you don\'t use, or import your own icons. <br/><i>Icons that you upload are private. They are not displayed to other users.</i></div></div><div class="span3 offset1">   <a href="#" data-placement="bottom" title="Only SVG icons or SVG fonts " class="btn btn-medium import-icons icon-import">Import Icons</a><div class="file-input-wrap"><input type="file" multiple="multiple" class="import-icons-input"/></div></div></div><div class="row"><div class="span12"><ul class="iconsets-to-manage"></ul></div></div></div>')}return buf.join("")},exports.Templates.iconsets_management_item=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;isPremium&&buf.push('<div class="premium-paid-ribbon"></div>'),buf.push('<div class="thumbnail">'),thumbnail?(buf.push("<img"),buf.push(attrs({src:thumbnail},{src:!0})),buf.push("/>")):buf.push('<div class="placeholder"></div>'),buf.push("</div>"),locals.has_attachment&&(buf.push('<div class="download-wrap"><a'),buf.push(attrs({href:"/download/resources/"+uuid,class:"icon-download"},{href:!0})),buf.push(">Download Sources</a></div>")),buf.push('<div class="footer"><ul class="iconset-info"><li><div class="iconset-name">'+escape(null==(interp=name)?"":interp)+'</div></li><li><div class="icon-counter">0</div></li></ul><a href="#" class="activate btn btn-primary">Activate</a><a href="#" class="deactivate btn">Deactivate</a></div>')}return buf.join("")},exports.Templates.names_icon=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div class="svg-wrap">');var __val__=svg;buf.push(null==__val__?"":__val__),buf.push('</div><div class="input-wrap"><input'),buf.push(attrs({type:"text",value:name},{type:!0,value:!0})),buf.push("/></div>")}return buf.join("")},exports.Templates.names_item=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push("<h2>"+escape(null==(interp=name)?"":interp)+'</h2><ul class="icons glyphs-css"></ul>')}return buf.join("")},exports.Templates.navbar=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div class="container"><div class="row navbar"><div class="span12"><ul class="nav"><li><a'),buf.push(attrs({href:"#select/"+uuid,class:"tab"},{href:!0})),buf.push(">Select</a></li><li><a"),buf.push(attrs({href:"#customize/"+uuid,class:"tab"},{href:!0})),buf.push('>Customize</a></li><li><div class="publish-tab-region"></div></li><li class="filter-wrap"><div class="filter"><input type="text" placeholder="Search icons..."/><a href="#" class="filter-reset icon-remove"></a></div></li></ul></div></div></div>')}return buf.join("")},exports.Templates.not_found=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div class="container"><h1>Oops! Not found.</h1><p>Sorry, but the page you were trying to view does not exist.</p></div>')}return buf.join("")},exports.Templates.personal_icon=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<a href="#" data-placement="bottom" title="Update icon" class="update-icon icon-import"></a><div class="file-input-wrap"><input type="file" multiple="multiple" class="update-icon-input"/></div><a href="#" title="Delete icon" class="delete"></a><div'),buf.push(attrs({"data-id":id,class:"icon"},{"data-id":!0})),buf.push(">");var __val__=svg;buf.push(null==__val__?"":__val__),buf.push("</div>")}return buf.join("")},exports.Templates.personal_iconset=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div class="iconset-header"><a'),buf.push(attrs({href:"#",class:"iconset-name"+" "+(locals.is_closed?"closed":"")},{class:!0,href:!0})),buf.push(">"+escape(null==(interp=name)?"":interp)+'</a><div class="icon-counter"></div><div class="found-icons-counter"></div><div class="dropdown"><a data-toggle="dropdown" href="#" class="dropdown-toggle icon-down">MENU</a><ul role="menu" aria-labelledby="dropdownMenu" class="dropdown-menu"><li><a href="#" class="add-icons">Add icons to this set</a><div class="file-input-wrap"><input type="file" multiple="multiple" class="add-icons-input"/></div></li><li><a href="#" class="edit">Change set name</a></li><li><a href="#" class="delete-iconset">Delete this set</a></li></ul></div></div><div'),buf.push(attrs({class:"icons-wrapper"+" "+(locals.is_closed?"closed":"")},{class:!0})),buf.push('><ul class="icons"></ul></div>')}return buf.join("")},exports.Templates.premium_iconset=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div class="premium-ribbon"></div><div class="thumbnail"><a'),buf.push(attrs({href:"#iconsets/"+uuid},{href:!0})),buf.push(">"),thumbnail?(buf.push("<img"),buf.push(attrs({src:thumbnail},{src:!0})),buf.push("/>")):buf.push('<div class="placeholder"></div>'),buf.push('</a></div><div class="footer"><ul class="iconset-info"><li><div class="iconset-name">'+escape(null==(interp=name)?"":interp)+'</div></li><li><div class="icon-counter">'+escape(null==(interp=icon_counter)?"":interp)+'</div><span class="discount-price"><b><div class="price">'+escape(null==(interp=locals.discountPrice)?"":interp)+' </div></b><div class="price"><s>'+escape(null==(interp=price)?"":interp)+'</s></div></span><span class="regular-price"><div class="price">'+escape(null==(interp=price)?"":interp)+"</div></span></li></ul><a"),buf.push(attrs({href:"#iconsets/"+uuid,class:"buy"+" btn btn-primary"},{href:!0})),buf.push('>Activate</a><a href="#" class="deactivate btn btn-danger">Deactivate</a></div>')}return buf.join("")},exports.Templates.publish_font=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<ul class="nav nav-tabs"><li class="active"><a href="#publish/font">Icon Font</a></li><li><a href="#publish/svg">SVG Sprite</a></li></ul><div class="buttons-region"></div><div class="reference-wrap"><h4>Icons Reference</h4><ul class="tab-pills"><li><a href="#" data-mapping-method="css-mapping">CSS Class mapping</a></li><li><a href="#" data-mapping-method="character-mapping">Character mapping</a></li></ul><div class="icons-reference-wrap"></div></div><div class="reference-wrap"><h4>How to insert Icons into your website?</h4><p> \nFirst, link your HTML page to the icon fonts and CSS files.<br/><span class="small gray"><i>(The easier way: use our icon cloud, by pasting in you HTML header the code we provide above when you press "Publish" )</i></span></p><p class="tip for-character-mapping">Then, add the data-icon attributes, from the Icons Reference above, into any HTML tag:</p><p class="tip for-css-mapping"> Then, add the CSS class, from the Icons Reference above, to any HTML tag.</p></div>')}return buf.join("")},exports.Templates.publish_svg=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<ul class="nav nav-tabs"><li><a href="#publish/font">Icon Font</a></li><li class="active"><a href="#publish/svg">SVG Sprite</a></li></ul><div class="buttons-region"></div><div class="reference-wrap"><h4>Icons Reference</h4><div class="icons-reference-wrap"></div></div><div class="reference-wrap"><h4>How to insert Icons into your website?</h4><div class="tip">Let\'s assume that you already clicked the "Publish" button and copied the script tag into your HTML page header. There are two more steps left to see your icons on it.</div><div class="tip"><p><div class="number">1</div>Go to "Icons Reference" and choose an icon that you want to have on your HTML page. Then click and copy its markup to your HTML page. For instance, the markup for a twitter icon could look like this:</p><pre><code><span class="hljs-tag">&lt;<span class="hljs-title">svg</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"icon-twitter"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">use</span> <span class="hljs-attribute">xlink:href</span>=<span class="hljs-value">"#icon-twitter"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">use</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">svg</span>&gt;</span>\n</code></pre></div><div class="tip"><p><div class="number">2</div>Add the code below to the CSS file that you use for your html page:</p><pre><code><span class="hljs-attr_selector">[class^="icon-"]</span>, <span class="hljs-attr_selector">[class*=" icon-"]</span> <span class="hljs-rules">{\n    <span class="hljs-rule"><span class="hljs-attribute">height</span>:<span class="hljs-value"> <span class="hljs-number">32px</span></span></span>;\n    <span class="hljs-rule"><span class="hljs-attribute">width</span>:<span class="hljs-value"> <span class="hljs-number">32px</span></span></span>;\n    <span class="hljs-rule"><span class="hljs-attribute">display</span>:<span class="hljs-value"> inline-block</span></span>; \n    <span class="hljs-rule"><span class="hljs-attribute">fill</span>:<span class="hljs-value"> currentColor</span></span>; \n}</span>\n</code></pre><p>You can use <code>height</code> and <code>width</code> properties to control icon size. To define icon color use <code>fill</code> property. Note: <code>currentColor</code> keyword inherits the color value of a parent element.</p></div></div>')}return buf.join("")},exports.Templates.publish_svg_buttons=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;if(buf.push("<div"),buf.push(attrs({class:"hosting-wrap"+" "+(user.hosting_is_suspended?"hosting-suspended":"")},{class:!0})),buf.push('><div class="deploy-wrap"><h2>SVG Sprite Icon Cloud</h2><div class="info">Publish and update your icons in one click, using our Icon Cloud.<br/></div>'),user.hosting_is_suspended?buf.push('<a href="#" class="deploy disabled btn icon-deploy">Overlimit</a><a href="/#hosting">Please upgrade to continue the hosting service.</a><br/><br/>'):(svg_hosting_timestamp&&!svg_hosting_need_upgrade||buf.push('<a href="#" class="deploy btn btn-primary icon-deploy"><div class="for-ready">Publish</div><div class="for-processing">Processing...</div><div class="glyph-count">0</div></a>'),svg_hosting_timestamp&&!svg_hosting_need_upgrade&&buf.push('<a href="#" class="deploy disabled btn icon-deploy">Published</a>')),svg_hosting_timestamp?buf.push('<div class="publish-infos"><p class="hosting-usage">Page views this month:<strong>'+escape(null==(interp=user.hosting_request_count)?"":interp)+" / "+escape(null==(interp=user.hosting_request_limit)?"":interp)+'</strong></p><p class="gray">Last update: '+escape(null==(interp=lastDeployment)?"":interp)+'</p><p><a href="#" class="undeploy-svg">Unpublish</a></p></div>'):buf.push("<br/><br/><br/>"),!user.hosting_is_suspended&&svg_hosting_timestamp){buf.push('<div class="hosting-link-wrap"><div class="info strong">Copy this code into your HTML page header:</div><div class="hosting-link ellipsis">');var __val__=hostingLink;if(buf.push(escape(null==__val__?"":__val__)),buf.push('</div><div class="info"><div class="small">Non-cached files (serving from LA data center, No Browser Cache)</div></div>'),user.hosting_plan.hosting_has_cdn){buf.push('<div class="hosting-link ellipsis">');var __val__=hostingCdnLink;buf.push(escape(null==__val__?"":__val__)),buf.push('</div><div class="info"><div class="small">Cached files (serving from CloudFlare, Browser Cache TTL at 30 minutes)</div></div>')}buf.push("</div>")}user.hosting_plan.commercial_use||buf.push('<p class="small"><div class="green">Free for personal use (no limits on impressions or bandwidth usage).</div><a href="#hosting" class="gray underline">Upgrade to premium Plan for use in commercial projects</a></p>'),buf.push('</div><div class="download-wrap"><h2>Or install manually</h2><div class="info">Download and install your SVG  icons manually.<br/><a href="#" class="download-sprite-help gray underline"> How to install your SVG icon sprite?</a></div><a href="#" class="download btn"><div class="for-ready">Download</div><div class="for-processing">Processing...</div><div class="glyph-count">0</div></a><br/><br/></div></div>')}return buf.join("")},exports.Templates.publish_tab=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<a href="#publish" class="tab">Publish<span class="counter">0</span></a>')}return buf.join("")},exports.Templates.reference=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<ul class="icons-reference"></ul><br/><br/><p class="small gray"><i>If you need to call the font from your CSS file, use this tag :\n" font-family: \n'+escape(null==(interp=name)?"":interp)+'"</i></p>')}return buf.join("")},exports.Templates.reference_item=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div class="icon">');var __val__=svg;buf.push(null==__val__?"":__val__),buf.push("</div><input"),buf.push(attrs({type:"text",readonly:"readonly",value:""+dataIcon,class:"for-character-mapping"},{type:!0,readonly:!0,value:!0})),buf.push("/><input"),buf.push(attrs({type:"text",readonly:"readonly",value:'class="'+css_class_prefix+"-"+css_class+'"',class:"for-css-mapping"},{type:!0,readonly:!0,value:!0})),buf.push("/>")}return buf.join("")},exports.Templates.select_font=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div class="dropdown"><a data-toggle="dropdown" href="#" class="dropdown-toggle">'+escape(null==(interp=full_name)?"":interp)+'<b class="caret"></b></a><ul role="menu" aria-labelledby="dropdownMenu" class="dropdown-menu"></ul></div>')}return buf.join("")},exports.Templates.select_font_item=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push("<a"),buf.push(attrs({href:"#select/"+uuid},{href:!0})),buf.push(">"+escape(null==(interp=full_name)?"":interp)+"</a>")}return buf.join("")},exports.Templates.svg_sprite_reference=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<ul class="icons-reference"></ul>')}return buf.join("")},exports.Templates.svg_sprite_reference_item=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div class="icon">');var __val__=svg;buf.push(null==__val__?"":__val__),buf.push("</div><input"),buf.push(attrs({type:"text",readonly:"readonly",value:'<svg class="'+css_class_prefix+"-"+css_class+'"><use xlink:href="#'+css_class_prefix+"-"+css_class+'"></use></svg>'},{type:!0,readonly:!0,value:!0})),buf.push("/>")}return buf.join("")},exports.Templates.tags_icon=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div class="svg-wrap">');var __val__=svg;buf.push(null==__val__?"":__val__),buf.push('</div><div class="input-wrap"><input'),buf.push(attrs({
type:"text",value:tags},{type:!0,value:!0})),buf.push("/></div>")}return buf.join("")},exports.Templates.tags_item=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push("<h2>"+escape(null==(interp=name)?"":interp)+'</h2><ul class="icons glyphs-css"></ul>')}return buf.join("")},exports.Templates.topbar=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div class="container"><div class="row topbar"><div class="span2"><a href="/#" class="logo"></a></div><div class="span10"><ul class="nav">'),is_designer&&buf.push('<li><a href="/designer/sales/" class="icon-tags">Sales</a></li>'),is_staff&&buf.push('<li><a href="#names" class="icon-tags">Names</a></li><li><a href="#tags" class="icon-tags">Tags</a></li>'),buf.push('<li><a href="/#" class="icon-house">Home</a></li><li><a href="#iconsets" class="icon-categories">Add More Icons</a></li><li><a href="#hosting" class="icon-cloud">Icon Cloud</a></li><li><a href="#account" class="icon-account">Account</a></li></ul></div></div></div>')}return buf.join("")},exports.Templates.undo_buttons=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<a href="#" title="Undo" class="undo-button icon-undo"></a>&nbsp;&nbsp;<a href="#" title="Redo" class="redo-button icon-redo"></a>')}return buf.join("")},exports.Templates.uploading_dialog=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div class="modal-body"><div class="uploading-progress"><div class="inner"></div></div><p class="process-title">Uploading <span class="last-file-number">0</span> icons<span class="loading-dots"><span>.</span><span>.</span><span>.</span></span></p><p class="success-title">Uploading Completed!</p><p class="success-message">Uploaded icons: <span class="success-file-number">0</span></p><p class="error-message">Ignored icons: <span class="error-file-number">0</span></p><p class="error-message">If you have any problems uploading your icons, please read our <a href="http://fontastic.me/faq" target="_blank">FAQ page.</a></p></div><div class="modal-footer"><a href="#" data-dismiss="modal" aria-hidden="true" class="btn ok">Ok</a></div>')}return buf.join("")},exports.Templates}),function(a,b){if("object"==typeof exports){var c=require("underscore"),d=require("backbone");module.exports=b(c,d)}else"function"==typeof define&&define.amd&&define("backbone.wreqr",["underscore","backbone"],b)}(0,function(a,b){"use strict";return b.Wreqr=function(a,b,c){var d={};return d.Handlers=function(a,b){var c=function(a){this.options=a,this._wreqrHandlers={},b.isFunction(this.initialize)&&this.initialize(a)};return c.extend=a.Model.extend,b.extend(c.prototype,a.Events,{setHandlers:function(a){b.each(a,function(a,c){var d=null;b.isObject(a)&&!b.isFunction(a)&&(d=a.context,a=a.callback),this.setHandler(c,a,d)},this)},setHandler:function(a,b,c){var d={callback:b,context:c};this._wreqrHandlers[a]=d,this.trigger("handler:add",a,b,c)},hasHandler:function(a){return!!this._wreqrHandlers[a]},getHandler:function(a){var b=this._wreqrHandlers[a];if(!b)throw new Error("Handler not found for '"+a+"'");return function(){var a=Array.prototype.slice.apply(arguments);return b.callback.apply(b.context,a)}},removeHandler:function(a){delete this._wreqrHandlers[a]},removeAllHandlers:function(){this._wreqrHandlers={}}}),c}(a,c),d.CommandStorage=function(){var b=function(a){this.options=a,this._commands={},c.isFunction(this.initialize)&&this.initialize(a)};return c.extend(b.prototype,a.Events,{getCommands:function(a){var b=this._commands[a];return b||(b={command:a,instances:[]},this._commands[a]=b),b},addCommand:function(a,b){this.getCommands(a).instances.push(b)},clearCommands:function(a){this.getCommands(a).instances=[]}}),b}(),d.Commands=function(a){return a.Handlers.extend({storageType:a.CommandStorage,constructor:function(b){this.options=b||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this);var c=Array.prototype.slice.call(arguments);a.Handlers.prototype.constructor.apply(this,c)},execute:function(a,b){a=arguments[0],b=Array.prototype.slice.call(arguments,1),this.hasHandler(a)?this.getHandler(a).apply(this,b):this.storage.addCommand(a,b)},_executeCommands:function(a,b,d){var e=this.storage.getCommands(a);c.each(e.instances,function(a){b.apply(d,a)}),this.storage.clearCommands(a)},_initializeStorage:function(a){var b,d=a.storageType||this.storageType;b=c.isFunction(d)?new d:d,this.storage=b}})}(d),d.RequestResponse=function(a){return a.Handlers.extend({request:function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1);return this.getHandler(a).apply(this,b)}})}(d),d.EventAggregator=function(a,b){var c=function(){};return c.extend=a.Model.extend,b.extend(c.prototype,a.Events),c}(a,c),d}(b,b.Marionette,a),b.Wreqr}),function(a,b){if("object"==typeof exports){var c=require("underscore"),d=require("backbone");module.exports=b(c,d)}else"function"==typeof define&&define.amd&&define("backbone.babysitter",["underscore","backbone"],b)}(0,function(a,b){"option strict";return b.ChildViewContainer=function(a,b){var c=function(a){this._views={},this._indexByModel={},this._indexByCollection={},this._indexByCustom={},this._updateLength(),this._addInitialViews(a)};b.extend(c.prototype,{add:function(a,b){var c=a.cid;this._views[c]=a,a.model&&(this._indexByModel[a.model.cid]=c),a.collection&&(this._indexByCollection[a.collection.cid]=c),b&&(this._indexByCustom[b]=c),this._updateLength()},findByModel:function(a){var b=this._indexByModel[a.cid];return this.findByCid(b)},findByCollection:function(a){var b=this._indexByCollection[a.cid];return this.findByCid(b)},findByCustom:function(a){var b=this._indexByCustom[a];return this.findByCid(b)},findByIndex:function(a){return b.values(this._views)[a]},findByCid:function(a){return this._views[a]},remove:function(a){var b=a.cid;a.model&&delete this._indexByModel[a.model.cid],a.collection&&delete this._indexByCollection[a.collection.cid];var c;for(var d in this._indexByCustom)if(this._indexByCustom.hasOwnProperty(d)&&this._indexByCustom[d]===b){c=d;break}c&&delete this._indexByCustom[c],delete this._views[b],this._updateLength()},call:function(a,b){b=Array.prototype.slice.call(arguments,1),this.apply(a,b)},apply:function(a,c){c=c||[],b.each(this._views,function(d,e){b.isFunction(d[a])&&d[a].apply(d,c)})},_updateLength:function(){this.length=b.size(this._views)},_addInitialViews:function(a){if(a){var b,c,d=a.length;for(c=0;c<d;c++)b=a[c],this.add(b)}}});var d=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return b.each(d,function(a){c.prototype[a]=function(){var c=b.values(this._views),d=[c].concat(b.toArray(arguments));return b[a].apply(b,d)}}),c}(0,a),b.ChildViewContainer}),function(a,b){if("object"==typeof exports){var c=require("underscore"),d=require("backbone"),e=require("backbone.wreqr"),f=require("backbone.babysitter");module.exports=b(c,d,e,f)}else"function"==typeof define&&define.amd&&define("backbone.marionette",["underscore","backbone","backbone.wreqr","backbone.babysitter"],b)}(0,function(a,b){!function(a,b,c){"use strict";function d(a){return g.call(a)}function e(a,b){var c=new Error(a);throw c.name=b||"Error",c}var f={};b.Marionette=f,f.$=b.$;var g=Array.prototype.slice;f.extend=b.Model.extend,f.getOption=function(a,b){if(a&&b){return a.options&&b in a.options&&void 0!==a.options[b]?a.options[b]:a[b]}},f.triggerMethod=function(){function a(a,b,c){return c.toUpperCase()}var b=/(^|:)(\w)/gi;return function(d){var e="on"+d.replace(b,a),f=this[e];if(c.isFunction(this.trigger)&&this.trigger.apply(this,arguments),c.isFunction(f))return f.apply(this,c.tail(arguments))}}(),f.MonitorDOMRefresh=function(){function a(a){a._isShown=!0,d(a)}function b(a){a._isRendered=!0,d(a)}function d(a){a._isShown&&a._isRendered&&c.isFunction(a.triggerMethod)&&a.triggerMethod("dom:refresh")}return function(c){c.listenTo(c,"show",function(){a(c)}),c.listenTo(c,"render",function(){b(c)})}}(),function(a){function b(a,b,d,f){var g=f.split(/\s+/);c.each(g,function(c){var f=a[c];f||e("Method '"+c+"' was configured as an event handler, but does not exist."),a.listenTo(b,d,f,a)})}function d(a,b,c,d){a.listenTo(b,c,d,a)}function f(a,b,d,e){var f=e.split(/\s+/);c.each(f,function(c){var e=a[c];a.stopListening(b,d,e,a)})}function g(a,b,c,d){a.stopListening(b,c,d,a)}function h(a,b,d,e,f){b&&d&&(c.isFunction(d)&&(d=d.call(a)),c.each(d,function(d,g){c.isFunction(d)?e(a,b,g,d):f(a,b,g,d)}))}a.bindEntityEvents=function(a,c,e){h(a,c,e,d,b)},a.unbindEntityEvents=function(a,b,c){h(a,b,c,g,f)}}(f),f.Callbacks=function(){this._deferred=f.$.Deferred(),this._callbacks=[]},c.extend(f.Callbacks.prototype,{add:function(a,b){this._callbacks.push({cb:a,ctx:b}),this._deferred.done(function(c,d){b&&(c=b),a.call(c,d)})},run:function(a,b){this._deferred.resolve(b,a)},reset:function(){var a=this._callbacks;this._deferred=f.$.Deferred(),this._callbacks=[],c.each(a,function(a){this.add(a.cb,a.ctx)},this)}}),f.Controller=function(a){this.triggerMethod=f.triggerMethod,this.options=a||{},c.isFunction(this.initialize)&&this.initialize(this.options)},f.Controller.extend=f.extend,c.extend(f.Controller.prototype,b.Events,{close:function(){this.stopListening(),this.triggerMethod("close"),this.unbind()}}),f.Region=function(a){if(this.options=a||{},this.el=f.getOption(this,"el"),!this.el){var b=new Error("An 'el' must be specified for a region.");throw b.name="NoElError",b}if(this.initialize){var c=Array.prototype.slice.apply(arguments);this.initialize.apply(this,c)}},c.extend(f.Region,{buildRegion:function(a,b){var d="string"==typeof a,e="string"==typeof a.selector,f=void 0===a.regionType,g="function"==typeof a;if(!g&&!d&&!e)throw new Error("Region must be specified as a Region type, a selector string or an object with selector property");var h,i;d&&(h=a),a.selector&&(h=a.selector),g&&(i=a),!g&&f&&(i=b),a.regionType&&(i=a.regionType);var j=new i({el:h});return a.parentEl&&(j.getEl=function(b){var d=a.parentEl;return c.isFunction(d)&&(d=d()),d.find(b)}),j}}),c.extend(f.Region.prototype,b.Events,{show:function(a){this.ensureEl();var b=a.isClosed||c.isUndefined(a.$el),d=a!==this.currentView;d&&this.close(),a.render(),(d||b)&&this.open(a),this.currentView=a,f.triggerMethod.call(this,"show",a),f.triggerMethod.call(a,"show")},ensureEl:function(){this.$el&&0!==this.$el.length||(this.$el=this.getEl(this.el))},getEl:function(a){return f.$(a)},open:function(a){this.$el.empty().append(a.el)},close:function(){var a=this.currentView;a&&!a.isClosed&&(a.close?a.close():a.remove&&a.remove(),f.triggerMethod.call(this,"close"),delete this.currentView)},attachView:function(a){this.currentView=a},reset:function(){this.close(),delete this.$el}}),f.Region.extend=f.extend,f.RegionManager=function(a){var b=a.Controller.extend({constructor:function(b){this._regions={},a.Controller.prototype.constructor.call(this,b)},addRegions:function(a,b){var d={};return c.each(a,function(a,e){"string"==typeof a&&(a={selector:a}),a.selector&&(a=c.defaults({},a,b));var f=this.addRegion(e,a);d[e]=f},this),d},addRegion:function(b,d){var e,f=c.isObject(d),g=c.isString(d),h=!!d.selector;return e=g||f&&h?a.Region.buildRegion(d,a.Region):c.isFunction(d)?a.Region.buildRegion(d,a.Region):d,this._store(b,e),this.triggerMethod("region:add",b,e),e},get:function(a){return this._regions[a]},removeRegion:function(a){var b=this._regions[a];this._remove(a,b)},removeRegions:function(){c.each(this._regions,function(a,b){this._remove(b,a)},this)},closeRegions:function(){c.each(this._regions,function(a,b){a.close()},this)},close:function(){this.removeRegions();var b=Array.prototype.slice.call(arguments);a.Controller.prototype.close.apply(this,b)},_store:function(a,b){this._regions[a]=b,this._setLength()},_remove:function(a,b){b.close(),delete this._regions[a],this._setLength(),this.triggerMethod("region:remove",a,b)},_setLength:function(){this.length=c.size(this._regions)}}),d=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return c.each(d,function(a){b.prototype[a]=function(){var b=c.values(this._regions),d=[b].concat(c.toArray(arguments));return c[a].apply(c,d)}}),b}(f),f.TemplateCache=function(a){this.templateId=a},c.extend(f.TemplateCache,{templateCaches:{},get:function(a){var b=this.templateCaches[a];return b||(b=new f.TemplateCache(a),this.templateCaches[a]=b),b.load()},clear:function(){var a,b=d(arguments),c=b.length;if(c>0)for(a=0;a<c;a++)delete this.templateCaches[b[a]];else this.templateCaches={}}}),c.extend(f.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var a=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(a),this.compiledTemplate},loadTemplate:function(a){var b=f.$(a).html();return b&&0!==b.length||e("Could not find template: '"+a+"'","NoTemplateError"),b},compileTemplate:function(a){return c.template(a)}}),f.Renderer={render:function(a,b){if(!a){var c=new Error("Cannot render the template since it's false, null or undefined.");throw c.name="TemplateNotFoundError",c}return("function"==typeof a?a:f.TemplateCache.get(a))(b)}},f.View=b.View.extend({constructor:function(a){c.bindAll(this,"render");var d=Array.prototype.slice.apply(arguments);this.options=a||{},b.View.prototype.constructor.apply(this,d),f.MonitorDOMRefresh(this),this.listenTo(this,"show",this.onShowCalled,this)},triggerMethod:f.triggerMethod,getTemplate:function(){return f.getOption(this,"template")},serializeModel:function(a){return c.clone(a.attributes)},mixinTemplateHelpers:function(a){a=a||{};var b=f.getOption(this,"templateHelpers");return c.isFunction(b)&&(b=b.call(this)),c.extend(a,b)},configureTriggers:function(){if(this.triggers){var a={},b=c.result(this,"triggers");return c.each(b,function(b,d){var e=c.isObject(b),f=e?b.event:b;a[d]=function(a){if(a){var c=a.preventDefault,d=a.stopPropagation,g=e?b.preventDefault:c,h=e?b.stopPropagation:d;g&&c&&c.apply(a),h&&d&&d.apply(a)}var i={view:this,model:this.model,collection:this.collection};this.triggerMethod(f,i)}},this),a}},delegateEvents:function(a){this._delegateDOMEvents(a),f.bindEntityEvents(this,this.model,f.getOption(this,"modelEvents")),f.bindEntityEvents(this,this.collection,f.getOption(this,"collectionEvents"))},_delegateDOMEvents:function(a){a=a||this.events,c.isFunction(a)&&(a=a.call(this));var d={},e=this.configureTriggers();c.extend(d,a,e),b.View.prototype.delegateEvents.call(this,d)},undelegateEvents:function(){var a=Array.prototype.slice.call(arguments);b.View.prototype.undelegateEvents.apply(this,a),f.unbindEntityEvents(this,this.model,f.getOption(this,"modelEvents")),f.unbindEntityEvents(this,this.collection,f.getOption(this,"collectionEvents"))},onShowCalled:function(){},close:function(){if(!this.isClosed){!1!==this.triggerMethod("before:close")&&(this.isClosed=!0,this.triggerMethod("close"),this.unbindUIElements(),this.remove())}},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var a=c.result(this,"_uiBindings");this.ui={},c.each(c.keys(a),function(b){var c=a[b];this.ui[b]=this.$(c)},this)}},unbindUIElements:function(){this.ui&&this._uiBindings&&(c.each(this.ui,function(a,b){delete this.ui[b]},this),this.ui=this._uiBindings,delete this._uiBindings)}}),f.ItemView=f.View.extend({constructor:function(){f.View.prototype.constructor.apply(this,d(arguments))},serializeData:function(){var a={};return this.model?a=this.serializeModel(this.model):this.collection&&(a={items:this.serializeCollection(this.collection)}),a},serializeCollection:function(a){return a.map(function(a){return this.serializeModel(a)},this)},render:function(){this.isClosed=!1,this.triggerMethod("before:render",this),this.triggerMethod("item:before:render",this);var a=this.serializeData();a=this.mixinTemplateHelpers(a);var b=this.getTemplate(),c=f.Renderer.render(b,a);return this.$el.html(c),this.bindUIElements(),this.triggerMethod("render",this),this.triggerMethod("item:rendered",this),this},close:function(){this.isClosed||(this.triggerMethod("item:before:close"),f.View.prototype.close.apply(this,d(arguments)),this.triggerMethod("item:closed"))}}),f.CollectionView=f.View.extend({itemViewEventPrefix:"itemview",constructor:function(a){this._initChildViewStorage(),f.View.prototype.constructor.apply(this,d(arguments)),this._initialEvents(),this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment()},startBuffering:function(){this.initRenderBuffer(),this.isBuffering=!0},endBuffering:function(){this.appendBuffer(this,this.elBuffer),this.initRenderBuffer(),this.isBuffering=!1},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this.render,this))},addChildView:function(a,b,c){this.closeEmptyView();var d=this.getItemView(a),e=this.collection.indexOf(a);this.addItemView(a,d,e)},onShowCalled:function(){this.children.each(function(a){f.triggerMethod.call(a,"show")})},triggerBeforeRender:function(){this.triggerMethod("before:render",this),this.triggerMethod("collection:before:render",this)},triggerRendered:function(){this.triggerMethod("render",this),this.triggerMethod("collection:rendered",this)},render:function(){return this.isClosed=!1,this.triggerBeforeRender(),this._renderChildren(),this.triggerRendered(),this},_renderChildren:function(){this.startBuffering(),this.closeEmptyView(),this.closeChildren(),this.collection&&this.collection.length>0?this.showCollection():this.showEmptyView(),this.endBuffering()},showCollection:function(){var a;this.collection.each(function(b,c){a=this.getItemView(b),this.addItemView(b,a,c)},this)},showEmptyView:function(){var a=this.getEmptyView();if(a&&!this._showingEmptyView){this._showingEmptyView=!0;var c=new b.Model;this.addItemView(c,a,0)}},closeEmptyView:function(){this._showingEmptyView&&(this.closeChildren(),delete this._showingEmptyView)},getEmptyView:function(){return f.getOption(this,"emptyView")},getItemView:function(a){var b=f.getOption(this,"itemView");return b||e("An `itemView` must be specified","NoItemViewError"),b},addItemView:function(a,b,d){var e=f.getOption(this,"itemViewOptions");c.isFunction(e)&&(e=e.call(this,a,d));var g=this.buildItemView(a,b,e);this.addChildViewEventForwarding(g),this.triggerMethod("before:item:added",g),this.children.add(g),this.renderItemView(g,d),this._isShown&&f.triggerMethod.call(g,"show"),this.triggerMethod("after:item:added",g)},addChildViewEventForwarding:function(a){var b=f.getOption(this,"itemViewEventPrefix");this.listenTo(a,"all",function(){var c=d(arguments);c[0]=b+":"+c[0],c.splice(1,0,a),f.triggerMethod.apply(this,c)},this)},renderItemView:function(a,b){a.render(),this.appendHtml(this,a,b)},buildItemView:function(a,b,d){return new b(c.extend({model:a},d))},removeItemView:function(a){var b=this.children.findByModel(a);this.removeChildView(b),this.checkEmpty()},removeChildView:function(a){a&&(this.stopListening(a),a.close?a.close():a.remove&&a.remove(),this.children.remove(a)),this.triggerMethod("item:removed",a)},checkEmpty:function(){this.collection&&0!==this.collection.length||this.showEmptyView()},appendBuffer:function(a,b){a.$el.append(b)},appendHtml:function(a,b,c){a.isBuffering?a.elBuffer.appendChild(b.el):a.$el.append(b.el)},_initChildViewStorage:function(){this.children=new b.ChildViewContainer},close:function(){this.isClosed||(this.triggerMethod("collection:before:close"),this.closeChildren(),this.triggerMethod("collection:closed"),f.View.prototype.close.apply(this,d(arguments)))},closeChildren:function(){this.children.each(function(a){this.removeChildView(a)},this),this.checkEmpty()}}),f.CompositeView=f.CollectionView.extend({constructor:function(){f.CollectionView.prototype.constructor.apply(this,d(arguments))},_initialEvents:function(){this.once("render",function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this._renderChildren,this))})},getItemView:function(a){var b=f.getOption(this,"itemView")||this.constructor;return b||e("An `itemView` must be specified","NoItemViewError"),b},serializeData:function(){var a={};return this.model&&(a=this.serializeModel(this.model)),a},render:function(){this.isRendered=!0,this.isClosed=!1,this.resetItemViewContainer(),this.triggerBeforeRender();var a=this.renderModel();return this.$el.html(a),this.bindUIElements(),this.triggerMethod("composite:model:rendered"),this._renderChildren(),this.triggerMethod("composite:rendered"),this.triggerRendered(),this},_renderChildren:function(){this.isRendered&&(f.CollectionView.prototype._renderChildren.call(this),this.triggerMethod("composite:collection:rendered"))},renderModel:function(){var a={};a=this.serializeData(),a=this.mixinTemplateHelpers(a);var b=this.getTemplate();return f.Renderer.render(b,a)},appendBuffer:function(a,b){this.getItemViewContainer(a).append(b)},appendHtml:function(a,b,c){if(a.isBuffering)a.elBuffer.appendChild(b.el);else{this.getItemViewContainer(a).append(b.el)}},getItemViewContainer:function(a){if("$itemViewContainer"in a)return a.$itemViewContainer;var b,d=f.getOption(a,"itemViewContainer");if(d){var g=c.isFunction(d)?d():d;b=a.$(g),b.length<=0&&e("The specified `itemViewContainer` was not found: "+a.itemViewContainer,"ItemViewContainerMissingError")}else b=a.$el;return a.$itemViewContainer=b,b},resetItemViewContainer:function(){this.$itemViewContainer&&delete this.$itemViewContainer}}),f.Layout=f.ItemView.extend({regionType:f.Region,constructor:function(a){a=a||{},this._firstRender=!0,this._initializeRegions(a),f.ItemView.prototype.constructor.call(this,a)},render:function(){this.isClosed&&this._initializeRegions(),this._firstRender?this._firstRender=!1:this.isClosed||this._reInitializeRegions();var a=Array.prototype.slice.apply(arguments);return f.ItemView.prototype.render.apply(this,a)},close:function(){if(!this.isClosed){this.regionManager.close();var a=Array.prototype.slice.apply(arguments);f.ItemView.prototype.close.apply(this,a)}},addRegion:function(a,b){var c={};return c[a]=b,this._buildRegions(c)[a]},addRegions:function(a){return this.regions=c.extend({},this.regions,a),this._buildRegions(a)},removeRegion:function(a){return delete this.regions[a],this.regionManager.removeRegion(a)},_buildRegions:function(a){var b=this,c={regionType:f.getOption(this,"regionType"),parentEl:function(){return b.$el}};return this.regionManager.addRegions(a,c)},_initializeRegions:function(a){var b;this._initRegionManager(),b=c.isFunction(this.regions)?this.regions(a):this.regions||{},this.addRegions(b)},_reInitializeRegions:function(){this.regionManager.closeRegions(),this.regionManager.each(function(a){a.reset()})},_initRegionManager:function(){this.regionManager=new f.RegionManager,this.listenTo(this.regionManager,"region:add",function(a,b){this[a]=b,this.trigger("region:add",a,b)}),this.listenTo(this.regionManager,"region:remove",function(a,b){delete this[a],this.trigger("region:remove",a,b)})}}),f.AppRouter=b.Router.extend({constructor:function(a){b.Router.prototype.constructor.apply(this,d(arguments)),this.options=a||{};var c=f.getOption(this,"appRoutes"),e=this._getController();this.processAppRoutes(e,c)},appRoute:function(a,b){var c=this._getController();this._addAppRoute(c,a,b)},processAppRoutes:function(a,b){if(b){var d=c.keys(b).reverse();c.each(d,function(c){this._addAppRoute(a,c,b[c])},this)}},_getController:function(){return f.getOption(this,"controller")},_addAppRoute:function(a,b,d){var e=a[d];if(!e)throw new Error("Method '"+d+"' was not found on the controller");this.route(b,d,c.bind(e,a))}}),f.Application=function(a){this._initRegionManager(),this._initCallbacks=new f.Callbacks,this.vent=new b.Wreqr.EventAggregator,this.commands=new b.Wreqr.Commands,this.reqres=new b.Wreqr.RequestResponse,this.submodules={},c.extend(this,a),this.triggerMethod=f.triggerMethod},c.extend(f.Application.prototype,b.Events,{execute:function(){var a=Array.prototype.slice.apply(arguments);this.commands.execute.apply(this.commands,a)},request:function(){var a=Array.prototype.slice.apply(arguments);return this.reqres.request.apply(this.reqres,a)},addInitializer:function(a){this._initCallbacks.add(a)},start:function(a){this.triggerMethod("initialize:before",a),this._initCallbacks.run(a,this),this.triggerMethod("initialize:after",a),this.triggerMethod("start",a)},addRegions:function(a){return this._regionManager.addRegions(a)},closeRegions:function(){this._regionManager.closeRegions()},removeRegion:function(a){this._regionManager.removeRegion(a)},getRegion:function(a){return this._regionManager.get(a)},module:function(a,b){var c=d(arguments);return c.unshift(this),f.Module.create.apply(f.Module,c)},_initRegionManager:function(){this._regionManager=new f.RegionManager,this.listenTo(this._regionManager,"region:add",function(a,b){this[a]=b}),this.listenTo(this._regionManager,"region:remove",function(a,b){delete this[a]})}}),f.Application.extend=f.extend,f.Module=function(a,b){this.moduleName=a,this.submodules={},this._setupInitializersAndFinalizers(),this.app=b,this.startWithParent=!0,this.triggerMethod=f.triggerMethod},c.extend(f.Module.prototype,b.Events,{addInitializer:function(a){this._initializerCallbacks.add(a)},addFinalizer:function(a){this._finalizerCallbacks.add(a)},start:function(a){this._isInitialized||(c.each(this.submodules,function(b){b.startWithParent&&b.start(a)}),this.triggerMethod("before:start",a),this._initializerCallbacks.run(a,this),this._isInitialized=!0,this.triggerMethod("start",a))},stop:function(){this._isInitialized&&(this._isInitialized=!1,f.triggerMethod.call(this,"before:stop"),c.each(this.submodules,function(a){a.stop()}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),f.triggerMethod.call(this,"stop"))},addDefinition:function(a,b){this._runModuleDefinition(a,b)},_runModuleDefinition:function(a,d){if(a){var e=c.flatten([this,this.app,b,f,f.$,c,d]);a.apply(this,e)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new f.Callbacks,this._finalizerCallbacks=new f.Callbacks}}),c.extend(f.Module,{create:function(a,b,e){var f=a,g=d(arguments);g.splice(0,3),b=b.split(".");var h=b.length,i=[];return i[h-1]=e,c.each(b,function(b,c){var d=f;f=this._getModule(d,b,a),this._addModuleDefinition(d,f,i[c],g)},this),f},_getModule:function(a,b,c,d,e){var g=a[b];return g||(g=new f.Module(b,c),a[b]=g,a.submodules[b]=g),g},_addModuleDefinition:function(a,b,d,e){var f,g;c.isFunction(d)?(f=d,g=!0):c.isObject(d)?(f=d.define,g=d.startWithParent):g=!0,f&&b.addDefinition(f,e),b.startWithParent=b.startWithParent&&g,b.startWithParent&&!b.startWithParentIsConfigured&&(b.startWithParentIsConfigured=!0,a.addInitializer(function(a){b.startWithParent&&b.start(a)}))}})}(0,b,a);return b.Marionette}),define("backbone.stickit",["underscore","jquery","backbone"],function(a,b,c){"use strict";c.Stickit={_handlers:[],addHandler:function(b){b=a.map(a.flatten([b]),function(b){return a.extend({updateModel:!0,updateView:!0,updateMethod:"text"},b)}),this._handlers=this._handlers.concat(b)}},a.extend(c.View.prototype,{_modelBindings:null,unstickit:function(b){var c=[],d=this;a.each(this._modelBindings,function(a,e){if(b&&a.model!==b)return!1;a.model.off(a.event,a.fn),c.push(a.model),delete d._modelBindings[e]}),a.each(a.uniq(c),function(a){a.trigger("stickit:unstuck",d.cid)}),this._modelBindings=a.compact(this._modelBindings),this.$el.off(".stickit"+(b?"."+b.cid:""))},stickit:function(b,c){var d=this,f=b||this.model,o=".stickit."+f.cid,p=c||this.bindings||{};this._modelBindings||(this._modelBindings=[]),this.unstickit(f),a.each(a.keys(p),function(b){var c,q,r,s,t=p[b]||{},u=a.uniqueId();":el"!=b?c=d.$(b):(c=d.$el,b=""),c.length&&(a.isString(t)&&(t={observe:t}),a.isFunction(t.observe)&&(t.observe=t.observe.call(d)),s=k(c,t),r=s.observe,s.bindId=u,s.view=d,q=a.extend({stickitChange:s},s.setOptions||{}),l(d,c,s,f,r),m(d,c,s,f,r),r&&(a.each(s.events||[],function(e){var h=e+o,j=function(b){var e=s.getVal.call(d,c,b,s,a.rest(arguments));g(d,s.updateModel,e,s)&&i(f,r,e,q,d,s)};""===b?d.$el.on(h,j):d.$el.on(h,b,j)}),a.each(a.flatten([r]),function(a){h(f,d,"change:"+a,function(a,b,e){(e&&e.stickitChange&&e.stickitChange.bindId||null)!=u&&n(d,c,s,j(a,r,s,d),a)})}),n(d,c,s,j(f,r,s,d),f,!0)),f.on("stickit:unstuck",function(a){a==d.cid&&e(d,s.destroy,c,f,s)}),e(d,s.initialize,c,f,s))}),this.remove=a.wrap(this.remove,function(b){var c=d;return d.unstickit(),b&&(c=b.apply(d,a.rest(arguments))),c})}});var d=function(b,c){var d=(c||"").split("."),e=a.reduce(d,function(a,b){return a[b]},b);return null==e?b:e},e=function(b,c){if(c)return(a.isString(c)?b[c]:c).apply(b,a.toArray(arguments).slice(2))},f=function(a){return a.find("option").not(function(){return!this.selected})},g=function(b,c){return a.isBoolean(c)?c:!(!a.isFunction(c)&&!a.isString(c))&&e.apply(this,a.toArray(arguments))},h=function(a,b,c,d){a.on(c,d,b),b._modelBindings.push({model:a,event:c,fn:d})},i=function(a,b,c,d,f,g){g.onSet&&(c=e(f,g.onSet,c,g)),a.set(b,c,d)},j=function(b,c,d,f){var g,h=function(c){var e=d.escape?b.escape(c):b.get(c);return a.isUndefined(e)||a.isNull(e)?"":e};return g=a.isArray(c)?a.map(c,h):h(c),d.onGet?e(f,d.onGet,g,d):g},k=c.Stickit.getConfiguration=function(b,d){var e=[{updateModel:!1,updateMethod:"text",update:function(a,b,c,d){a[d.updateMethod]&&a[d.updateMethod](b)},getVal:function(a,b,c){return a[c.updateMethod]()}}];a.each(c.Stickit._handlers,function(a){b.is(a.selector)&&e.push(a)}),e.push(d);var f=a.extend.apply(a,e);return f.visible&&!a.has(f,"updateView")?f.updateView=!1:a.has(f,"updateView")||(f.updateView=!0),delete f.selector,f},l=function(b,c,d,e,f){var g=["autofocus","autoplay","async","checked","controls","defer","disabled","hidden","loop","multiple","open","readonly","required","scoped","selected"];a.each(d.attributes||[],function(d){var i,k,l="";d=a.clone(d),i=d.observe||(d.observe=f),k=function(){var f=a.indexOf(g,d.name,!0)>-1?"prop":"attr",h=j(e,i,d,b);"class"==d.name?(c.removeClass(l).addClass(h),l=h):c[f](d.name,h)},a.each(a.flatten([i]),function(a){h(e,b,"change:"+a,k)}),k()})},m=function(b,c,d,f,g){if(null!=d.visible){var i=function(){var h=d.visible,i=d.visibleFn,k=j(f,g,d,b),l=!!k;(a.isFunction(h)||a.isString(h))&&(l=e(b,h,k,d)),i?e(b,i,c,l,d):l?c.show():c.hide()};a.each(a.flatten([g]),function(a){h(f,b,"change:"+a,i)}),i()}},n=function(a,b,c,d,f,h){g(a,c.updateView,d,c)&&(e(a,c.update,b,d,f,c),h||e(a,c.afterUpdate,b,d,c))};c.Stickit.addHandler([{selector:'[contenteditable="true"]',updateMethod:"html",events:["input","change"]},{selector:"input",events:["propertychange","input","change"],update:function(a,b){a.val(b)},getVal:function(a){return a.val()}},{selector:"textarea",events:["propertychange","input","change"],update:function(a,b){a.val(b)},getVal:function(a){return a.val()}},{selector:'input[type="radio"]',events:["change"],update:function(a,b){a.filter('[value="'+b+'"]').prop("checked",!0)},getVal:function(a){return a.filter(":checked").val()}},{selector:'input[type="checkbox"]',
events:["change"],update:function(c,d,e,f){c.length>1?(d||(d=[]),a.each(c,function(c){a.indexOf(d,b(c).val())>-1?b(c).prop("checked",!0):b(c).prop("checked",!1)})):a.isBoolean(d)?c.prop("checked",d):c.prop("checked",d==c.val())},getVal:function(c){var d;if(c.length>1)d=a.reduce(c,function(a,c){return b(c).prop("checked")&&a.push(b(c).val()),a},[]);else{d=c.prop("checked");var e=c.val();"on"!=e&&null!=e&&(d=d?c.val():null)}return d}},{selector:"select",events:["change"],update:function(f,g,h,i){var j,k=i.selectOptions,l=k&&k.collection||void 0,m=f.prop("multiple");if(!k){k={};var n=function(a){return a.map(function(){return{value:this.value,label:this.text}}).get()};f.find("optgroup").length?(l={opt_labels:[]},f.find("> option").length&&(l.opt_labels.push(void 0),a.each(f.find("> option"),function(a){l[void 0]=n(b(a))})),a.each(f.find("optgroup"),function(a){var c=b(a).attr("label");l.opt_labels.push(c),l[c]=n(b(a).find("option"))})):l=n(f.find("option"))}k.valuePath=k.valuePath||"value",k.labelPath=k.labelPath||"label";var o=function(c,e,f){a.each(c,function(c){var g=b("<option/>"),h=c,i=function(b,c){g.text(b),h=c,g.data("stickit_bind_val",h),a.isArray(h)||a.isObject(h)||g.val(h)};"__default__"===c?i(k.defaultOption.label,k.defaultOption.value):i(d(c,k.labelPath),d(c,k.valuePath)),!m&&null!=h&&null!=f&&h==f||a.isObject(f)&&a.isEqual(h,f)?g.prop("selected",!0):m&&a.isArray(f)&&a.each(f,function(b){a.isObject(b)&&(b=d(b,k.valuePath)),(b==h||a.isObject(b)&&a.isEqual(h,b))&&g.prop("selected",!0)}),e.append(g)})};f.html("");var p=function(a,b){var c=window;return 0===b.indexOf("this.")&&(c=a),b=b.replace(/^[a-z]*\.(.+)$/,"$1"),d(c,b)};if(j=a.isString(l)?p(this,l):a.isFunction(l)?e(this,l,f,i):l,j instanceof c.Collection&&(j=j.toJSON()),k.defaultOption&&o(["__default__"],f),a.isArray(j))o(j,f,g);else if(j.opt_labels)a.each(j.opt_labels,function(a){var c=b("<optgroup/>").attr("label",a);o(j[a],c,g),f.append(c)});else{var q,r=[];for(var s in j)q={},q[k.valuePath]=s,q[k.labelPath]=j[s],r.push(q);o(a.sortBy(r,k.comparator||k.labelPath),f,g)}},getVal:function(a){return a.prop("multiple")?b(f(a).map(function(){return b(this).data("stickit_bind_val")})).get():f(a).data("stickit_bind_val")}}])}),define("libs/backbone/index",["underscore","backbone"],function(a,b){"use strict";function c(a,b,c,e){var f=c.join("");return a._index||g(a,e),a._index[f]||d(a,f,c),a._index[f]}function d(a,b,c){a._indexKeys.push(c),a._index[b]=a.groupBy(function(a){return e(a.attributes,c)})}function e(a,b){for(var c="",d=0,e=b.length;d<e;d++)c+=a[b[d]];return c}function f(b){var c,d,e,g,h,i=[],j=a.first(b),k=j[0],l=j[1];for(a.isArray(l)||(l=[l]),c=0,e=l.length;c<e;c++)h=l[c],h&&h.id&&(h=h.id),i.push(a.object([k],[h]));if(b.length>1){var m=f(a.rest(b)),n=[];for(c=0,e=i.length;c<e;c++)for(d=0,g=m.length;d<g;d++)n[g*c+d]=a.extend({},i[c],m[d]);return n}return i}function g(a,b){a._index={},a._indexKeys=[],a.on("add",l(i)),a.on("remove",l(j)),b.ignoreChange||a.on("change",k),b.ignoreReset||a.on("reset",h)}function h(a){a._index={},a._indexKeys=[]}function i(b,c,d){a.has(b,c)?b[c].push(d):b[c]=[d]}function j(b,c,d){a.has(b,c)&&(b[c]=a.without(b[c],d))}function k(b){var c=a.keys(b.changedAttributes()),d=a.bind(a.include,null,c),f=b.previousAttributes();l(function(b,c,g,h){if(a.some(h,d)){j(b,e(f,h),g),i(b,c,g)}})(b)}function l(b){return function(c){var d=c.collection;a.forEach(d._indexKeys,function(a){var f=a.join(""),g=d._index[f],h=e(c.attributes,a);b(g,h,c,a)})}}b.Index=function(b,d){d||(d={}),b.prototype.where=function(b,f){if(a.filter(a.values(b),a.isArray).length)return this.query(b);var g=a.keys(b).sort(),h=c(this,b,g,d)[e(b,g)]||[];return f?a.first(h):h},b.prototype.query=function(b){for(var c=f(a.pairs(b)),d=[],e=0,g=c.length;e<g;e++)d=d.concat(this.where(c[e]));return d}}}),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty,c=[].slice,d=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};define("utils/tastypie",["jquery","underscore","backbone"],function(b,e,f){"use strict";var g,h,i,j,k;return g={},j=function(a,b,c){var d;switch(a){case void 0:return b===c;case"contains":return-1!==b.indexOf(c);case"icontains":return-1!==b.toLowerCase().indexOf(c.toLowerCase());case"startswith":return 0===b.lastIndexOf(c,0);case"endswith":return(d=b.lastIndexOf(c))>=0&&d===b.length-c.length;case"iexact":return b.toLowerCase()===c.toLowerCase();case"regex":return new RegExp(c,"gi").test(b)}},g.Model=function(b){function d(){return d.__super__.constructor.apply(this,arguments)}return a(d,b),d.prototype.url=function(){var a;return a=i(this,"urlRoot")||i(this.collection,"urlRoot")||k(),this.isNew()||(a+=h(this.get("id"))+"/"),a},d.prototype.save=function(){var a;return a=1<=arguments.length?c.call(arguments,0):[],this.saveDeferred=d.__super__.save.apply(this,a)},d}(f.Model),g.Collection=function(d){function f(){var a,b,d,g;b=arguments[0],d=arguments[1],a=3<=arguments.length?c.call(arguments,2):[],f.__super__.constructor.apply(this,[b,d].concat(c.call(a))),g=this.filters,this.filters={limit:0},g&&e.extend(this.filters,g),d&&d.filters&&e.extend(this.filters,d.filters)}return a(f,d),f.prototype.url=function(a){var c,d,e;return e=this.urlRoot,a&&(c=function(){var b,c,e;for(e=[],b=0,c=a.length;b<c;b++)d=a[b],e.push(h(d.get("id")));return e}().join(";"),e+="set/"+c+"/"),this.filters&&(e+="?"+b.param(this.filters)),e},f.prototype.parse=function(a){return null!=(null!=a?a.objects:void 0)?a.objects:a},f.prototype.where=function(a,b){return e.isEmpty(a)?null!=b?b:{0:[]}:this[b?"find":"filter"](function(b){var c,d,f,g,h,i,k,l,m,n;for(d in a)for(n=a[d],l=d.split("__"),d=l[0],m=l[1],k=b.get(d),e.isArray(k)||(k=[k]),h=k.length-1,g=f=0,i=k.length;f<i&&(c=k[g],!j(m,c,n));g=++f)if(g===h)return!1;return!0})},f}(f.Collection),h=function(a){return d.call(a,"/")>=0&&(a=e.chain(a.split("/")).compact().last().value()),a},i=function(a,b){return a&&a[b]?e.isFunction(a[b])?a[b]():a[b]:null},k=function(){throw new Error('An "url" property or function must be specified')},f.Tastypie=g})}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;define("backbone_all",["underscore","backbone","templates","backbone.marionette","backbone.stickit","libs/backbone/index","utils/tastypie"],function(b,c,d){"use strict";return c.Marionette.Renderer.render=function(a,c){if(b.isFunction(a))return a(c);if(!d[a])throw"Template '"+a+"' not found!";return d[a](c)},c.Marionette.CachingRegion=function(d){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,d),e.prototype.change=function(a,d,e){var f,g;return null==this.cachedViews&&(this.cachedViews={}),null==e&&(e={}),b.defaults(e,{transition:!1,addToCache:!0}),this.ensureEl(),this.currentViewID===a?(e.transition&&(this.currentView.$el.hide(),this.currentView.$el.fadeIn("slow")),this.currentView):(null!=(f=this.currentView)&&f.$el.hide(),!this.currentViewID||this.currentViewID in this.cachedViews||this.close(),a in this.cachedViews?this.currentView=this.cachedViews[a]:(g=d(),e.addToCache&&(this.cachedViews[a]=g),g.render(),this.$el.append(g.el),this.currentView=g,this.currentView.$el.hide()),this.currentViewID=a,this.currentView.$el.fadeIn("slow"),c.Marionette.triggerMethod.call(this.currentView,"show"),c.Marionette.triggerMethod.call(this,"show",this.currentView),this.currentView)},e}(c.Marionette.Region),c})}.call(this),function(){define("app",["backbone_all"],function(a){"use strict";var b;return b=new a.Marionette.Application,b.addRegions({topbarRegion:".topbar-region",bodyRegion:{selector:".body-region",regionType:a.Marionette.CachingRegion}}),b})}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;define("views/not_found_view",["backbone_all"],function(b){"use strict";return function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return a(c,b),c.prototype.template="not_found",c}(b.Marionette.ItemView)})}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;define("views/publish_tab_view",["backbone_all","app"],function(b,c){"use strict";return function(b){function d(){return d.__super__.constructor.apply(this,arguments)}return a(d,b),d.prototype.template="publish_tab",d.prototype.ui={counter:".counter"},d.prototype.initialize=function(){return this.model=c.fonts.getCurrent(),this.listenTo(this.model.related.glyphs,"add remove reset",this.updateCounter)},d.prototype.onRender=function(){return this.updateCounter()},d.prototype.updateCounter=function(){return this.ui.counter.text(this.model.related.glyphs.length)},d}(b.Marionette.ItemView)})}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;define("views/navbar_view",["backbone_all","app","views/publish_tab_view"],function(b,c,d){"use strict";return function(b){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,b),e.prototype.template="navbar",e.prototype.events={"input .filter input":"updateIconFilter","click .filter-reset":function(a){return a.preventDefault(),c.vent.trigger("iconFilter:reset")}},e.prototype.regions={publishTabRegion:".publish-tab-region"},e.prototype.ui={iconFilterWrap:".filter-wrap",iconFilter:".filter input",filterReset:".filter-reset"},e.prototype.initialize=function(){return this.listenTo(c.vent,"iconFilter:reset",this.resetFilter),this.listenTo(c.router,"route",this.toggleSearchBar)},e.prototype.onRender=function(){return this.publishTabRegion.show(new d)},e.prototype.updateIconFilter=function(a){var b;return a.preventDefault(),b=this.ui.iconFilter.val(),b?this.ui.filterReset.show():this.ui.filterReset.hide(),b.length>1?c.vent.trigger("iconFilter:apply",b):c.vent.trigger("iconFilter:reset",b)},e.prototype.resetFilter=function(a){if(!a)return this.ui.iconFilter.val(""),this.ui.filterReset.hide()},e.prototype.toggleSearchBar=function(a){return"selectIcons"===a||"index"===a?this.ui.iconFilterWrap.show():this.ui.iconFilterWrap.hide()},e}(b.Marionette.Layout)})}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;define("views/select_font_view",["backbone_all"],function(b){"use strict";var c;return c=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return a(c,b),c.prototype.tagName="li",c.prototype.template="select_font_item",c}(b.Marionette.ItemView),function(b){function d(){return d.__super__.constructor.apply(this,arguments)}return a(d,b),d.prototype.template="select_font",d.prototype.itemViewContainer=".dropdown-menu",d.prototype.itemView=c,d.prototype.modelEvents={"change:full_name":"render"},d.prototype.initialize=function(){return this.model=this.collection.getCurrent()},d}(b.Marionette.CompositeView)})}.call(this),function(){define("utils/helpers",[],function(){"use strict";return{slugify:function(a){return a.toLowerCase().replace(/[\s_]+/g,"-").replace(/[^-\w]+/g,"").replace(/-{2,}/g,"-").replace(/^-/g,"").replace(/-$/g,"")},after:function(a,b){return setTimeout(b,a)},every:function(a,b){return setInterval(b,a)},getChunks:function(a,b){var c,d,e;for(d=[],c=a.length,e=0;e<c;)d.push(a.slice(e,e+b)),e+=b;return d}}})}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;define("views/dialog_view",["backbone_all"],function(b){"use strict";return function(c){function d(){return d.__super__.constructor.apply(this,arguments)}return a(d,c),d.prototype.template="dialog",d.prototype.className="modal hide fade",d.prototype.events={"click .submit":"onSubmit",hidden:"onHidden"},d.prototype.initialize=function(a){return this.model=new b.Model({header:a.header,body:a.body,submitText:a.submitText}),this.callback=a.callback,this.render()},d.prototype.onRender=function(){return this.$el.modal()},d.prototype.onSubmit=function(a){return a.preventDefault(),this.$el.modal("hide").one("hidden",function(a){return function(){return a.callback()}}(this))},d.prototype.onHidden=function(){return this.close()},d}(b.Marionette.ItemView)})}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;define("views/confirm_view",["backbone_all","views/dialog_view"],function(b,c){"use strict";return function(c){function d(){return d.__super__.constructor.apply(this,arguments)}return a(d,c),d.prototype.template="confirm",d.prototype.events={"click .submit":"onSubmit",hidden:"onHidden","input .verify":"onVerify"},d.prototype.ui={verifyInput:".verify",submitButton:"a.submit"},d.prototype.initialize=function(a){return this.verified=!1,this.verifyText=a.verifyText,this.model=new b.Model({header:a.header,body:a.body,submitText:a.submitText,notice:a.notice}),this.callback=a.callback,this.render()},d.prototype.onVerify=function(){return this.ui.verifyInput.val()===this.verifyText?(this.verified=!0,this.ui.submitButton.removeClass("disabled")):(this.verified=!1,this.ui.submitButton.addClass("disabled"))},d.prototype.onSubmit=function(a){if(a.preventDefault(),this.verified)return this.$el.modal("hide").one("hidden",function(a){return function(){return a.callback()}}(this))},d}(c)})}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;define("views/form_view",["backbone_all"],function(b){"use strict";return function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return a(c,b),c.prototype.tagName="form",c.prototype.className="modal hide fade",c.prototype.events={submit:"onSubmit",hidden:"onHidden",shown:"onShown"},c.prototype.initialize=function(){return this.render()},c.prototype.onRender=function(){return this.$el.modal()},c.prototype.onShown=function(){return this.$("input:first").focus()},c.prototype.onSubmit=function(a){var b,c,d,e,f,g,h,i,j,k;for(a.preventDefault(),d={},i=this.$el.serializeArray(),e=0,g=i.length;e<g;e++){if(b=i[e],null!=(j=this.filters)?j[b.name]:void 0)for(k=this.filters[b.name],f=0,h=k.length;f<h;f++)c=k[f],b.value=c(b.value);d[b.name]=b.value}return this.model.set(d),this.$el.modal("hide").one("hidden",function(a){return function(){return a.model.save()}}(this))},c.prototype.onHidden=function(){return this.close()},c}(b.Marionette.ItemView)})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},c={}.hasOwnProperty;define("views/font_form_view",["backbone_all","app","utils/helpers","views/confirm_view","views/form_view"],function(c,d,e,f,g){"use strict";return function(c){function g(){return this.toggleDeleteFontButtonState=a(this.toggleDeleteFontButtonState,this),g.__super__.constructor.apply(this,arguments)}return b(g,c),g.prototype.template="font_form",g.prototype.filters={css_class_prefix:[e.slugify,function(a){return a.substr(0,20)},function(a){return a||"icon"}]},g.prototype.events={submit:"onSubmit",hidden:"onHidden",shown:"onShown","click .delete-font":"deleteCurrentFont"},g.prototype.ui={deleteFontWrap:".delete-font-wrap"},g.prototype.onRender=function(){return g.__super__.onRender.call(this),this.toggleDeleteFontButtonState()},g.prototype.deleteCurrentFont=function(a){if(a.preventDefault(),1!==d.fonts.length)return new f({header:"Confirm deleting",body:"Are you sure you want to delete the font?",submitText:"Delete font",notice:"Please type the name of the font to delete",verifyText:this.model.get("full_name"),callback:function(){return d.fonts.getCurrent().destroy(),d.vent.trigger("currentFont:changed"),d.router.index()}})},g.prototype.toggleDeleteFontButtonState=function(){if(d.fonts.length<=1)return this.ui.deleteFontWrap.hide()},g}(g)})}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;define("views/font_share_view",["backbone_all","app","utils/helpers","views/dialog_view","views/form_view"],function(b,c,d,e,f){"use strict";return function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return a(c,b),c.prototype.template="font_share",c.prototype.events={submit:"onSubmit",hidden:"onHidden",shown:"onShown"},c.prototype.onRender=function(){return c.__super__.onRender.call(this)},c.prototype.onSubmit=function(a){var b,c,d,e,f,g,h,i,j,k;for(a.preventDefault(),d={},i=this.$el.serializeArray(),e=0,g=i.length;e<g;e++){if(b=i[e],null!=(j=this.filters)?j[b.name]:void 0)for(k=this.filters[b.name],f=0,h=k.length;f<h;f++)c=k[f],b.value=c(b.value);d[b.name]=b.value}return this.$el.modal("hide").one("hidden",function(a){return function(){return a.model.share(d.action,d.to_user)}}(this))},c}(f)})}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;define("views/undo_buttons_view",["backbone_all"],function(b){"use strict";return function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return a(c,b),c.prototype.template="undo_buttons",c.prototype.events={"click .undo-button":"undo","click .redo-button":"redo"},c.prototype.modelEvents={statusChanged:"updateButtons"},c.prototype.ui={undoButton:".undo-button",redoButton:".redo-button"},c.prototype.onRender=function(){return this.updateButtons()},c.prototype.updateButtons=function(){return this.ui.undoButton.toggleClass("activated",this.model.canUndo()),this.ui.redoButton.toggleClass("activated",this.model.canRedo())},c.prototype.undo=function(a){return a.preventDefault(),this.model.undo()},c.prototype.redo=function(a){return a.preventDefault(),this.model.redo()},c.prototype.serializeData=function(){return{canUndo:this.model.canUndo(),canRedo:this.model.canRedo()}},c}(b.Marionette.ItemView)})}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;define("views/fontbar_view",["backbone_all","app","views/select_font_view","views/font_form_view","views/dialog_view","views/font_share_view","views/undo_buttons_view"],function(b,c,d,e,f,g,h){"use strict";return function(b){function i(){return i.__super__.constructor.apply(this,arguments)}return a(i,b),i.prototype.template="fontbar",i.prototype.regions={selectFont:".select-font-wrap",undoButtons:".undo-buttons-wrap"},i.prototype.events={"click .edit-font":"showFontForm","click #reset-current-font":"resetIconSelection","click .new-font":"createNewFont","click .share-font":"shareFont"},i.prototype.initialize=function(){return this.listenTo(c.vent,"currentFont:changed",this.onRender)},i.prototype.onRender=function(){var a,b;return a=new d({collection:c.fonts}),this.selectFont.show(a),b=new h({model:c.fonts.getCurrent().undoManager}),this.undoButtons.show(b),this.listenTo(c.fonts.getCurrent().related.glyphs,"iconsChange",this.onIconsChange),this.listenTo(c.fonts.getCurrent().related.glyphs,"glyphsChange",this.onGlyphsChange)},i.prototype.onGlyphsChange=function(a){var b,d,e,f,g,h;for(h=[],d=0,g=a.length;d<g;d++)b=a[d],h.push(function(){var a,d,g,h;for(g=c.iconsets.models,h=[],a=0,d=g.length;a<d;a++)f=g[a],e=f.related.icons.findWhere({id:b.get("icon")}),null!=e?h.push(e.trigger("selectionChange")):h.push(void 0);return h}());return h},i.prototype.onIconsChange=function(a){var b,c,d,e;for(e=[],b=0,d=a.length;b<d;b++)c=a[b],e.push(c.trigger("selectionChange"));return e},i.prototype.showFontForm=function(a){return a.preventDefault(),new e({model:c.fonts.getCurrent()})},i.prototype.shareFont=function(a){return a.preventDefault(),new g({model:c.fonts.getCurrent()})},i.prototype.createNewFont=function(a){var b;return a.preventDefault(),b=c.fonts.create({},{wait:!0}).once("sync",function(){return b.markAsCurrent(),c.vent.trigger("currentFont:changed"),c.router.index()})},i.prototype.resetIconSelection=function(a){return a.preventDefault(),new f({body:"Do you want to deselect all icons in the current font?",submitText:"Deselect icons",callback:function(){return c.fonts.getCurrent().related.glyphs.deleteAll(),c.vent.trigger("currentFont:glyphsRemoved")}})},i}(b.Marionette.Layout)})}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;define("views/font_layout",["backbone_all","app","views/navbar_view","views/fontbar_view"],function(b,c,d,e){"use strict";return function(f){function g(){return g.__super__.constructor.apply(this,arguments)}return a(g,f),g.prototype.template="font_layout",g.prototype.regionType=b.Marionette.CachingRegion,g.prototype.regions={navbarRegion:".navbar-region",fontbarRegion:".fontbar-region",contentRegion:{selector:".content",regionType:b.Marionette.CachingRegion}},g.prototype.initialize=function(){return this.listenTo(c.vent,"currentFont:changed",this.onFontChanged),this.listenTo(c.vent,"currentFont:resetIconSelection",this.reselectIcons),this.listenTo(c.vent,"currentFont:glyphRemoved",this.reselectIcons),this.listenTo(c.vent,"currentFont:glyphsRemoved",this.deselectIcons)},g.prototype.onRender=function(){var a,b;if(b=new d({model:c.fonts.getCurrent()}),this.navbarRegion.show(b),!this.fontbarRegion.currentView)return a=new e({model:c.fonts.getCurrent()}),this.fontbarRegion.show(a)},g.prototype.onFontChanged=function(){return this.onRender(),this.reselectIcons()},g.prototype.reselectIcons=function(){var a,b;if("iconsetsView"in this.contentRegion.cachedViews)return a=this.contentRegion.cachedViews.iconsetsView,a.$el.find(".icon.selected").removeClass("selected"),b=c.iconsets.getSelectedIconsFor(c.fonts.getCurrent()),b.length?a.children.call("markIconsAsSelected",[b]):void 0},g.prototype.deselectIcons=function(){var a;if("iconsetsView"in this.contentRegion.cachedViews)return a=this.contentRegion.cachedViews.iconsetsView,a.$el.find(".icon.selected").removeClass("selected")},g}(b.Marionette.Layout)})}.call(this),function(){define("views/empty_view",["backbone_all"],function(a){"use strict";return function(b){return a.Marionette.ItemView.extend({template:"empty_view",className:b.className||"empty-view",tagName:b.tagName||"div",initialize:function(){return this.model=new a.Model({message:b.message})}})}})}.call(this),function(a){"use strict";function b(a){var b,e=c(a.units),f=Date.now(),h=d(a.from,e,f),i=d(a.to,e,f),j=h-i;return j>0?b="past":(b="future",j=-j),g(j,b,a.lang)}function c(a){if(void 0===a)return"ms";if("s"===a||"ms"===a)return a;throw new Error("Invalid units")}function d(a,b,c){if(void 0===a)return c;if("string"==typeof a&&(a=parseInt(a,10)),e(a)&&f(a))throw new Error("Invalid time");return"number"==typeof a&&"s"===b&&(a*=1e3),a}function e(a){return"[object Date]"!==Object.prototype.toString.call(a)||isNaN(a.getTime())}function f(a){return"number"!=typeof a||isNaN(a)}function g(a,b,c){var d,e,f=j[c]||j.en;for(d in i)if(i.hasOwnProperty(d)&&a>=i[d])return e=Math.floor(a/i[d]),f[b](e,f[d][(e>1)+0]);return f.defaults[b]}function h(){"function"==typeof define&&define.amd?define("libs/vaguetime",[],function(){return k}):"undefined"!=typeof module&&null!==module?module.exports=k:a.vagueTime=k}var i={year:315576e5,month:26298e5,week:6048e5,day:864e5,hour:36e5,minute:6e4},j={en:{year:["year","years"],month:["month","months"],week:["week","weeks"],day:["day","days"],hour:["hour","hours"],minute:["minute","minutes"],past:function(a,b){return a+" "+b+" ago"},future:function(a,b){return"in "+a+" "+b},defaults:{past:"just now",future:"soon"}},de:{year:["Jahr","Jahren"],month:["Monat","Monaten"],week:["Woche","Wochen"],day:["Tag","Tagen"],hour:["Stunde","Stunden"],minute:["Minute","Minuten"],past:function(a,b){return"vor "+a+" "+b},future:function(a,b){return"in "+a+" "+b},defaults:{past:"jetzt gerade",future:"bald"}}},k={get:b};h()}(this),function(){define("utils/svg",["underscore","jquery"],function(a,b){"use strict";var c,d,e,f,g;return g=function(a,b){var c;if(a.length)return c=b/512,a.children("path").attr("transform","scale("+c+" "+c+")")},d=function(a){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x;for(e=b(a),p=[],c=e.find("font-face"),i=e.find("font").attr("horiz-adv-x"),h=parseInt(c.attr("ascent"),10),j=parseInt(c.attr("descent"),10),x=h-j,n=[],v=e.find("glyph"),o=0,s=v.length;o<s;o++)k=v[o],d=b(k),l=d.attr("d"),m=d.attr("horiz-adv-x")||i,l&&l.length>20&&n.push({d:l,width:m});for(q=0,t=n.length;q<t;q++)if(k=n[q],w="<svg viewBox='0 0 "+k.width+" "+x+"'><g transform='matrix(1 0 0 -1 0 "+h+")'><path d='"+k.d+"' /></g></svg>",f=b(w).appendTo("body"),g=f[0].getBBox(),f.remove(),g.height===x){g.y<0&&(h-=g.y);break}for(r=0,u=n.length;r<u;r++)k=n[r],p.push("<svg viewBox='0 0 "+k.width+" "+x+"'><g transform='matrix(1 0 0 -1 0 "+h+")'><path d='"+k.d+"' /></g></svg>");return p},f=function(a){var c,d,e,f,g,h;return c=b(a),a=c[0],f=[],h=a.getAttribute("width"),e=a.getAttribute("height"),g=a.getAttribute("viewBox"),h&&f.push('width="'+h+'"'),e&&f.push('height="'+e+'"'),g&&f.push('viewBox="'+g+'"'),c.find("metadata").remove(),c.find("#adobe_illustrator_pgf").remove(),d=b("<div>").append(c).html().replace(/.*<svg[^>]*>/i,""),"<svg "+f.join(" ")+">"+d},c=function(a){var b;return b=a.replace(/(\r|.|\n)+<svg/i,"<svg").replace(/<\/svg>(\r|.|\n)+/i,"</svg>"),-1!==b.indexOf("metadata")&&(b=f(b)),b},e=function(a){return/font-face/i.test(a)?d(a):[c(a)]},{extractSvgImages:e,resize:g}})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},c={}.hasOwnProperty;define("views/personal_icon_view",["backbone_all","utils/svg","app","views/dialog_view"],function(c,d,e,f){"use strict";return function(c){function g(){return this.triggerFileInput=a(this.triggerFileInput,this),this.updateIcon=a(this.updateIcon,this),g.__super__.constructor.apply(this,arguments)}return b(g,c),g.prototype.template="personal_icon",g.prototype.tagName="li",g.prototype.events={"click .icon":"selectIcon","click .delete":"onDeleteIcon","change .update-icon-input":"updateIcon","click .update-icon":"triggerFileInput"},g.prototype.ui={icon:".icon"},g.prototype.modelEvents={"change:svg":"render",selectionChange:"selectionChange"},g.prototype.serializeData=function(){var a;return a=g.__super__.serializeData.call(this),a.svg=this.model.getSVG(),a},g.prototype.onRender=function(){if(d.resize(this.$el.find("svg"),24),this.model.isSelectedFor(e.fonts.getCurrent())&&this.ui.icon.addClass("selected"),!e.user.get("is_staff"))return this.$el.find(".update-icon").remove()},g.prototype.selectionChange=function(){return this.model.isSelectedFor(e.fonts.getCurrent())?this.ui.icon.addClass("selected"):this.ui.icon.removeClass("selected")},g.prototype.selectIcon=function(){return this.ui.icon.hasClass("selected")?this.deleteGlyph():this.createGlyph(),this.ui.icon.toggleClass("selected")},g.prototype.onDeleteIcon=function(a){return a.preventDefault(),new f({body:"Are you sure you want to delete this icon?",submitText:"Delete icon",callback:function(a){return function(){return a.deleteIcon()}}(this)})},g.prototype.deleteIcon=function(){var a,b,c,d;for(d=e.fonts.models,b=0,c=d.length;b<c;b++)a=d[b],a.related.glyphs.deleteByIcon(this.model);return this.$el.fadeOut(150,function(a){return function(){return a.model.destroy()}}(this))},g.prototype.createGlyph=function(){return e.fonts.getCurrent().related.glyphs.create(this.model)},g.prototype.deleteGlyph=function(){return e.fonts.getCurrent().related.glyphs.deleteByIcon(this.model)},g.prototype.updateIcon=function(a){var b,c;if(a.preventDefault(),b=a.target.files[0],b.type.match("image.svg"))return c=new FileReader,c.onload=function(a){return function(b){return a.model.save({svg:d.extractSvgImages(b.target.result)[0]},{wait:!0})}}(this),c.readAsText(b)},g.prototype.triggerFileInput=function(a){return a.preventDefault(),this.$el.find(".update-icon-input").trigger("click")},g}(c.Marionette.ItemView)})}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;define("views/icon_view",["views/personal_icon_view"],function(b){"use strict";return function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return a(c,b),c.prototype.template="icon",c.prototype.events={"click .icon":"selectIcon"},c}(b)})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},c={}.hasOwnProperty;define("views/iconset_view",["underscore","jquery","backbone_all","libs/vaguetime","app","views/empty_view","views/icon_view"],function(c,d,e,f,g,h,i){"use strict";return function(e){function j(){return this.onSelected=a(this.onSelected,this),j.__super__.constructor.apply(this,arguments)}return b(j,e),j.prototype.tagName="li",j.prototype.itemViewContainer=".icons",j.prototype.emptyView=h({message:"This icon set is empty."}),j.prototype.template="iconset",j.prototype.itemView=i,j.prototype.events={"click .iconset-name":"closeIconSetToggle",xselectableselected:"onSelected",xselectableselecting:"onSelecting",xselectableunselecting:"onSelecting"},j.prototype.bindings={".iconset-name":"name",".discount-link":{observe:"discount_expires_in",visible:!0},".trial-expiration":{observe:"trial_expires_in",onGet:function(a){if(a)return f.get({from:0,to:a,units:"s"})}}},j.prototype.collectionEvents={"add remove":"updateIconCounter"},j.prototype.ui={iconsList:".icons-wrapper",iconCounter:".icon-counter",closeIconSetToggle:".iconset-name",foundIconsCounter:".found-icons-counter"},j.prototype.initialize=function(){return this.collection=this.model.related.icons},j.prototype.onBeforeRender=function(){if(this.model.get("icon_groups").length)return this.groupContainers={}},j.prototype.onRender=function(){return this.stickit(),this.updateIconCounter(),this.ui.iconsList.xselectable({filter:".icons li"})},j.prototype.onClose=function(){return this.ui.iconsList.xselectable("destroy")},j.prototype.appendHtml=function(a,b){var c,d;return d=b.model.get("group"),d&&this.groupContainers?(c=this.groupContainers[d])||(c=this.$("div[data-group-id='"+d+"'] .icons")[0],this.groupContainers[d]=c):c=this.getItemViewContainer(a)[0],c.appendChild(b.el)},j.prototype.onSelected=function(a,b){var c,e,f,h,i,j,k,l,m,n;if(m=b.selected,m.length){for(n=[],e=[],l=function(){var a,b,c;for(c=[],a=0,
b=m.length;a<b;a++)k=m[a],c.push(d(k).find(".icon"));return c}(),f=0,j=l.length;f<j;f++)c=l[f],i=c.attr("data-id"),h=this.collection.findWhere({id:i}),c.hasClass("selected")?n.push(h):e.push(h);return n.reverse(),e.reverse(),g.fonts.getCurrent().related.glyphs.addAndDelete({selectedIcons:n,deselectedIcons:e})}},j.prototype.onSelecting=function(a,b){var c;return c=b.selecting||b.unselecting,d(c).find(".icon").toggleClass("selected")},j.prototype.closeIconSetToggle=function(a){var b;return a.preventDefault(),b=!this.model.get("is_closed"),this.ui.closeIconSetToggle.toggleClass("closed"),this.ui.iconsList.toggleClass("closed"),this.model.save({is_closed:b},{silent:!0})},j.prototype.updateIconCounter=function(){return this.ui.iconCounter.text(this.model.related.icons.length)},j.prototype.markIconsAsSelected=function(a){var b,c,d,e,f,g;for(g=a[0],f=[],b=0,d=g.length;b<d;b++)c=g[b],f.push(null!=(e=this.children.findByModel(c))?e.ui.icon.addClass("selected"):void 0);return f},j.prototype.applyFilter=function(a){var b,d,e,f,g,h,i,j,k;if(a.length){for(this.$el.show(),this.$el.find(".icon").parent().hide(),this.groupContainers&&this.$el.find(".icon-group").hide(),d=c.uniq(function(){var b,c,d;for(d=[],b=0,c=a.length;b<c;b++)f=a[b],d.push(f.get("group"));return d}()),e=0,h=d.length;e<h;e++)b=d[e],this.$("div[data-group-id='"+b+"']").show();this.ui.iconCounter.hide(),this.ui.foundIconsCounter.text(a.length),this.ui.foundIconsCounter.css("display","inline-block")}else this.$el.hide();for(k=[],g=0,i=a.length;g<i;g++)f=a[g],k.push(null!=(j=this.children.findByModel(f))?j.$el.show():void 0);return k},j.prototype.resetFilter=function(){return this.ui.iconCounter.css("display","inline-block"),this.ui.foundIconsCounter.hide(),this.$el.find(".icon").parent().show(),this.$el.find(".icon-group").show(),this.$el.show()},j}(e.Marionette.CompositeView)})}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;define("views/alert_view",["backbone_all"],function(b){"use strict";return function(c){function d(){return d.__super__.constructor.apply(this,arguments)}return a(d,c),d.prototype.template="alert",d.prototype.className="modal hide fade",d.prototype.events={hidden:"onHidden"},d.prototype.initialize=function(a){return this.model=new b.Model({header:a.header,body:a.body}),this.render()},d.prototype.onRender=function(){return this.$el.modal()},d.prototype.onHidden=function(){return this.close()},d}(b.Marionette.ItemView)})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},c={}.hasOwnProperty;define("views/uploading_dialog_view",["jquery","backbone_all","app"],function(c,d,e){"use strict";return function(d){function f(){return this.activeDoneState=a(this.activeDoneState,this),f.__super__.constructor.apply(this,arguments)}return b(f,d),f.prototype.template="uploading_dialog",f.prototype.className="uploading modal hide fade",f.prototype.events={"click .cancel":"onCancel",hidden:"onHidden"},f.prototype.ui={successFileNumber:".success-file-number",errorFileNumber:".error-file-number",lastFileNumber:".last-file-number"},f.prototype.initialize=function(a){return this.icons=a.icons,this.oldIconsLength=this.icons.length,this.lastFileNumber=a.lastFileNumber,this.listenTo(e.vent,"uploading:done",this.activeDoneState),this.listenTo(e.vent,"uploading:filesNumber:changed",this.updateLastFileNumber),this.render()},f.prototype.onRender=function(){return this.$el.modal({backdrop:"static"}),this.ui.lastFileNumber.text(this.lastFileNumber)},f.prototype.onCancel=function(a){return a.preventDefault(),this.$el.modal("hide").one("hidden",c.xhrPool.abortAll),this.icons.sort()},f.prototype.onHidden=function(){return this.remove()},f.prototype.activeDoneState=function(){var a,b;if(a=this.icons.length-this.oldIconsLength,b=this.lastFileNumber-a,this.ui.successFileNumber.text(a),this.$el.addClass("done"),this.icons.sort(),0!==b)return this.ui.errorFileNumber.text(b),this.$el.addClass("error")},f.prototype.updateLastFileNumber=function(a){return this.lastFileNumber=a,this.ui.lastFileNumber.text(this.lastFileNumber)},f}(d.Marionette.ItemView)})}.call(this),function(){define("utils/upload_icons",["underscore","jquery","utils/svg","app","utils/helpers","views/alert_view","views/uploading_dialog_view"],function(a,b,c,d,e,f,g){var h;return h=function(b,f,h){var i,j,k,l,m,n,o;for(j=b.length,new g({lastFileNumber:j,icons:f.related.icons}),l=[],o=[],k=0,m=b.length;k<m;k++)i=b[k],n=new FileReader,n.onload=function(b){return function(g){var i,k,m,n,o,p,q;for(q=c.extractSvgImages(g.target.result),1!==q.length&&(j=j-1+q.length,d.vent.trigger("uploading:filesNumber:changed",j)),o=[],m=0,n=q.length;m<n;m++)p=q[m],k=e.slugify(b.name.split(".")[0]),i={name:k,svg:p},h&&(i=a.extend(i,h)),l.push(i),j-=1,0===j?o.push(f.related.icons.addIcons(l).always(function(){return d.vent.trigger("uploading:done")})):o.push(void 0);return o}}(i),o.push(n.readAsText(i));return o},function(a,c,e){var g,i,j;if("drop"===a.type)j=a.originalEvent.dataTransfer.files;else if(j=a.target.files,g=b(a.target),!g.val())return;return j=function(){var a,b,c;for(c=[],a=0,b=j.length;a<b;a++)i=j[a],i.type.match("image.svg")&&c.push(i);return c}(),j.length?c?(h(j,c,e),null!=g?g.val(""):void 0):(b("body").scrollTop(0),c=d.iconsets.create({},{at:0}),c.saveDeferred.done(function(){return d.allIconSets.add(c),h(j,c,e),null!=g?g.val(""):void 0})):(new f({body:"Please select at least one SVG icon or SVG font to import."}),void(null!=g&&g.val("")))}})}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;define("views/iconset_form_view",["backbone_all","views/form_view"],function(b,c){"use strict";return function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return a(c,b),c.prototype.template="iconset_form",c}(c)})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},c={}.hasOwnProperty;define("views/personal_iconset_view",["underscore","utils/upload_icons","app","views/personal_icon_view","views/confirm_view","views/iconset_view","views/iconset_form_view"],function(c,d,e,f,g,h,i){"use strict";return function(j){function k(){return this.onUpload=a(this.onUpload,this),this.triggerFileInput=a(this.triggerFileInput,this),k.__super__.constructor.apply(this,arguments)}return b(k,j),k.prototype.template="personal_iconset",k.prototype.itemView=f,k.prototype.events=c.extend(h.prototype.events,{"click .add-icons":"triggerFileInput","change .add-icons-input":"onUpload","click .delete-iconset":"onDeleteIconSet","click .edit":"showIconSetForm"}),k.prototype.collectionEvents={"add remove":"updateIconCounter",sort:"render"},k.prototype.onDeleteIconSet=function(a){return a.preventDefault(),new g({header:"Confirm deleting",body:"Are you sure you want to delete this icon set?",submitText:"Delete this icon set",notice:"Please type the name of the iconset to delete",verifyText:this.model.get("name"),callback:function(a){return function(){return a.deleteIconSet()}}(this)})},k.prototype.deleteIconSet=function(){var a,b,c,d,f,g,h,i,j,k,l,m;for(m=this.model.related.icons.pluck("resource_uri"),j=e.fonts.models,c=0,g=j.length;c<g;c++)for(a=j[c],d=0,h=m.length;d<h;d++)for(l=m[d],k=a.related.glyphs.where({icon:l}),f=0,i=k.length;f<i;f++)b=k[f],b.collection.remove(b);return this.model.destroy()},k.prototype.showIconSetForm=function(a){return a.preventDefault(),new i({model:this.model})},k.prototype.triggerFileInput=function(a){return a.preventDefault(),this.$el.find(".add-icons-input").trigger("click")},k.prototype.onUpload=function(a){return d(a,this.model)},k}(h)})}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;define("views/iconsets_view",["jquery","backbone_all","app","views/empty_view","views/iconset_view","views/personal_iconset_view","utils/upload_icons"],function(b,c,d,e,f,g,h){"use strict";return function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return a(c,b),c.prototype.template="iconsets",c.prototype.itemViewContainer=".iconsets",c.prototype.emptyView=e({message:"This icon set is empty."}),c.prototype.ui={filterInfoWrap:".filter-info-wrap",filterInfo:".filter-info"},c.prototype.events={"change .import-icons-input":h,"click .filter-reset":function(a){return a.preventDefault(),d.vent.trigger("iconFilter:reset")}},c.prototype.initialize=function(){return this.listenTo(d.vent,"iconFilter:apply",this.applyFilter),this.listenTo(d.vent,"iconFilter:reset",this.resetFilter)},c.prototype.itemView=function(a){return a.model.isPersonal()?new g(a):new f(a)},c.prototype.appendHtml=function(a,b,c){var d;return d=this.getItemViewContainer(a),0===c?d.prepend(b.el):d.append(b.el)},c.prototype.applyFilter=function(a){var b,c;return b=0,this.children.each(function(c){var d;return d=c.collection.where({tags__startswith:a}),d.length&&(b+=d.length),c.applyFilter(d)}),c=b>0?1===b?"1 icon was found":b+" icons were found":"Can't find any icons matching '"+a+"'",this.showFilterInfo(c)},c.prototype.resetFilter=function(){return this.hideFilterInfo(),this.children.each(function(a){return a.resetFilter()})},c.prototype.showFilterInfo=function(a){return this.ui.filterInfo.text(a),this.ui.filterInfoWrap.show()},c.prototype.hideFilterInfo=function(){return this.ui.filterInfoWrap.hide()},c}(c.Marionette.CompositeView)})}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;define("views/admin_iconset_form_view",["views/form_view"],function(b){"use strict";return function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return a(c,b),c.prototype.template="admin_iconset_form",c}(b)})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},c={}.hasOwnProperty;define("views/admin_iconset_view",["underscore","jquery","utils/upload_icons","views/personal_iconset_view","views/admin_iconset_form_view"],function(c,d,e,f,g){"use strict";return function(h){function i(){return this.drop=a(this.drop,this),this.dragEnd=a(this.dragEnd,this),this.dragLeave=a(this.dragLeave,this),this.dragEnter=a(this.dragEnter,this),this.dragStart=a(this.dragStart,this),this.dragHandleOff=a(this.dragHandleOff,this),this.dragHandleOn=a(this.dragHandleOn,this),this.addIconsToGroup=a(this.addIconsToGroup,this),this.triggerAddIconsToGroup=a(this.triggerAddIconsToGroup,this),i.__super__.constructor.apply(this,arguments)}return b(i,h),i.prototype.template="admin_iconset",i.prototype.events=c.extend(f.prototype.events,{"click .add-icons-to-group":"triggerAddIconsToGroup","change .add-icons-to-group-input":"addIconsToGroup","mousedown .drag-handle":"dragHandleOn","mouseup .drag-handle":"dragHandleOff",dragstart:"dragStart",dragenter:"dragEnter",dragleave:"dragLeave",dragend:"dragEnd",dragover:"dragOver",drop:"drop"}),i.prototype.showIconSetForm=function(a){return a.preventDefault(),new g({model:this.model})},i.prototype.triggerAddIconsToGroup=function(a){var b;return a.preventDefault(),b=d(a.target),b.parent().parent().find(".add-icons-to-group-input").trigger("click")},i.prototype.addIconsToGroup=function(a){var b,c;return b=d(a.target),c=b.parent().parent().parent().data("group-id"),e(a,this.model,{group:c})},i.prototype.dragHandleOn=function(){return this.isHandle=!0},i.prototype.dragHandleOff=function(){return this.isHandle=!1},i.prototype.dragStart=function(a){var b;return!!this.isHandle&&(b=a.originalEvent.dataTransfer,b.effectAllowed="move",b.dropEffect="move",b.setData("Text","dummy"),this.isHandle=!1,this.model.collection.draggedModel=this.model,!0)},i.prototype.dragOver=function(a){return a.preventDefault()},i.prototype.dragEnter=function(a){return null==this.$enteredChildren&&(this.$enteredChildren=d()),0===this.$enteredChildren.size()&&this.$el.addClass("drag-over"),this.$enteredChildren=this.$enteredChildren.add(a.target)},i.prototype.dragLeave=function(a){if(null==this.$enteredChildren&&(this.$enteredChildren=d()),this.$enteredChildren=this.$enteredChildren.not(a.target),0===this.$enteredChildren.size())return this.$el.removeClass("drag-over")},i.prototype.dragEnd=function(){return this.$el.removeClass("drag-over"),this.$enteredChildren=d()},i.prototype.drop=function(a){var b,c,d,e,f,g,h;if(a.stopPropagation(),a.preventDefault(),this.dragEnd(),b=this.model.collection,c=b.draggedModel,b.draggedModel=void 0,!c||c===this.model)return!1;for(b.models.splice(b.indexOf(c),1),b.models.splice(this.$el.index(),0,c),h=b.models,e=d=0,f=h.length;d<f;e=++d)g=h[e],g.save("position",e+1);return b.trigger("reset")},i}(f)})}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;define("views/admin_iconsets_view",["backbone_all","views/iconsets_view","views/admin_iconset_view"],function(b,c,d){"use strict";return function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return a(c,b),c.prototype.itemView=d,c}(c)})}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;define("views/glyphs_view",["underscore","backbone_all","utils/svg","app","utils/helpers"],function(b,c,d,e,f){"use strict";var g;return g=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return a(c,b),c.prototype.template="glyph",c.prototype.tagName="li",c.prototype.ui={codeInput:"input"},c.prototype.events={"focus input":"onFocus","blur input":"changeCode","keypress input":"onKeyPress","click .delete":"deleteGlyph"},c.prototype.serializeData=function(){var a;return a=c.__super__.serializeData.call(this),a.svg=this.model.getSVG(),a.codeInputValue=this.model.getCodeInputValue(),a},c.prototype.onFocus=function(a){var b;return this.$(a.target).one("mouseup",function(a){return a.preventDefault()}),b=this.ui.codeInput.val(),this.ui.codeInput.val(b.replace(/^U\+0*/g,"")),a.target.select()},c.prototype.onKeyPress=function(a){if(13===a.keyCode)return a.target.blur()},c.prototype.changeCode=function(){var a,b,c;if(b=this.ui.codeInput.val(),c=this.model.get("code"),this.model.parseInputCode(b)!==c&&(a=this.model.changeCode(b),this.model.get("code"),this.ui.codeInput.val(this.model.getCodeInputValue()),"done"!==a))return"not unique"===a?this.showInputError(this.ui.codeInput,'"'+b+'" is already in use'):this.showInputError(this.ui.codeInput,"wrong input")},c.prototype.showInputError=function(a,b,c){return null==c&&(c=3e3),a.tooltip({title:b,placement:"right",trigger:"manual"}),a.addClass("error"),a.tooltip("show"),f.after(c,function(){return a.tooltip("destroy"),a.removeClass("error")})},c.prototype.deleteGlyph=function(a){return a.preventDefault(),this.model.destroy(),e.vent.trigger("currentFont:glyphRemoved")},c}(c.Marionette.ItemView),function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return a(c,b),c.prototype.tagName="ul",c.prototype.className="glyphs",c.prototype.itemView=g,c}(c.Marionette.CollectionView)})}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;define("views/glyphs_css_view",["underscore","backbone_all","utils/svg","app","utils/helpers"],function(b,c,d,e,f){"use strict";var g;return g=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return a(c,b),c.prototype.template="glyph_css",c.prototype.tagName="li",c.prototype.ui={classNameInput:"input"},c.prototype.events={"focus input":"onFocus","blur input":"changeClassName","keypress input":"onKeyPress","click .delete":"deleteGlyph"},c.prototype.serializeData=function(){var a;return a=c.__super__.serializeData.call(this),a.svg=this.model.getSVG(),a},c.prototype.onFocus=function(a){return this.$(a.target).one("mouseup",function(a){return a.preventDefault()}),a.target.select()},c.prototype.onKeyPress=function(a){if(13===a.keyCode)return this.changeClassName(),a.target.blur()},c.prototype.changeClassName=function(){var a,b;return b=f.slugify(this.ui.classNameInput.val()),a=this.model.get("css_class"),b&&b!==a&&this.model.changeClassName(b),this.ui.classNameInput.val(this.model.get("css_class"))},c.prototype.deleteGlyph=function(a){return a.preventDefault(),this.model.destroy(),e.vent.trigger("currentFont:glyphRemoved")},c}(c.Marionette.ItemView),function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return a(c,b),c.prototype.tagName="ul",c.prototype.className="glyphs-css",c.prototype.itemView=g,c}(c.Marionette.CollectionView)})}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;define("views/customize_layout",["backbone_all","jquery","app","views/glyphs_view","views/glyphs_css_view"],function(b,c,d,e,f){"use strict";return function(b){function g(){return g.__super__.constructor.apply(this,arguments)}return a(g,b),g.prototype.template="customize_layout",g.prototype.regions={glyphsRegion:".glyphs-region",glyphsCSSRegion:".glyphs-css-region"},g.prototype.events={"click .reset-code-mapping":"resetCodes"},g.prototype.initialize=function(){return this.listenTo(d.vent,"currentFont:changed",this.onRender),this.listenTo(d.vent,"currentFont:resetCodes",this.onRender),this.listenTo(d.vent,"currentFont:resetIconSelection",this.onRender)},g.prototype.onRender=function(){var a;return a=d.fonts.getCurrent().related.glyphs,this.glyphsRegion.show(new e({collection:a})),this.glyphsCSSRegion.show(new f({collection:a}))},g.prototype.resetCodes=function(a){var b;return a.preventDefault(),b="pua"===c(a.target).attr("id"),d.fonts.getCurrent().resetCodes(b),d.vent.trigger("currentFont:resetCodes")},g}(b.Marionette.Layout)})}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;define("views/account_view",["jquery","backbone_all","views/dialog_view"],function(b,c,d){"use strict";return function(c){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,c),e.prototype.template="account",e.prototype.events={"click #delete-account":"onDeleteAccount"},e.prototype.onDeleteAccount=function(a){var c;return a.preventDefault(),c=b(a.target).attr("href"),new d({header:"Confirm deleting",body:"Are you sure you want to delete your account?",submitText:"Delete my account",callback:function(){return window.location=c}})},e}(c.Marionette.ItemView)})}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;define("collections/billings",["backbone_all"],function(b){"use strict";return function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return a(c,b),c.prototype.url=function(){return"/payments/billings/"},c}(b.Collection)})}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;define("views/billing_view",["jquery","backbone_all","collections/billings"],function(b,c,d){"use strict";return function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return a(c,b),c.prototype.template="billing",c.prototype.initialize=function(){return this.collection=new d,this.collection.fetch({reset:!0}),this.collection.bind("reset",this.render),0},c}(c.Marionette.ItemView)})}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;define("views/hosting_plans_view",["jquery","backbone_all"],function(b,c){"use strict";return function(c){function d(){return d.__super__.constructor.apply(this,arguments)}return a(d,c),d.prototype.template="hosting_plans",d.prototype.events={"click .plan-button":"onChangePlan"},d.prototype.initialize=function(){return 0},d.prototype.onChangePlan=function(a){if(b(a.target).hasClass("inactive"))return a.preventDefault()},d}(c.Marionette.ItemView)})}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;define("views/reference_view",["underscore","backbone_all","utils/svg","app"],function(b,c,d,e){"use strict";var f;return f=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return a(c,b),c.prototype.template="reference_item",c.prototype.tagName="li",c.prototype.ui={input:"input"},c.prototype.events={"focus input":"onFocus"},c.prototype.serializeData=function(){var a,b;return b=c.__super__.serializeData.call(this),b.svg=this.model.getSVG(),a=b.code,a=33<=a&&a<=126?String.fromCharCode(a):"&#x"+a.toString(16)+";",34!==b.code?b.dataIcon='data-icon="'+a+'"':b.dataIcon="data-icon='"+a+"'",b.css_class_prefix=e.fonts.getCurrent().get("css_class_prefix"),b},c.prototype.onFocus=function(a){return this.$(a.target).one("mouseup",function(a){return a.preventDefault()}),a.target.select()},c}(c.Marionette.ItemView),function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return a(c,b),c.prototype.template="reference",c.prototype.itemView=f,c.prototype.itemViewContainer=".icons-reference",c.prototype.modelEvents={"change:name":"render","change:css_class_prefix":"render"},c.prototype.collectionEvents={"change:css_class":"render","change:code":"render"},c}(c.Marionette.CompositeView)})}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;define("views/modal_page_view",["backbone_all"],function(b){"use strict";return function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return a(c,b),c.prototype.className="modal hide fade modal-page",c.prototype.events={hidden:"onHidden"},c.prototype.initialize=function(a){return this.template=a,this.render()},c.prototype.onRender=function(){return this.$el.modal()},c.prototype.onHidden=function(){return this.close()},c}(b.Marionette.ItemView)})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},c={}.hasOwnProperty;define("views/publish_font_buttons_view",["jquery","backbone_all","libs/vaguetime","views/modal_page_view","views/dialog_view","app"],function(c,d,e,f,g,h){"use strict";return function(d){function i(){return this.undeployFont=a(this.undeployFont,this),this.deployFont=a(this.deployFont,this),this.downloadFont=a(this.downloadFont,this),i.__super__.constructor.apply(this,arguments)}return b(i,d),i.prototype.template="deploy_button",i.prototype.events={"click .hosting-link":"selectHostingLink","click .deploy":"deployFont","click .undeploy":"undeployFont","click .download":"downloadFont","click .download-font-help":"showDownloadFontHelp"},i.prototype.ui={hostingLink:".hosting-link",glyphCount:".glyph-count",deployButton:".deploy",undeployButton:".undeploy",downloadButton:".download"},i.prototype.modelEvents={change:"render"},i.prototype.initialize=function(){return this.model=h.fonts.getCurrent(),this.listenTo(h.user,"change",this.render),this.listenTo(this.model.related.glyphs,"add remove reset",this.updateGlyphCount)},i.prototype.serializeData=function(){var a,b,c,d,f;return c=h.fonts.getCurrent(),d=i.__super__.serializeData.call(this),d.user=this.serializeModel(h.user),d.lastDeployment=e.get({to:c.get("hosting_timestamp"),units:"s"}),a=h.user.get("hosting_base_url"),b=h.user.get("hosting_cdn_base_url"),f=c.get("uuid"),d.hostingLink='<link href="'+a+f+'/icons.css" rel="stylesheet">',d.hostingCdnLink='<link href="'+b+f+'/icons.css" rel="stylesheet">',d},i.prototype.onRender=function(){return this.updateGlyphCount()},i.prototype.updateGlyphCount=function(){var a;return a=this.model.related.glyphs.length,this.ui.glyphCount.text(a),0===a?this.$el.addClass("not-ready"):this.$el.removeClass("not-ready")},i.prototype.selectHostingLink=function(a){return c(a.currentTarget).selectText()},i.prototype.showDownloadFontHelp=function(a){return a.preventDefault(),new f("download_font_help")},i.prototype.downloadFont=function(a){if(a.preventDefault(),!this.$el.hasClass("not-ready")&&!this.ui.downloadButton.hasClass("processing"))return this.ui.downloadButton.addClass("processing"),this.model.related.glyphs.syncDeferred.done(function(a){return function(){var b;return b=c.fileDownload("/download/font/"+a.model.attributes.uuid),b.done(function(){return a.ui.downloadButton.removeClass("processing")}),b.fail(function(){return a.ui.downloadButton.removeClass("processing"),alert("Download timeout. We are sorry, please try again.")})}}(this))},i.prototype.deployFont=function(a){if(a.preventDefault(),!(this.$el.hasClass("not-ready")||this.ui.deployButton.hasClass("disabled")||this.ui.deployButton.hasClass("processing")))return this.ui.deployButton.addClass("processing"),this.model.related.glyphs.syncDeferred.done(function(a){return function(){return a.model.deploy().done(function(){return a.ui.downloadButton.removeClass("processing")})}}(this))},i.prototype.undeployFont=function(a){return a.preventDefault(),new g({body:"Are you sure you want to unpublish your font?",submitText:"Unpublish font",callback:function(a){return function(){return a.ui.undeployButton.after("<p>Unpublishing...</p>"),a.ui.undeployButton.remove(),h.fonts.getCurrent().undeployFont()}}(this)})},i}(d.Marionette.ItemView)})}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;define("views/publish_font_view",["jquery","backbone_all","app","views/reference_view","views/publish_font_buttons_view"],function(b,c,d,e,f){"use strict";return function(c){function g(){return g.__super__.constructor.apply(this,arguments)}return a(g,c),g.prototype.template="publish_font",g.prototype.className="publish-view",g.prototype.regions={buttonsRegion:".buttons-region",referenceRegion:".icons-reference-wrap"},g.prototype.ui={tabs:".tab-pills a",steps:".steps"},g.prototype.events={"click .tab-pills a":"toggleMappingMethod"},g.prototype.initialize=function(){return this.listenTo(d.vent,"currentFont:changed",this.onRender)},g.prototype.serializeData=function(){var a;return a=g.__super__.serializeData.call(this),a.fontUuid=d.fonts.getCurrent().get("uuid"),a.user={isAdmin:d.user.isAdmin()},a},g.prototype.onRender=function(){var a,b;return a=d.fonts.getCurrent(),this.buttonsRegion.show(new f),b=new e({model:a,collection:a.related.glyphs}),this.referenceRegion.show(b),this.ui.tabs.first().trigger("click")},g.prototype.toggleMappingMethod=function(a){var c;return a.preventDefault(),c=b(a.target),this.ui.tabs.removeClass("selected"),this.ui.steps.hide(),this.el.className=this.el.className.replace(/\b ?[^ ]*-mapping\b/g,""),this.$el.addClass(c.data("mapping-method")),c.addClass("selected"),this.ui.steps.fadeIn()},g}(c.Marionette.Layout)})}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;define("views/svg_sprite_reference_view",["underscore","backbone_all","utils/svg","app"],function(b,c,d,e){"use strict";var f;return f=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return a(c,b),c.prototype.template="svg_sprite_reference_item",c.prototype.tagName="li",c.prototype.ui={input:"input"},c.prototype.events={"focus input":"onFocus"},c.prototype.serializeData=function(){var a,b;return b=c.__super__.serializeData.call(this),b.svg=this.model.getSVG(),a=e.fonts.getCurrent(),b.spriteName=a.get("name"),b.css_class_prefix=a.get("css_class_prefix"),b},c.prototype.onFocus=function(a){return this.$(a.target).one("mouseup",function(a){return a.preventDefault()}),a.target.select()},c}(c.Marionette.ItemView),function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return a(c,b),c.prototype.template="svg_sprite_reference",c.prototype.itemView=f,c.prototype.itemViewContainer=".icons-reference",c.prototype.modelEvents={"change:name":"render","change:css_class_prefix":"render"},c.prototype.collectionEvents={"change:css_class":"render"},c}(c.Marionette.CompositeView)})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},c={}.hasOwnProperty;define("views/publish_svg_buttons_view",["jquery","backbone_all","libs/vaguetime","views/modal_page_view","views/dialog_view","app"],function(c,d,e,f,g,h){"use strict";return function(d){function i(){return this.undeploySvgSprite=a(this.undeploySvgSprite,this),this.deploySvgSprite=a(this.deploySvgSprite,this),this.downloadSvgSprite=a(this.downloadSvgSprite,this),i.__super__.constructor.apply(this,arguments)}return b(i,d),i.prototype.template="publish_svg_buttons",i.prototype.events={"click .hosting-link":"selectHostingLink","click .deploy":"deploySvgSprite","click .undeploy-svg":"undeploySvgSprite","click .download":"downloadSvgSprite","click .download-sprite-help":"showDownloadSpriteHelp"},i.prototype.ui={hostingLink:".hosting-link",glyphCount:".glyph-count",deployButton:".deploy",undeployButton:".undeploy-svg",downloadButton:".download"},i.prototype.modelEvents={change:"render"},i.prototype.initialize=function(){return this.model=h.fonts.getCurrent(),this.listenTo(h.user,"change",this.render),this.listenTo(this.model.related.glyphs,"add remove reset",this.updateGlyphCount)},i.prototype.serializeData=function(){var a,b,c,d,f;return c=h.fonts.getCurrent(),d=i.__super__.serializeData.call(this),d.user=this.serializeModel(h.user),d.lastDeployment=e.get({to:c.get("svg_hosting_timestamp"),units:"s"}),a=h.user.get("hosting_base_url"),b=h.user.get("hosting_cdn_base_url"),f=c.get("uuid"),d.hostingLink='<script src="'+a+f+'/icons.js"><\/script>',d.hostingCdnLink='<script src="'+b+f+'/icons.js"><\/script>',d},i.prototype.onRender=function(){return this.updateGlyphCount()},i.prototype.updateGlyphCount=function(){var a
;return a=this.model.related.glyphs.length,this.ui.glyphCount.text(a),0===a?this.$el.addClass("not-ready"):this.$el.removeClass("not-ready")},i.prototype.selectHostingLink=function(a){return c(a.currentTarget).selectText()},i.prototype.showDownloadSpriteHelp=function(a){return a.preventDefault(),new f("download_sprite_help")},i.prototype.downloadSvgSprite=function(a){if(a.preventDefault(),!this.$el.hasClass("not-ready")&&!this.ui.downloadButton.hasClass("processing"))return this.ui.downloadButton.addClass("processing"),this.model.related.glyphs.syncDeferred.done(function(a){return function(){var b;return b=c.fileDownload("/download/svg-sprite/"+a.model.attributes.uuid),b.done(function(){return a.ui.downloadButton.removeClass("processing")}),b.fail(function(){return a.ui.downloadButton.removeClass("processing"),alert("Download timeout. We are sorry, please try again.")})}}(this))},i.prototype.deploySvgSprite=function(a){if(a.preventDefault(),!(this.$el.hasClass("not-ready")||this.ui.deployButton.hasClass("disabled")||this.ui.deployButton.hasClass("processing")))return this.ui.deployButton.addClass("processing"),this.model.related.glyphs.syncDeferred.done(function(a){return function(){return a.model.deploySvgSprite().done(function(){return a.ui.downloadButton.removeClass("processing")})}}(this))},i.prototype.undeploySvgSprite=function(a){return a.preventDefault(),new g({body:"Are you sure you want to unpublish your SVG sprite?",submitText:"Unpublish SVG sprite",callback:function(a){return function(){return a.ui.undeployButton.after("<p>Unpublishing...</p>"),a.ui.undeployButton.remove(),a.model.undeploySvgSprite()}}(this)})},i}(d.Marionette.ItemView)})}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;define("views/publish_svg_view",["jquery","backbone_all","app","views/svg_sprite_reference_view","views/publish_svg_buttons_view"],function(b,c,d,e,f){"use strict";return function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return a(c,b),c.prototype.template="publish_svg",c.prototype.className="publish-view",c.prototype.regions={buttonsRegion:".buttons-region",referenceRegion:".icons-reference-wrap"},c.prototype.initialize=function(){return this.listenTo(d.vent,"currentFont:changed",this.onRender)},c.prototype.serializeData=function(){var a;return a=c.__super__.serializeData.call(this),a.fontUuid=d.fonts.getCurrent().get("uuid"),a},c.prototype.onRender=function(){var a,b;return a=d.fonts.getCurrent(),this.buttonsRegion.show(new f),b=new e({model:a,collection:a.related.glyphs}),this.referenceRegion.show(b)},c}(c.Marionette.Layout)})}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty,c=function(a,b){return function(){return a.apply(b,arguments)}};define("views/iconsets_management_view",["backbone_all","app","views/empty_view","utils/upload_icons"],function(b,d,e,f){"use strict";var g,h;return g=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return a(c,b),c.prototype.template="premium_iconset",c.prototype.tagName="li",c.prototype.bindings={".discount-price":{observe:"discount_expires_in",visible:!0},".regular-price":{observe:"discount_expires_in",visible:function(a){return!a}}},c.prototype.onRender=function(){return this.stickit()},c.prototype.serializeData=function(){var a,b;return a=c.__super__.serializeData.call(this),b=this.model.getDiscountPrice(),b&&(a.discountPrice=b),a},c}(b.Marionette.ItemView),h=function(b){function e(){return this.deactivateIconSet=c(this.deactivateIconSet,this),this.activateIconSet=c(this.activateIconSet,this),e.__super__.constructor.apply(this,arguments)}return a(e,b),e.prototype.template="iconsets_management_item",e.prototype.tagName="li",e.prototype.events={"click .activate":"activateIconSet","click .deactivate":"deactivateIconSet"},e.prototype.modelEvents={"change thumbnail":"render"},e.prototype.ui={iconCounter:".icon-counter"},e.prototype.initialize=function(){return this.listenTo(this.model.related.icons,"add remove",this.updateIconCounter)},e.prototype.onRender=function(){return this.model.get("is_hidden")||this.$el.addClass("active"),this.updateIconCounter()},e.prototype.serializeData=function(){var a;return a=e.__super__.serializeData.call(this),a.isPremium=this.model.isPremium(),a},e.prototype.updateIconCounter=function(){return this.ui.iconCounter.text(this.model.iconCounter())},e.prototype.activateIconSet=function(a){return a.preventDefault(),this.$el.addClass("active"),this.model.save({is_hidden:!1}),this.model.relatedFetched()||this.model.fetchRelated(),d.iconsets.add(this.model)},e.prototype.deactivateIconSet=function(a){return a.preventDefault(),this.$el.removeClass("active"),this.model.save({is_hidden:!0}),d.iconsets.remove(this.model)},e}(b.Marionette.ItemView),function(b){function d(){return this.triggerFileInput=c(this.triggerFileInput,this),d.__super__.constructor.apply(this,arguments)}return a(d,b),d.prototype.template="iconsets_management",d.prototype.itemViewContainer=".iconsets-to-manage",d.prototype.emptyView=e({message:"There are no icon sets yet."}),d.prototype.events={"change .import-icons-input":f,"click .import-icons":"triggerFileInput"},d.prototype.collectionEvents={"add remove sort":"render"},d.prototype.onRender=function(){return 0},d.prototype.itemView=function(a){var b;return("function"==typeof(b=a.model).isPremiumIconSet?b.isPremiumIconSet():void 0)?new g(a):new h(a)},d.prototype.triggerFileInput=function(a){return a.preventDefault(),this.$el.find(".import-icons-input").trigger("click")},d}(b.Marionette.CompositeView)})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},c={}.hasOwnProperty;define("views/iconset_preview_view",["backbone_all","jquery","libs/vaguetime"],function(c,d,e){"use strict";return function(c){function f(){return this.updatePaymentURL=a(this.updatePaymentURL,this),f.__super__.constructor.apply(this,arguments)}return b(f,c),f.prototype.template="iconset_preview",f.prototype.events={"change .price-selection input":"updatePaymentURL"},f.prototype.ui={labels:".price-selection label",buyButton:".btn-primary",discountExpiration:".discount-expiration"},f.prototype.bindings={".discount-expiration":{observe:"discount_expires_in",onGet:function(a){if(a)return e.get({from:0,to:a,units:"s"})}},".discount-price":{observe:"discount_expires_in",visible:!0},".regular-price":{observe:"discount_expires_in",visible:function(a){return!a}}},f.prototype.serializeData=function(){var a,b;return a=f.__super__.serializeData.call(this),b=this.model.getDiscountPrice(),b&&(a.discountPrice=b),a},f.prototype.onRender=function(){return this.stickit()},f.prototype.updatePaymentURL=function(a){var b,c,e;return b=d(a.target),e="attachment"===b.val(),this.ui.labels.removeClass("checked"),b.parent().addClass("checked"),c=this.ui.buyButton.attr("href").split("?")[0],e&&(c+="?attachment=true"),this.ui.buyButton.attr("href",c)},f}(c.Marionette.ItemView)})}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;define("views/tags_view",["underscore","backbone_all","utils/svg","utils/helpers"],function(b,c,d,e){"use strict";var f,g;return f=function(c){function d(){return d.__super__.constructor.apply(this,arguments)}return a(d,c),d.prototype.template="tags_icon",d.prototype.tagName="li",d.prototype.ui={tagsInput:"input"},d.prototype.events={"blur input":"updateTags","keypress input":"onKeyPress"},d.prototype.serializeData=function(){var a;return a=d.__super__.serializeData.call(this),a.svg=this.model.getSVG(),a.tags=this.model.get("tags").join(", "),a},d.prototype.onKeyPress=function(a){if(13===a.keyCode)return this.updateTags(),a.target.blur()},d.prototype.updateTags=function(){var a,c,d,f;return d=this.ui.tagsInput.val(),c=b.compact(function(){var a,b,c,g;for(c=d.split(","),g=[],a=0,b=c.length;a<b;a++)f=c[a],g.push(e.slugify(f));return g}()),a=this.model.get("tags"),d=c.join(""),d&&d!==a.join("")&&this.model.save({tags:c}),this.ui.tagsInput.val(c.join(", "))},d}(c.Marionette.ItemView),g=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return a(c,b),c.prototype.tagName="li",c.prototype.itemViewContainer=".icons",c.prototype.template="tags_item",c.prototype.itemView=f,c.prototype.initialize=function(){return this.collection=this.model.related.icons},c}(c.Marionette.CompositeView),function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return a(c,b),c.prototype.tagName="ul",c.prototype.className="container",c.prototype.itemView=g,c}(c.Marionette.CollectionView)})}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;define("views/names_view",["underscore","backbone_all","utils/svg","utils/helpers"],function(b,c,d,e){"use strict";var f,g;return f=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return a(c,b),c.prototype.template="names_icon",c.prototype.tagName="li",c.prototype.ui={nameInput:"input"},c.prototype.events={"blur input":"updateNames","keypress input":"onKeyPress"},c.prototype.serializeData=function(){var a;return a=c.__super__.serializeData.call(this),a.svg=this.model.getSVG(),a},c.prototype.onKeyPress=function(a){if(13===a.keyCode)return this.updateNames(),a.target.blur()},c.prototype.updateNames=function(){var a,b;return b=e.slugify(this.ui.nameInput.val()),a=this.model.get("name"),b&&b!==a&&this.model.save({name:b}),this.ui.nameInput.val(b)},c}(c.Marionette.ItemView),g=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return a(c,b),c.prototype.tagName="li",c.prototype.itemViewContainer=".icons",c.prototype.template="names_item",c.prototype.itemView=f,c.prototype.initialize=function(){return this.collection=this.model.related.icons},c}(c.Marionette.CompositeView),function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return a(c,b),c.prototype.tagName="ul",c.prototype.className="container",c.prototype.itemView=g,c}(c.Marionette.CollectionView)})}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;define("router",["backbone_all","views/not_found_view","views/font_layout","views/admin_iconsets_view","views/iconsets_view","views/customize_layout","views/account_view","views/billing_view","views/hosting_plans_view","views/publish_font_view","views/publish_svg_view","views/iconsets_management_view","views/iconset_preview_view","views/tags_view","views/names_view"],function(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){"use strict";return function(b){function q(){return q.__super__.constructor.apply(this,arguments)}return a(q,b),q.prototype.routes={"":"index","select/:uuid":"selectIcons","customize/:uuid":"customize",publish:"publish_index","publish/font":"publish_font_index","publish/svg":"publish_svg_index","publish/font/:uuid":"publish_font","publish/svg/:uuid":"publish_svg",iconsets:"iconsetsManagement","iconsets/:uuid":"iconsetPreview",account:"account",billing:"billing",hosting:"hosting",tags:"tags",names:"names","*other":"notFound"},q.prototype.initialize=function(a){return this.app=a.app},q.prototype.index=function(){var a;return a=this.app.fonts.getCurrent().get("uuid"),this.navigate("select/"+a,{trigger:!0})},q.prototype.selectIcons=function(a){var b;if(this._getFontOrNull(a))return b=this.app.bodyRegion.change("fontLayout",function(){return new d}),b.contentRegion.change("iconsetsView",function(a){return function(){return a.app.user.isAdmin()?new e({collection:a.app.iconsets}):new f({collection:a.app.iconsets})}}(this),{transition:!0})},q.prototype.customize=function(a){var b;if(this._getFontOrNull(a))return b=this.app.bodyRegion.change("fontLayout",function(){return new d}),b.contentRegion.change("customizeLayout",function(){return new g},{addToCache:!1})},q.prototype.publish_index=function(){var a;return a=this.app.fonts.getCurrent().get("uuid"),this.navigate("publish/font/"+a,{trigger:!0})},q.prototype.publish_font_index=function(){var a;return a=this.app.fonts.getCurrent().get("uuid"),this.navigate("publish/font/"+a,{trigger:!0})},q.prototype.publish_svg_index=function(){var a;return a=this.app.fonts.getCurrent().get("uuid"),this.navigate("publish/svg/"+a,{trigger:!0})},q.prototype.publish_font=function(a){var b;if(this._getFontOrNull(a))return b=this.app.bodyRegion.change("fontLayout",function(){return new d}),b.contentRegion.change("publishFontView",function(){return new k})},q.prototype.publish_svg=function(a){var b;if(this._getFontOrNull(a))return b=this.app.bodyRegion.change("fontLayout",function(){return new d}),b.contentRegion.change("publishSvgView",function(){return new l})},q.prototype.iconsetsManagement=function(){return this.app.bodyRegion.change("iconsetsManagementView",function(a){return function(){return new m({collection:a.app.allIconSets})}}(this),{addToCache:!1})},q.prototype.iconsetPreview=function(a){var b;return b=this.app.premiumIconSets.findWhere({uuid:a}),b?this.app.bodyRegion.change("iconsetPreviewView",function(){return new n({model:b})},{addToCache:!1}):this.notFound()},q.prototype.account=function(){return this.app.bodyRegion.change("accountView",function(){return new h})},q.prototype.billing=function(){return this.app.bodyRegion.change("billingView",function(){return new i})},q.prototype.hosting=function(){return this.app.bodyRegion.change("hostingPlansView",function(a){return function(){return new j({model:a.app.user})}}(this))},q.prototype.tags=function(){var a;return a=function(a){return function(){return new o({collection:a.app.iconsets})}}(this),this.app.bodyRegion.change("tagsView",a,{addToCache:!1})},q.prototype.names=function(){var a;return a=function(a){return function(){return new p({collection:a.app.iconsets})}}(this),this.app.bodyRegion.change("namesView",a,{addToCache:!1})},q.prototype.notFound=function(){return this.app.bodyRegion.change("notFoundView",function(){return new c})},q.prototype._getFontOrNull=function(a){var b;return(b=this.app.fonts.findWhere({uuid:a}))?(b.isCurrent()||(b.markAsCurrent(),this.app.vent.trigger("currentFont:changed")),b):(this.notFound(),null)},q}(b.Router)})}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;define("models/user",["backbone_all"],function(b){"use strict";return function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return a(c,b),c.prototype.url=function(){return"/api/v1/user/"},c.prototype.isAdmin=function(){return this.get("is_staff")},c}(b.Model)})}.call(this),function(){define("constants",[],function(){"use strict";return{BASIC_LATIN_CHARS:"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!\"#$%&'()*+,-./:;<=>?@[]^_`{|}~\\",GLYPHS_SYNC_DELAY:4e3}})}.call(this),function(){define("utils/lzma",["jquery"],function(a){var b;return b=function(a){var b,c,d,e;for(a[3]=128,a.splice(4,8),e=[],b=0,d=a.length;b<d;b++)c=a[b],c<0&&(c+=256),e.push(c);return e},{compress:function(c,d){var e;return null==d&&(d=1),e=a.Deferred(),window.lzma.compress(c,d,function(a){return e.resolve(b(a))}),e.promise()}}})}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;define("utils/undo_manager",["backbone"],function(b){"use strict";return function(b){function c(){this.undoStack=[],this.redoStack=[],this.isUndoing=!1,this.isRedoing=!1}return a(c,b),c.prototype.pushUndo=function(a){return this.undoStack.push(a)},c.prototype.pushRedo=function(a){return this.redoStack.push(a)},c.prototype.pushAction=function(a){return this.isUndoing||this.isRedoing||(this.redoStack=[]),this.isUndoing?this.pushRedo(a):this.pushUndo(a),this.trigger("statusChanged")},c.prototype.canUndo=function(){return!this.isUndoing&&this.undoStack.length>0},c.prototype.canRedo=function(){return!this.isRedoing&&this.redoStack.length>0},c.prototype.undo=function(){var a;if(this.canUndo())return this.isUndoing=!0,a=this.undoStack.pop(),a(),this.isUndoing=!1,this.trigger("statusChanged")},c.prototype.redo=function(){var a;if(this.canRedo())return this.isRedoing=!0,a=this.redoStack.pop(),a(),this.isRedoing=!1,this.trigger("statusChanged")},c}(b.Model)})}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;define("models/glyph",["backbone_all","constants"],function(b,c){"use strict";return function(b){function d(){return d.__super__.constructor.apply(this,arguments)}return a(d,b),d.prototype.urlRoot="/api/v1/glyph/",d.prototype.defaults=function(){return{id:this.getNewID(),code:this.getFreeCode()}},d.prototype.toJSON=function(){var a;return a=d.__super__.toJSON.call(this),a.css=a.css_class,delete a.css_class,a},d.prototype.parse=function(a){return a=d.__super__.parse.call(this,a),a.css_class=a.css,delete a.css,a},d.prototype.destroy=function(){return this.collection.delete(this)},d.prototype.getNewID=function(){var a;return a=this.collection.pluck("id"),a.length?Math.max.apply(Math,this.collection.pluck("id"))+1:1},d.prototype.getCodeInputValue=function(){var a,b;if(33<=(a=this.get("code"))&&a<=126)return String.fromCharCode(a);for(b=a.toString(16).toUpperCase();b.length<4;)b="0"+b;return"U+"+b},d.prototype.changeCode=function(a){var b,c,d;if(c=this.parseInputCode(a))return b=this.get("code"),d=0===this.collection.where({code:c}).length,c!==b&&d&&32<=c&&c<=1114111?(this.set({code:c}),this.collection.update({id:this.id,code:c}),"done"):d?"wrong input":"not unique"},d.prototype.changeClassName=function(a){return a=this.collection.getUniqueCSSClass(a),this.set({css_class:a}),this.collection.update({id:this.id,css:a})},d.prototype.getFreeCode=function(){var a;return(null!=(a=this.collection.related)?a.font.get("is_PUA"):void 0)?this.getFreePUACode():this.getFreeLatinCode()||this.getFreePUACode()},d.prototype.parseInputCode=function(a){return 1===a.length?a.charCodeAt(0):parseInt(a,16)},d.prototype.getFreePUACode=function(){var a;for(a=57344;;){if(0===this.collection.where({code:a}).length)return a;a+=1}},d.prototype.getFreeLatinCode=function(){var a,b,d,e,f;for(f=c.BASIC_LATIN_CHARS,d=0,e=f.length;d<e;d++)if(a=f[d],b=a.charCodeAt(0),0===this.collection.where({code:b}).length)return b},d.prototype.getSVG=function(){return'<svg width="512" height="512" viewBox="0 0 512 512"><path d="'+this.get("svg")+'"></path></svg>'},d}(b.Tastypie.Model)})}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;define("collections/glyphs",["underscore","jquery","backbone_all","constants","utils/helpers","utils/lzma","utils/undo_manager","models/glyph"],function(b,c,d,e,f,g,h,i){"use strict";var j,k;return j=function(){function a(a){var b;this.latin_codes=[],this.current_code=57344,a||(this.latin_codes=function(){var a,c,d,f;for(d=e.BASIC_LATIN_CHARS,f=[],a=0,c=d.length;a<c;a++)b=d[a],f.push(b.charCodeAt(0));return f}())}return a.prototype.getNextCode=function(){var a;return this.latin_codes.length?this.latin_codes.shift():(a=this.current_code,this.current_code+=1,a)},a}(),k=function(b){function d(){return d.__super__.constructor.apply(this,arguments)}return a(d,b),d.prototype.urlRoot="/api/sync/font/",d.prototype.model=i,d.prototype.initialize=function(){return this.syncActions=[],this.syncDeferred=c.Deferred(),this.syncDeferred.resolve(),this.undoManager=new h},d.prototype.url=function(){return""+this.urlRoot+this.related.font.get("uuid")+"/"},d.prototype.create=function(a){var b;return b=this._prepareModel({icon:a.get("id"),svg:a.get("svg"),css_class:this.getUniqueCSSClass(a.get("name"))}),this.addGlyph(b)},d.prototype.addGlyph=function(a){if(this.add(a),this.addSyncAction({add:[a.toJSON()]}),this.undoManager.pushAction(function(b){return function(){return b.delete(a)}}(this)),this.undoManager.isUndoing||this.undoManager.isRedoing)return this.trigger("glyphsChange",[a])},d.prototype.update=function(a){return this.addSyncAction({update:[a]})},d.prototype.delete=function(a){var b;if(b={delete:[a.id]},this.remove(a),this.addSyncAction(b),this.undoManager.pushAction(function(b){return function(){return b.addGlyph(a)}}(this)),this.undoManager.isUndoing||this.undoManager.isRedoing)return this.trigger("glyphsChange",[a])},d.prototype.deleteByIcon=function(a){var b;if(b=this.findWhere({icon:a.get("id")}))return this.delete(b)},d.prototype.resetCodes=function(a){var b,c,d,e,f,g;for(null==a&&(a={}),c=new j(a.isPUA),g=this.models,e=0,f=g.length;e<f;e++)d=g[e],b=c.getNextCode(),d.set({code:b});return this.addSyncAction({full_update:this.toJSON()})},d.prototype.deleteAll=function(){return this.reset(),this.addSyncAction({delete_all:null})},d.prototype.addAndDelete=function(a){var b,c,d,e,f,g,h,i,j,k,l;if(l=a.selectedIcons,c=a.deselectedIcons,c.length){for(b={delete:[]},e=[],f=0,i=c.length;f<i;f++)g=c[f],d=this.findWhere({icon:g.get("id")}),b.delete.push(d.id),e.push(d);this.remove(e),this.addSyncAction(b),this.undoManager.pushAction(function(a){return function(){return a.addAndDelete({selectedIcons:c,deselectedIcons:[]})}}(this)),(this.undoManager.isUndoing||this.undoManager.isRedoing)&&this.trigger("iconsChange",c)}if(l.length){for(b={add:[]},h=0,j=l.length;h<j;h++)g=l[h],k=this._prepareModel({icon:g.get("id"),svg:g.get("svg"),css_class:this.getUniqueCSSClass(g.get("name"))}),this.add(k),b.add.push(k.toJSON());if(this.addSyncAction(b),this.undoManager.pushAction(function(a){return function(){return a.addAndDelete({selectedIcons:[],deselectedIcons:l})}}(this)),this.undoManager.isUndoing||this.undoManager.isRedoing)return this.trigger("iconsChange",l)}},d.prototype.addSyncAction=function(a){return this.related.font.set({hosting_need_upgrade:!0,svg_hosting_need_upgrade:!0}),null!=this.syncTimeout&&clearTimeout(this.syncTimeout),"pending"!==this.syncDeferred.state()&&(this.syncDeferred=c.Deferred()),this.syncActions.push(a),this.syncTimeout=f.after(e.GLYPHS_SYNC_DELAY,function(a){return function(){return a._syncGlyphs()}}(this))},d.prototype._syncGlyphs=function(){var a,b;return a={actions:this.syncActions},this.syncActions=[],a=JSON.stringify(a),a.length<2e5?c.ajax({data:a,url:this.url(),type:"POST",dataType:"json",contentType:"application/json",success:function(a){return function(){if(!a.syncActions.length)return a.syncDeferred.resolve()}}(this)}):(b=g.compress(a),b.always(function(d){return function(e){if("resolved"===b.state())return a=JSON.stringify(e),c.ajax({data:a,url:d.url(),type:"POST",dataType:"json",contentType:"application/json",success:function(){if(!d.syncActions.length)return d.syncDeferred.resolve()}})}}(this)))},d.prototype.getUniqueCSSClass=function(a){var b,c;for(c=1,b=a;this.where({css_class:b}).length;)b=a+"-"+c,c+=1;return b},d}(d.Tastypie.Collection),d.Index(k),k})}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty,c=[].slice;define("models/font",["jquery","backbone_all","app","collections/glyphs"],function(b,d,e,f){"use strict";return function(d){function g(){var a;a=1<=arguments.length?c.call(arguments,0):[],this.related={},this.related.glyphs=new f,this.undoManager=this.related.glyphs.undoManager,this.related.glyphs.related={},this.related.glyphs.related.font=this,g.__super__.constructor.apply(this,a)}return a(g,d),g.prototype.urlRoot="/api/v1/font/",g.prototype.defaults=function(){return{full_name:this.getDefaultFontName(),is_current:!1,glyphs:[]}},g.prototype.toJSON=function(){var a;return a=g.__super__.toJSON.call(this),a.glyphs=[],a},g.prototype.fetchRelated=function(){return this.on("change:name",function(){return this.set({hosting_need_upgrade:!0})}),this.on("change:css_class_prefix",function(){return this.set({hosting_need_upgrade:!0,svg_hosting_need_upgrade:!0})}),this.related.glyphs.fetch()},g.prototype.getDefaultFontName=function(){var a,b;for(b=1,a="Untitled font "+b;this.collection.where({full_name:a}).length;)b+=1,a="Untitled font "+b;return a},g.prototype.resetCodes=function(a){return this.save({is_PUA:a,hosting_need_upgrade:!0}),this.related.glyphs.resetCodes({isPUA:a,queue:!0})},g.prototype.isCurrent=function(){return this.get("is_current")},g.prototype.markAsCurrent=function(){var a;if(!this.isCurrent())return this.collection&&(a=this.collection.getCurrent(),a.set({is_current:!1},{silent:!0})),this.save({is_current:!0})},g.prototype.deploy=function(){return b.ajax({url:"/deploy/"+this.get("uuid")+"/",type:"GET",dataType:"json",contentType:"application/json",success:function(a){return function(b){return b?e.user.fetch():a.set({hosting_need_upgrade:!1,hosting_timestamp:Number(Date.now()/1e3)})}}(this)})},g.prototype.deploySvgSprite=function(){return b.ajax({url:"/deploy/svg-sprite/"+this.get("uuid")+"/",type:"GET",dataType:"json",contentType:"application/json",success:function(a){return function(b){return b?e.user.fetch():a.set({svg_hosting_need_upgrade:!1,svg_hosting_timestamp:Number(Date.now()/1e3)})}}(this)})},g.prototype.undeployFont=function(){var a;return a=b.ajax({url:"/undeploy/font/"+this.get("uuid")+"/",type:"GET",dataType:"json",contentType:"application/json"}),a.done(function(a){return function(){return a.set({hosting_need_upgrade:!0,hosting_timestamp:0})}}(this)),a.fail(function(a){return function(){return a.trigger("change"),alert("Undeploy timeout. We are sorry, please try again.")}}(this))},g.prototype.undeploySvgSprite=function(){var a;return a=b.ajax({url:"/undeploy/svg-sprite/"+this.get("uuid")+"/",type:"GET",dataType:"json",contentType:"application/json"}),a.done(function(a){return function(){return a.set({svg_hosting_need_upgrade:!0,svg_hosting_timestamp:0})}}(this)),a.fail(function(a){return function(){return a.trigger("change"),alert("Undeploy timeout. We are sorry, please try again.")}}(this))},g.prototype.share=function(a,c){return b.ajax({url:"/share-font/"+this.get("uuid")+"/",type:"GET",data:{action:a,to_user:c},dataType:"json",contentType:"application/json",statusCode:{404:function(){return alert("Share font failed, please check the email address again and try again.")}}})},g}(d.Tastypie.Model)})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},c={}.hasOwnProperty;define("collections/fonts",["backbone_all","models/font"],function(c,d){"use strict";return function(c){function e(){return this.getCurrent=a(this.getCurrent,this),e.__super__.constructor.apply(this,arguments)}return b(e,c),e.prototype.urlRoot="/api/v1/font/",e.prototype.model=d,e.prototype.getCurrent=function(){var a;return a=this.where({is_current:!0})[0],a||(a=this.at(0),a.save({is_current:!0})),a},e}(c.Tastypie.Collection)})}.call(this),define("lawnchair",[],function(){"use strict";var a=function(b,c){if(!(this instanceof a))return new a(b,c);if(!JSON)throw"JSON unavailable! Include http://www.json.org/json2.js to fix.";if(!(arguments.length<=2))throw"Incorrect # of ctor args!";c="function"==typeof arguments[0]?arguments[0]:arguments[1],b="function"==typeof arguments[0]?{}:arguments[0]||{},this.record=b.record||"record",this.name=b.name||"records";var d;if(b.adapter){"string"==typeof b.adapter&&(b.adapter=[b.adapter]);for(var e=0,f=b.adapter.length;e<f;e++){for(var g=a.adapters.length-1;g>=0&&(a.adapters[g].adapter!==b.adapter[e]||!(d=a.adapters[g].valid()?a.adapters[g]:void 0));g--);if(d)break}}else for(var g=0,h=a.adapters.length;g<h&&!(d=a.adapters[g].valid()?a.adapters[g]:void 0);g++);if(!d)throw"No valid adapter.";for(var e in d)this[e]=d[e];for(var g=0,h=a.plugins.length;g<h;g++)a.plugins[g].call(this);this.init(b,c)};return a.adapters=[],a.adapter=function(b,c){c.adapter=b;var d="adapter valid init keys save batch get exists all remove nuke".split(" "),e=this.prototype.indexOf;for(var f in c)if(-1===e(d,f))throw"Invalid adapter! Nonstandard method: "+f;a.adapters.splice(0,0,c)},a.plugins=[],a.plugin=function(b){for(var c in b)"init"===c?a.plugins.push(b[c]):this.prototype[c]=b[c]},a.prototype={isArray:Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},indexOf:function(a,b,c,d){if(a.indexOf)return a.indexOf(b);for(c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},lambda:function(a){return this.fn(this.record,a)},fn:function(a,b){return"string"==typeof b?new Function(a,b):b},uuid:function(){var a=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()},each:function(a){var b=this.lambda(a);if(this.__results)for(var c=0,d=this.__results.length;c<d;c++)b.call(this,this.__results[c],c);else this.all(function(a){for(var c=0,d=a.length;c<d;c++)b.call(this,a[c],c)});return this}},a.adapter("indexed-db",function(){function a(a,b){}var b=3,c=function(){return window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.oIndexedDB||window.msIndexedDB},d=function(){return window.IDBTransaction||window.webkitIDBTransaction||window.mozIDBTransaction||window.oIDBTransaction||window.msIDBTransaction},e=function(){return window.IDBKeyRange||window.webkitIDBKeyRange||window.mozIDBKeyRange||window.oIDBKeyRange||window.msIDBKeyRange},f=function(){return window.IDBDatabaseException||window.webkitIDBDatabaseException||window.mozIDBDatabaseException||window.oIDBDatabaseException||window.msIDBDatabaseException},g=function(){return!!window.indexedDB},h=d()&&"READ_WRITE"in d()?d().READ_WRITE:"readwrite";return{valid:function(){return!!c()},init:function(d,e){this.idb=c(),this.waiting=[],this.useAutoIncrement=g();var h=this.idb.open(this.name,b),i=this,j=i.fn(i.name,e);if(j&&"function"!=typeof j)throw"callback not valid";var k=function(){if(h.onupgradeneeded=h.onsuccess=null,j)return j.call(i,i)},l=function(a,b){try{i.db.deleteObjectStore("teststore")}catch(d){}try{i.db.deleteObjectStore(i.record)}catch(e){}var c={};i.useAutoIncrement&&(c.autoIncrement=!0),i.db.createObjectStore(i.record,c),i.store=!0};h.onupgradeneeded=function(a){i.db=h.result,i.transaction=h.transaction,l(a.oldVersion,a.newVersion)},h.onsuccess=function(c){if(i.db=c.target.result,i.db.version!=""+b){var d=i.db.version,e=i.db.setVersion(""+b);e.onsuccess=function(a){var c=e.result;e.onsuccess=e.onerror=null,l(d,b),c.oncomplete=function(){for(var a=0;a<i.waiting.length;a++)i.waiting[a].call(i);i.waiting=[],k()}},e.onerror=function(b){e.onsuccess=e.onerror=null,a(b)}}else{i.store=!0;for(var f=0;f<i.waiting.length;f++)i.waiting[f].call(i);i.waiting=[],k()}},h.onerror=function(a){if(h.errorCode===f().VERSION_ERR)return i.idb.deleteDatabase(i.name),i.init(d,e)}},save:function(b,c){var d=this;if(!this.store)return void this.waiting.push(function(){this.save(b,c)})
;for(var e=(this.isArray(b)?b:[b]).map(function(a){return a.key||(a.key=d.uuid()),a}),f=function(a){c&&d.lambda(c).call(d,d.isArray(b)?e:e[0])},g=this.db.transaction(this.record,h),i=g.objectStore(this.record),j=0;j<e.length;j++){var k=e[j];i.put(k,k.key)}return i.transaction.oncomplete=f,i.transaction.onabort=a,this},batch:function(a,b){return this.save(a,b)},get:function(b,c){if(!this.store)return void this.waiting.push(function(){this.get(b,c)});var d=this,e=function(a){var e=a.target.result;c&&(e&&(e.key=b),d.lambda(c).call(d,e))};if(this.isArray(b))for(var f=[],g=b.length,h=b,i=function(a){d.get(h[a],function(b){f[a]=b,--g>0||c&&d.lambda(c).call(d,f)})},j=0,k=h.length;j<k;j++)i(j);else{var l=this.db.transaction(this.record).objectStore(this.record).get(b);l.onsuccess=function(a){l.onsuccess=l.onerror=null,e(a)},l.onerror=function(b){l.onsuccess=l.onerror=null,a(b)}}return this},exists:function(b,c){if(!this.store)return void this.waiting.push(function(){this.exists(b,c)});var d=this,f=this.db.transaction(d.record).objectStore(this.record).openCursor(e().only(b));return f.onsuccess=function(a){f.onsuccess=f.onerror=null;var b;d.lambda(c).call(d,null!==a.target.result&&a.target.result!==b)},f.onerror=function(b){f.onsuccess=f.onerror=null,a(b)},this},all:function(a){if(!this.store)return void this.waiting.push(function(){this.all(a)});var b=this.fn(this.name,a)||void 0,c=this,d=this.db.transaction(this.record).objectStore(this.record),e=[];return d.openCursor().onsuccess=function(a){var d=a.target.result;d?(e.push(d.value),d.continue()):b&&b.call(c,e)},this},keys:function(a){if(!this.store)return void this.waiting.push(function(){this.keys(a)});var b=this.fn(this.name,a)||void 0,c=this,d=this.db.transaction(this.record).objectStore(this.record),e=[];return d.openCursor().onsuccess=function(a){var d=a.target.result;d?(e.push(d.key),d.continue()):b&&b.call(c,e)},this},remove:function(b,c){if(!this.store)return void this.waiting.push(function(){this.remove(b,c)});var d=this,e=b;this.isArray(b)||(e=[b]);for(var f=function(){c&&d.lambda(c).call(d)},g=this.db.transaction(this.record,h).objectStore(this.record),i=b.key?b.key:b,j=0;j<e.length;j++){var i=e[j].key?e[j].key:e[j];g.delete(i)}return g.transaction.oncomplete=f,g.transaction.onabort=a,this},nuke:function(b){if(!this.store)return void this.waiting.push(function(){this.nuke(b)});var c=this,d=b?function(){c.lambda(b).call(c)}:function(){};try{var e=this.db.transaction(this.record,h).objectStore(this.record);e.clear(),e.transaction.oncomplete=d,e.transaction.onabort=a}catch(f){"NotFoundError"==f.name?d():a(f)}return this}}}()),a.adapter("webkit-sqlite",function(){var a=function(a,b){},b=function(){return new Date};return Function.prototype.bind||(Function.prototype.bind=function(a){var b=[].slice,c=b.call(arguments,1),d=this,e=function(){},f=function(){return d.apply(this instanceof e?this:a||{},c.concat(b.call(arguments)))};return e.prototype=d.prototype,f.prototype=new e,f}),{valid:function(){return!!window.openDatabase},init:function(b,c){var d=this,e=d.fn(d.name,c),f="CREATE TABLE IF NOT EXISTS "+this.record+" (id NVARCHAR(32) UNIQUE PRIMARY KEY, value TEXT, timestamp REAL)",g=function(){if(e)return e.call(d,d)};if(e&&"function"!=typeof e)throw"callback not valid";this.db=openDatabase(this.name,"1.0.0",this.name,52428800),this.db.transaction(function(a){a.executeSql(f,[])},a,g)},keys:function(b){var c=this.lambda(b),d=this,e="SELECT id FROM "+this.record+" ORDER BY timestamp DESC";return this.db.readTransaction(function(b){var f=function(a,b){if(0==b.rows.length)c.call(d,[]);else{for(var e=[],f=0,g=b.rows.length;f<g;f++)e.push(b.rows.item(f).id);c.call(d,e)}};b.executeSql(e,[],f,a)}),this},save:function(c,d,e){var f=this,g=(this.isArray(c)?c:[c]).map(function(a){return a.key||(a.key=f.uuid()),a}),h="INSERT OR REPLACE INTO "+this.record+" (value, timestamp, id) VALUES (?,?,?)",i=function(){d&&f.lambda(d).call(f,f.isArray(c)?g:g[0])},j=[],k=b();try{for(var l=0,m=g.length;l<m;l++)j[l]=[JSON.stringify(g[l]),k,g[l].key]}catch(n){throw a(n),n}return f.db.transaction(function(a){for(var b=0,c=g.length;b<c;b++)a.executeSql(h,j[b])},function(b,c){a(b,c)},i),this},batch:function(a,b){return this.save(a,b)},get:function(b,c){var d=this,e="",f=this.isArray(b)?b:[b];e="SELECT id, value FROM "+this.record+" WHERE id IN ("+f.map(function(){return"?"}).join(",")+")";var g=function(a,e){for(var g,h,i={},j=0,k=e.rows.length;j<k;j++)g=JSON.parse(e.rows.item(j).value),g.key=e.rows.item(j).id,i[g.key]=g;h=f.map(function(a){return i[a]}),d.isArray(b)||(h=h.length?h[0]:null),c&&d.lambda(c).call(d,h)};return this.db.readTransaction(function(b){b.executeSql(e,f,g,a)}),this},exists:function(b,c){var d="SELECT * FROM "+this.record+" WHERE id = ?",e=this,f=function(a,b){c&&e.fn("exists",c).call(e,b.rows.length>0)};return this.db.readTransaction(function(c){c.executeSql(d,[b],f,a)}),this},all:function(b){var c=this,d="SELECT * FROM "+this.record,e=[],f=this.fn(this.name,b)||void 0,g=function(a,b){if(0!=b.rows.length)for(var d=0,g=b.rows.length;d<g;d++){var h=JSON.parse(b.rows.item(d).value);h.key=b.rows.item(d).id,e.push(h)}f&&f.call(c,e)};return this.db.readTransaction(function(b){b.executeSql(d,[],g,a)}),this},remove:function(b,c){var d,e=this,f="DELETE FROM "+this.record+" WHERE id ",g=function(){c&&e.lambda(c).call(e)};return this.isArray(b)?(d=b,f+="IN ("+d.map(function(){return"?"}).join(",")+")"):(f+="= ?",d=[b]),d=d.map(function(a){return a.key?a.key:a}),this.db.transaction(function(b){b.executeSql(f,d,g,a)}),this},nuke:function(b){var c="DELETE FROM "+this.record,d=this,e=b?function(){d.lambda(b).call(d)}:function(){};return this.db.transaction(function(b){b.executeSql(c,[],e,a)}),this}}}()),a}),function(){define("utils/cache",["jquery","lawnchair"],function(a,b){"use strict";var c,d,e,f;return c="cache",d=["indexed-db","webkit-sqlite"],e={},f=function(a,b,c){return a.nuke(function(){return a.save({key:"version",version:b},c)})},{getStore:function(g,h){var i,j,k;if(e[g])return e[g];k=a.Deferred(),e[g]=k,j=a.Deferred();try{new b({name:c,record:g,adapter:d},function(a){return j.resolve(a)})}catch(l){i=l,j.reject(i)}return j.done(function(a){return null==h?void k.resolve(a):a.exists("version",function(b){return b?a.get("version",function(b){return b.version===h?k.resolve(a):f(a,h,function(){return k.resolve(a)})}):f(a,h,function(){return k.resolve(a)})})}),j.fail(function(a){return k.reject(a)}),k.promise()}}})}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;define("models/icon",["underscore","backbone_all"],function(b,c){"use strict";return function(c){function d(){return d.__super__.constructor.apply(this,arguments)}return a(d,c),d.prototype.urlRoot="/api/sync/iconset/",d.prototype.isSelectedFor=function(a){return!!a.related.glyphs.findWhere({icon:this.id})},d.prototype.getSVG=function(){return'<svg width="512" height="512" viewBox="0 0 512 512"><path d="'+this.get("svg")+'"></path></svg>'},d.prototype.destroy=function(){return this.collection.removeIcon(this.id),this.trigger("destroy",this,this.collection)},d.prototype.save=function(a,c){var d;if(null==c&&(c={}),c.wait||this.set(a),b.extend(a,{id:this.id}),d=this.collection.updateIcon(a),c.wait)return d.done(function(a){return function(b){return a.set(b)}}(this))},d}(c.Tastypie.Model)})}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;define("collections/icons",["jquery","underscore","backbone_all","utils/lzma","models/icon"],function(b,c,d,e,f){"use strict";return function(d){function g(){return g.__super__.constructor.apply(this,arguments)}return a(g,d),g.prototype.urlRoot="/api/sync/iconset/",g.prototype.model=f,g.prototype.url=function(){return""+this.urlRoot+this.related.iconset.get("uuid")+"/"},g.prototype.comparator=function(a,b){var c,d,e,f,g,h,i;for(c=a.get("name"),e=b.get("name"),d=c.split(/(\d+)/),f=e.split(/(\d+)/),i=0;i<Math.max(d.length,f.length);){if(d[i]!==f[i])return g=isNaN(parseInt(d[i],10))?d[i]:parseInt(d[i],10),h=isNaN(parseInt(f[i],10))?f[i]:parseInt(f[i],10),void 0===g||void 0===h?d.length-f.length:g<h?-1:1;i++}return 0},g.prototype.syncIcons=function(a){var d;return c.isString(a)||(a=JSON.stringify(a)),d=b.ajax({data:a,url:this.url(),type:"POST",dataType:"json",contentType:"application/json"}),d.done(function(a){return function(){return a.related.iconset.fetchAfter(8)}}(this)),d},g.prototype.addIcons=function(a){var c,d,f,g;return c=JSON.stringify({add:a}),c.length<2e5?(g=this.syncIcons(c),g.done(function(a){return function(b){return a.add(b,{sort:!1,silent:!0})}}(this)),g):(f=b.Deferred(),d=e.compress(c),d.always(function(a){return function(b){return"resolved"===d.state()&&(c=b),g=a.syncIcons(c),g.done(function(b){return a.add(b,{sort:!1,silent:!0})}),g.done(function(){return f.resolve.apply(f,arguments)}),g.fail(function(){return f.reject.apply(f,arguments)})}}(this)),f.promise())},g.prototype.removeIcon=function(a){var b;return b={remove:[a]},this.syncIcons(b)},g.prototype.updateIcon=function(a){var b;return b={update:a},this.syncIcons(b)},g}(d.Tastypie.Collection)})}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty,c=[].slice;define("models/iconset",["jquery","underscore","backbone_all","utils/helpers","utils/cache","collections/icons"],function(b,d,e,f,g,h){"use strict";var i;return i={personal:0,public:1,premium:2},function(e){function j(){var a;a=1<=arguments.length?c.call(arguments,0):[],this.related={},this.related.icons=new h,this.related.icons.related={},this.related.icons.related.iconset=this,j.__super__.constructor.apply(this,a)}return a(j,e),j.prototype.urlRoot="/api/v1/iconset/",j.prototype._relatedFetched=!1,j.prototype.defaults={name:"New set",icon_groups:[],type:i.personal},j.prototype.toJSON=function(){var a;return a=j.__super__.toJSON.call(this),a.icon_groups=[],a},j.prototype.fetchRelated=function(){var a,c,e,f,h,i;return this._relatedFetched=!0,0===this.get("icon_counter")||(h=this.get("id")+"",c=b.Deferred(),this.related.icons.filters.iconset=h,e=this.related.icons,f=this.get("icons_updated_at"),a=4,i=g.getStore("libraries",a),i.done(function(a){return a.exists(h,function(b){return b?a.get(h,function(b){return b.iconsUpdatedAt===f?(e.add(b.icons),c.resolve()):a.remove(h,function(){return e.fetch().done(function(){var b;return c.resolve(),a.save({key:h,icons:function(){var a,c,f,g;for(f=e.models,g=[],a=0,c=f.length;a<c;a++)b=f[a],g.push(d.clone(b.attributes));return g}(),iconsUpdatedAt:f})})})}):e.fetch().done(function(){var b;return c.resolve(),a.save({key:h,icons:function(){var a,c,f,g;for(f=e.models,g=[],a=0,c=f.length;a<c;a++)b=f[a],g.push(d.clone(b.attributes));return g}(),iconsUpdatedAt:f})})})}),i.fail(function(){return e.fetch().done(function(){return c.resolve()})}),c.promise())},j.prototype.relatedFetched=function(){return this.related.icons.length||this._relatedFetched},j.prototype.isPremium=function(){return this.get("type")===i.premium},j.prototype.isPersonal=function(){return this.get("type")===i.personal},j.prototype.isTrial=function(){return Boolean(this.get("trial"))},j.prototype.iconCounter=function(){return this.get("is_hidden")?this.get("icon_counter"):this.related.icons.length},j.prototype.initCountdown=function(a,b,c){var d;return null==b&&(b=60),d=f.every(1e3*(c||b),function(c){return function(){var e,f;return f=c.get(a)-b,f<=0&&(f=0,clearInterval(d),c.trigger("expire:"+a)),e={},e[""+a]=f,c.set(e)}}(this))},j.prototype.fetchAfter=function(a){return null!=this.fetchTimeout&&clearTimeout(this.fetchTimeout),this.fetchTimeout=f.after(1e3*a,function(a){return function(){return a.fetch()}}(this))},j}(e.Tastypie.Model)})}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;define("collections/iconsets",["backbone_all","models/iconset"],function(b,c){"use strict";return function(b){function d(){return d.__super__.constructor.apply(this,arguments)}return a(d,b),d.prototype.urlRoot="/api/v1/iconset/",d.prototype.model=c,d.prototype.comparator=function(a){return a.isPremium()?-a.get("id")-1e6:a.get("position")||-a.get("id")},d.prototype.getSelectedIconsFor=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n;if(m=a.related.glyphs.pluck("icon"),n=[],m.length)for(k=this.models,b=0,h=k.length;b<h;b++)for(e=k[b],f=0,i=m.length;f<i;f++)for(d=m[f],l=e.related.icons.where({id:d}),g=0,j=l.length;g<j;g++)c=l[g],n.push(c);return n},d}(b.Tastypie.Collection)})}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty,c=[].slice;define("models/premium_iconset",["backbone_all","utils/helpers"],function(b,d){"use strict";return function(b){function e(){var a;a=1<=arguments.length?c.call(arguments,0):[],e.__super__.constructor.apply(this,a),this.get("discount_expires_in")&&this.initCountdown("discount_expires_in")}return a(e,b),e.prototype.urlRoot="/api/v1/premiumiconset/",e.prototype.isPremiumIconSet=function(){return!0},e.prototype.isPremium=function(){return!0},e.prototype.initCountdown=function(a,b,c){var e;return null==b&&(b=60),e=d.every(1e3*(c||b),function(c){return function(){var d,f;return f=c.get(a)-b,f<=0&&(f=0,clearInterval(e),c.trigger("expire:"+a)),d={},d[""+a]=f,c.set(d)}}(this))},e.prototype.getDiscountPrice=function(){var a,b;if(a=this.get("discount_percent"))return b=this.get("price"),Math.round(b-b*a/100)},e}(b.Tastypie.Model)})}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;define("collections/premium_iconsets",["backbone_all","models/premium_iconset"],function(b,c){"use strict";return function(b){function d(){return d.__super__.constructor.apply(this,arguments)}return a(d,b),d.prototype.urlRoot="/api/v1/premiumiconset/",d.prototype.model=c,d}(b.Tastypie.Collection)})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},c={}.hasOwnProperty;define("views/topbar_view",["backbone_all","app","utils/upload_icons"],function(c,d,e){"use strict";return function(f){function g(){return this.triggerFileInput=a(this.triggerFileInput,this),g.__super__.constructor.apply(this,arguments)}return b(g,f),g.prototype.template="topbar",g.prototype.events={"change .import-icons-input":e,"click .import-icons":"triggerFileInput"},g.prototype.initialize=function(){return this.model=d.user},g.prototype.triggerFileInput=function(a){var b,e;return a.preventDefault(),b=d.fonts.getCurrent().get("uuid"),"iconsets"!==(e=c.history.fragment)&&e!=="select/"+b&&d.router.navigate("/",{trigger:!0}),this.$el.find(".import-icons-input").trigger("click")},g}(c.Marionette.ItemView)})}.call(this),function(){define("utils/csrf",["jquery"],function(a){"use strict";return{getCookie:function(b){var c,d,e,f,g;if(d=null,document.cookie)for(g=document.cookie.split(";"),e=0,f=g.length;e<f;e++)if(c=g[e],c=a.trim(c),c.split("=",1)[0]===b){d=decodeURIComponent(c.substring(b.length+1));break}return d},safeMethod:function(a){return/^(GET|HEAD|OPTIONS|TRACE)$/.test(a)},sameOrigin:function(a){var b,c,d,e;return b=document.location.host,d=document.location.protocol,e="//"+b,c=d+e,a===c||a.slice(0,c.length+1)===c+"/"||a===e||a.slice(0,e.length+1)===e+"/"||!/^(\/\/|http:|https:).*/.test(a)}}})}.call(this),function(){require(["jquery","utils/csrf"],function(a,b){"use strict";return a.xhrPool=[],a.xhrPool.abortAll=function(){var b,c,d,e;for(a.xhrPool.isAbortMode=!0,d=a.xhrPool,b=0,c=d.length;b<c;b++)e=d[b],e.abort();return a.xhrPool.isAbortMode=!1,a.xhrPool.length=0},a.ajaxSetup({beforeSend:function(c,d){return!b.safeMethod(d.type)&&b.sameOrigin(d.url)&&c.setRequestHeader("X-CSRFToken",b.getCookie("csrftoken")),a.xhrPool.push(c)},complete:function(b){var c;if(!a.xhrPool.isAbortMode&&(c=a.xhrPool.indexOf(b))>-1)return a.xhrPool.splice(c,1)},statusCode:{401:function(){return window.location.href="/accounts/login/"},503:function(){return window.location.href="/"}}})})}.call(this),define("init/ajax_settings",function(){}),function(a){"use strict";a(function(){a.support.transition=function(){var a=function(){var a,b=document.createElement("bootstrap"),c={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(a in c)if(void 0!==b.style[a])return c[a]}();return a&&{end:a}}()})}(window.jQuery),define("bootstrap/transition",function(){}),function(a){"use strict";function b(){a(d).each(function(){c(a(this)).removeClass("open")})}function c(b){var c,d=b.attr("data-target");return d||(d=b.attr("href"),d=d&&/#/.test(d)&&d.replace(/.*(?=#[^\s]*$)/,"")),c=d&&a(d),c&&c.length||(c=b.parent()),c}var d="[data-toggle=dropdown]",e=function(b){var c=a(b).on("click.dropdown.data-api",this.toggle);a("html").on("click.dropdown.data-api",function(){c.parent().removeClass("open")})};e.prototype={constructor:e,toggle:function(d){var e,f,g=a(this);if(!g.is(".disabled, :disabled"))return e=c(g),f=e.hasClass("open"),b(),f||e.toggleClass("open"),g.focus(),!1},keydown:function(b){var e,f,g,h,i;if(/(38|40|27)/.test(b.keyCode)&&(e=a(this),b.preventDefault(),b.stopPropagation(),!e.is(".disabled, :disabled"))){if(g=c(e),!(h=g.hasClass("open"))||h&&27==b.keyCode)return 27==b.which&&g.find(d).focus(),e.click();f=a("[role=menu] li:not(.divider):visible a",g),f.length&&(i=f.index(f.filter(":focus")),38==b.keyCode&&i>0&&i--,40==b.keyCode&&i<f.length-1&&i++,~i||(i=0),f.eq(i).focus())}}};var f=a.fn.dropdown;a.fn.dropdown=function(b){return this.each(function(){var c=a(this),d=c.data("dropdown");d||c.data("dropdown",d=new e(this)),"string"==typeof b&&d[b].call(c)})},a.fn.dropdown.Constructor=e,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=f,this},a(document).on("click.dropdown.data-api",b).on("click.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.dropdown-menu",function(a){a.stopPropagation()}).on("click.dropdown.data-api",d,e.prototype.toggle).on("keydown.dropdown.data-api",d+", [role=menu]",e.prototype.keydown)}(window.jQuery),define("bootstrap/dropdown",function(){}),function(a){"use strict";var b=function(b,c){this.options=c,this.$element=a(b).delegate('[data-dismiss="modal"]',"click.dismiss.modal",a.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};b.prototype={constructor:b,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var b=this,c=a.Event("show");this.$element.trigger(c),this.isShown||c.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var c=a.support.transition&&b.$element.hasClass("fade");b.$element.parent().length||b.$element.appendTo(document.body),b.$element.show(),c&&b.$element[0].offsetWidth,b.$element.addClass("in").attr("aria-hidden",!1),b.enforceFocus(),c?b.$element.one(a.support.transition.end,function(){b.$element.focus().trigger("shown")}):b.$element.focus().trigger("shown")}))},hide:function(b){b&&b.preventDefault();b=a.Event("hide"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),a(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),a.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var b=this;a(document).on("focusin.modal",function(a){b.$element[0]===a.target||b.$element.has(a.target).length||b.$element.focus()})},escape:function(){var a=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(b){27==b.which&&a.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var b=this,c=setTimeout(function(){b.$element.off(a.support.transition.end),b.hideModal()},500);this.$element.one(a.support.transition.end,function(){clearTimeout(c),b.hideModal()})},hideModal:function(){var a=this;this.$element.hide(),this.backdrop(function(){a.removeBackdrop(),a.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},backdrop:function(b){var c=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var d=a.support.transition&&c;if(this.$backdrop=a('<div class="modal-backdrop '+c+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?a.proxy(this.$element[0].focus,this.$element[0]):a.proxy(this.hide,this)),d&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;d?this.$backdrop.one(a.support.transition.end,b):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,b):b()):b&&b()}};var c=a.fn.modal;a.fn.modal=function(c){return this.each(function(){var d=a(this),e=d.data("modal"),f=a.extend({},a.fn.modal.defaults,d.data(),"object"==typeof c&&c);e||d.data("modal",e=new b(this,f)),"string"==typeof c?e[c]():f.show&&e.show()})},a.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},a.fn.modal.Constructor=b,a.fn.modal.noConflict=function(){return a.fn.modal=c,this},a(document).on("click.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),d=c.attr("href"),e=a(c.attr("data-target")||d&&d.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("modal")?"toggle":a.extend({remote:!/#/.test(d)&&d},e.data(),c.data());b.preventDefault(),e.modal(f).one("hide",function(){c.focus()})})}(window.jQuery),define("bootstrap/modal",function(){}),function(a){"use strict";var b=function(a,b){this.init("tooltip",a,b)};b.prototype={constructor:b,init:function(b,c,d){var e,f,g,h,i;for(this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.enabled=!0,g=this.options.trigger.split(" "),i=g.length;i--;)h=g[i],"click"==h?this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this)):"manual"!=h&&(e="hover"==h?"mouseenter":"focus",f="hover"==h?"mouseleave":"blur",this.$element.on(e+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(f+"."+this.type,this.options.selector,a.proxy(this.leave,this)));this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(b){return b=a.extend({},a.fn[this.type].defaults,this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},enter:function(b){var c,d=a.fn[this.type].defaults,e={};if(this._options&&a.each(this._options,function(a,b){d[a]!=b&&(e[a]=b)},this),c=a(b.currentTarget)[this.type](e).data(this.type),!c.options.delay||!c.options.delay.show)return c.show();clearTimeout(this.timeout),c.hoverState="in",this.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)},leave:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);if(this.timeout&&clearTimeout(this.timeout),!c.options.delay||!c.options.delay.hide)return c.hide();c.hoverState="out",this.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)},show:function(){var b,c,d,e,f,g,h=a.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(h),h.isDefaultPrevented())return;switch(b=this.tip(),this.setContent(),this.options.animation&&b.addClass("fade"),f="function"==typeof this.options.placement?this.options.placement.call(this,b[0],this.$element[0]):this.options.placement,b.detach().css({top:0,left:0,display:"block"}),this.options.container?b.appendTo(this.options.container):b.insertAfter(this.$element),c=this.getPosition(),d=b[0].offsetWidth,e=b[0].offsetHeight,f){case"bottom":g={top:c.top+c.height,left:c.left+c.width/2-d/2};break;case"top":g={top:c.top-e,left:c.left+c.width/2-d/2};break;case"left":g={top:c.top+c.height/2-e/2,left:c.left-d};break;case"right":g={top:c.top+c.height/2-e/2,left:c.left+c.width}}this.applyPlacement(g,f),this.$element.trigger("shown")}},applyPlacement:function(a,b){var c,d,e,f,g=this.tip(),h=g[0].offsetWidth,i=g[0].offsetHeight;g.offset(a).addClass(b).addClass("in"),c=g[0].offsetWidth,d=g[0].offsetHeight,"top"==b&&d!=i&&(a.top=a.top+i-d,f=!0),"bottom"==b||"top"==b?(e=0,a.left<0&&(e=-2*a.left,a.left=0,g.offset(a),c=g[0].offsetWidth,d=g[0].offsetHeight),this.replaceArrow(e-h+c,c,"left")):this.replaceArrow(d-i,d,"top"),f&&g.offset(a)},replaceArrow:function(a,b,c){this.arrow().css(c,a?50*(1-a/b)+"%":"")},setContent:function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},hide:function(){function b(){var b=setTimeout(function(){c.off(a.support.transition.end).detach()},500);c.one(a.support.transition.end,function(){clearTimeout(b),c.detach()})}var c=this.tip(),d=a.Event("hide");if(this.$element.trigger(d),!d.isDefaultPrevented())return c.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?b():c.detach(),this.$element.trigger("hidden"),this},fixTitle:function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var b=this.$element[0];return a.extend({},"function"==typeof b.getBoundingClientRect?b.getBoundingClientRect():{width:b.offsetWidth,height:b.offsetHeight},this.$element.offset())},getTitle:function(){var a=this.$element,b=this.options;return a.attr("data-original-title")||("function"==typeof b.title?b.title.call(a[0]):b.title)},tip:function(){return this.$tip=this.$tip||a(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(b){var c=b?a(b.currentTarget)[this.type](this._options).data(this.type):this;c.tip().hasClass("in")?c.hide():c.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var c=a.fn.tooltip;a.fn.tooltip=function(c){return this.each(function(){var d=a(this),e=d.data("tooltip"),f="object"==typeof c&&c;e||d.data("tooltip",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.tooltip.Constructor=b,a.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},a.fn.tooltip.noConflict=function(){return a.fn.tooltip=c,this}}(window.jQuery),define("bootstrap/tooltip",function(){}),function(a){"use strict";a.fn.selectText=function(){var a,b,c=this[0];document.body.createTextRange?(a=document.body.createTextRange(),a.moveToElementText(c),a.select()):window.getSelection&&(b=window.getSelection(),a=document.createRange(),a.selectNodeContents(c),b.removeAllRanges(),b.addRange(a))}}(window.jQuery),define("libs/select_text",function(){}),function(a){"function"==typeof define&&define.amd?define("libs/xselectable",["jquery"],a):a(jQuery)}(function(a){var b="xselectable",c={distance:0,disabled:!1,cancel:":input,option",filter:"*",scrollingThreshold:100,scrollSpeedMultiplier:1,scroller:null,positioner:null},d=function(c){function d(){return document.documentElement}function f(){var a="number"==typeof window.pageYOffset?window.pageYOffset:document.documentElement.scrollTop,b="number"==typeof window.pageXOffset?window.pageXOffset:document.documentElement.scrollLeft;return[a,b+k,a+l,b]}function g(){var a="number"==typeof window.pageYOffset?window.pageYOffset:document.documentElement.scrollTop,b="number"==typeof window.pageXOffset?window.pageXOffset:document.documentElement.scrollLeft;return[Math.max(a-j.top,0),Math.max(j.left+j.width-b-k,0),Math.max(j.top+j.height-a-l,0),Math.max(b-j.left,0)]}function h(a,b){"vertical"==a?window.scrollBy(0,b):window.scrollBy(b,0)}function i(){return{top:0,left:0}}var j=a(c).data(b).containerDimensions,k="number"==typeof window.innerWidth?window.innerWidth:document.documentElement.clientWidth,l="number"==typeof window.innerHeight?window.innerHeight:document.documentElement.clientHeight;document.documentElement.scrollWidth,document.documentElement.scrollHeight;return{getScrollableElement:d,getScrollBorders:f,getScrollableDistances:g,scroll:h,getScrollOffset:i,next:e(c)}},e=function(c){function d(){return[c.scrollTop,c.scrollWidth-c.scrollLeft-g.width,c.scrollHeight-c.scrollTop-g.height,c.scrollLeft]}function e(a,b){c["vertical"==a?"scrollTop":"scrollLeft"]+=b}function f(){return{top:0,left:0}}var g=a(c).data(b).containerDimensions;return{getScrollableDistances:d,scroll:e,getScrollOffset:f}},f=function(){return this},g=function(){var c=a(this).data(b).containerDimensions;return[c.top,c.left+c.width,c.top+c.height,c.left]},h=function(a){return{top:a.offsetTop,left:a.offsetLeft,width:a.offsetWidth,height:a.offsetHeight}},i=function(a){return a>0?1:a<0?-1:0},j=function(){var c=a(this),d=c.data(b);d.selectionGlass=a("<div />",{class:b+"-glass"}).css({position:"absolute",top:0,left:0,height:this.scrollHeight,width:this.scrollWidth,overflow:"hidden"}).appendTo(c),d.selectionBox=a("<div />",{class:b+"-box"}).css({position:"absolute"}).appendTo(d.selectionGlass)},k=function(){var c=this,d=a(this),e=d.data(b),f=[];d.find(e.options.filter).each(function(){var a=(e.options.positioner||h).call(c,this);a.element=this,a.selected=!1,f.push(a)}),e.selectables=f},l=function(c){var d=a(this).data(b);d.selectionBoxExtents={top:Math.min(d.startPosition.pageY,c.pageY)-d.containerDimensions.top+this.scrollTop,left:Math.min(d.startPosition.pageX,c.pageX)-d.containerDimensions.left+this.scrollLeft,height:Math.abs(d.startPosition.pageY-c.pageY),width:Math.abs(d.startPosition.pageX-c.pageX)},d.selectionBox.css(d.selectionBoxExtents)},m=function(c,d,e){var h=a(this),j=h.data(b),k=(j.containerDimensions,j.options.scrollingThreshold),l=j.options.scrollSpeedMultiplier;j.scrollingTimeout&&(window.clearTimeout(j.scrollingTimeout),delete j.scrollingTimeout);for(var n=e?((new Date).getTime()-e)/16:1,o=e,p=!1,q=d.getScrollableDistances(),s=d.getScrollBorders?d.getScrollBorders():g.call(this),t=d.getScrollableElement?d.getScrollableElement():f.call(this),u=[{distance:Math.max(c.pageY-s[0],0),direction:-1,scrollAxis:"vertical",positionProperty:"pageY"},{distance:Math.max(s[1]-c.pageX,0),direction:1,scrollAxis:"horizontal",positionProperty:"pageX"},{distance:Math.max(s[2]-c.pageY,0),direction:1,scrollAxis:"vertical",positionProperty:"pageY"},{distance:Math.max(c.pageX-s[3],0),direction:-1,scrollAxis:"horizontal",positionProperty:"pageX"}],v=u.length-1;v>=0;v--){var w=u[v],x=q[v];if(w.distance<k&&x>0&&i(j.curPosition[w.positionProperty]-j.lastPosition[w.positionProperty])==w.direction){var y=w.direction*Math.round(Math.min(x,Math.ceil((k-w.distance)/10)*n*l));d.scroll(w.scrollAxis,y),t==this?(j.startPosition[w.positionProperty]-=y,j.curPosition[w.positionProperty]-=y):c[w.positionProperty]+=y,p=!0}}p?j.scrollingTimeout=window.setTimeout(a.proxy(function(){r.call(this,c,o)
},this),16):d.next&&m.call(this,c,d.next,e)},n=function(c){for(var d=a(this),e=d.data(b),f={top:0,left:0},g=c;g;){var h=g.getScrollOffset();f.top+=h.top,f.left+=h.left,g=g.next}for(var i=e.selectables.length-1;i>=0;i--){var j=e.selectables[i];o(e.selectionBoxExtents,j,f)?j.selected||(j.selected=!0,d.trigger(b+"selecting",{selecting:j.element})):j.selected&&(j.selected=!1,d.trigger(b+"unselecting",{unselecting:j.element}))}},o=function(a,b,c){return p(a.top,a.height,b.top+c.top,b.height)&&p(a.left,a.width,b.left+c.left,b.width)},p=function(a,b,c,d){var e=a+b,f=c+d;return c>=a&&c<=e||f>=a&&f<=e||c<=a&&f>=e},q=function(c){var e=a(this),f=e.data(b);if(1==c.which){var g=[f.options.cancel,f.options.cancel+" *"].join(",");f.options.cancel&&a(c.target).is(g)||c.pageX>e.offset().left+this.clientWidth||c.pageY>e.offset().top+this.clientHeight||(f.containerDimensions={top:e.offset().top+(e.outerHeight(!1)-e.innerHeight())/2,left:e.offset().left+(e.outerWidth(!1)-e.innerWidth())/2,width:this.clientWidth,height:this.clientHeight},f.startPosition={pageX:c.pageX,pageY:c.pageY},f.curPosition={pageX:c.pageX,pageY:c.pageY},f.scroller=(f.options.scroller||d).call(this,this),f.mouseupHandler=a.proxy(s,this),a(document).bind("mouseup."+b,f.mouseupHandler),a(document).bind("mousemove."+b,a.proxy(r,this)),e.bind("mousewheel."+b,function(a){return a.preventDefault(),!1}),c.preventDefault())}},r=function(c,d){var e=a(this),f=e.data(b),g=f.scroller,h=f.options.distance;!f.selectionBox&&Math.abs(f.startPosition.pageX-c.pageX)<h&&Math.abs(f.startPosition.pageY-c.pageY)<h||(f.lastPosition=f.curPosition,f.curPosition={pageX:c.pageX,pageY:c.pageY},f.selectionBox||(e.trigger(b+"start"),j.apply(this),k.apply(this)),m.call(this,c,g,d),l.call(this,c),n.call(this,g))},s=function(c){var d=a(this),e=d.data(b);if(e.scrollingTimeout&&(window.clearTimeout(e.scrollingTimeout),delete e.scrollingTimeout),d.unbind("mousewheel."+b),a(document).unbind("mousemove."+b),a(document).unbind("mouseup."+b,e.mouseupHandler),e.mouseupHandler=void 0,e.selectionBox){e.selectionBox.remove(),delete e.selectionBox,e.selectionGlass.remove(),delete e.selectionGlass;for(var f=[],g=[],h=e.selectables.length-1;h>=0;h--)(e.selectables[h].selected?f:g).push(e.selectables[h].element);delete e.selectables,d.trigger(b+"selected",{selected:f}),d.trigger(b+"unselected",{unselected:g}),d.trigger(b+"stop")}},t={init:function(d){return this.each(function(){a(this).data(b,{options:a.extend({},c,d)})}),this.data(b).options.disabled?this:t.enable.apply(this)},destroy:function(){return t.disable.apply(this),this.removeData(b)},enable:function(){return this.each(function(){var c=a(this);c.data(b).options.disabled=!1,c.bind("mousedown."+b,q)})},disable:function(){return this.each(function(){var c=a(this);c.data(b).options.disabled=!0,c.unbind("."+b)})},option:function(a,c){var d=this.first().data(b).options;return void 0===c?d[a]:(d[a]=c,"disabled"==a&&(c?t.disable.apply(this):t.enable.apply(this)),this)}};a.fn[b]=function(c){return t[c]?t[c].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof c&&c?void a.error("Method "+c+" does not exist on jQuery."+b):t.init.apply(this,arguments)}}),define("libs/filedownload",["jquery"],function(a){var b=/[<>&\r\n"']/gm,c={"<":"lt;",">":"gt;","&":"amp;","\r":"#13;","\n":"#10;",'"':"quot;","'":"apos;"};a.extend({fileDownload:function(d,e){function f(){if(-1!=document.cookie.indexOf(m.cookieName+"="+m.cookieValue))return r.onSuccess(d),document.cookie=m.cookieName+"=; expires="+new Date(1e3).toUTCString()+"; path="+m.cookiePath,void h(!1);if(t||s)try{var b=t?t.document:g(s);if(b&&null!=b.body&&b.body.innerHTML.length){var c=!0;if(v&&v.length){var e=a(b.body).contents().first();try{e.length&&e[0]===v[0]&&(c=!1)}catch(i){if(!i||-2146828218!=i.number)throw i;c=!0}}if(c)return void setTimeout(function(){r.onFail(b.body.innerHTML,d),h(!0)},100)}}catch(j){return r.onFail("",d),void h(!0)}setTimeout(f,m.checkInterval)}function g(a){var b=a[0].contentWindow||a[0].contentDocument;return b.document&&(b=b.document),b}function h(a){setTimeout(function(){t&&(k&&t.close(),j&&t.focus&&(t.focus(),a&&t.close()))},0)}function i(a){return a.replace(b,function(a){return"&"+c[a]})}var j,k,l,m=a.extend({preparingMessageHtml:null,failMessageHtml:null,androidPostUnsupportedMessageHtml:"Unfortunately your Android browser doesn't support this type of file download. Please try again with a different browser.",dialogOptions:{modal:!0},prepareCallback:function(a){},successCallback:function(a){},failCallback:function(a,b){},httpMethod:"GET",data:null,checkInterval:100,cookieName:"fileDownload",cookieValue:"true",cookiePath:"/",popupWindowTitle:"Initiating file download...",encodeHTMLEntities:!0},e),n=new a.Deferred,o=(navigator.userAgent||navigator.vendor||window.opera).toLowerCase();/ip(ad|hone|od)/.test(o)?j=!0:-1!==o.indexOf("android")?k=!0:l=/avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|playbook|silk|iemobile|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(o)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(o.substr(0,4));var p=m.httpMethod.toUpperCase();if(k&&"GET"!==p)return a().dialog?a("<div>").html(m.androidPostUnsupportedMessageHtml).dialog(m.dialogOptions):alert(m.androidPostUnsupportedMessageHtml),n.reject();var q=null,r={onPrepare:function(b){m.preparingMessageHtml?q=a("<div>").html(m.preparingMessageHtml).dialog(m.dialogOptions):m.prepareCallback&&m.prepareCallback(b)},onSuccess:function(a){q&&q.dialog("close"),m.successCallback(a),n.resolve(a)},onFail:function(b,c){q&&q.dialog("close"),m.failMessageHtml&&a("<div>").html(m.failMessageHtml).dialog(m.dialogOptions),m.failCallback(b,c),n.reject(b,c)}};r.onPrepare(d),null!==m.data&&"string"!=typeof m.data&&(m.data=a.param(m.data));var s,t,u,v;if("GET"===p){if(null!==m.data){-1!==d.indexOf("?")?"&"!==d.substring(d.length-1)&&(d+="&"):d+="?",d+=m.data}j||k?(t=window.open(d),t.document.title=m.popupWindowTitle,window.focus()):l?window.location(d):s=a("<iframe>").hide().prop("src",d).appendTo("body")}else{var w="";null!==m.data&&a.each(m.data.replace(/\+/g," ").split("&"),function(){var a=this.split("="),b=m.encodeHTMLEntities?i(decodeURIComponent(a[0])):decodeURIComponent(a[0]);if(b){var c=m.encodeHTMLEntities?i(decodeURIComponent(a[1])):decodeURIComponent(a[1]);w+='<input type="hidden" name="'+b+'" value="'+c+'" />'}}),l?(v=a("<form>").appendTo("body"),v.hide().prop("method",m.httpMethod).prop("action",d).html(w)):(j?(t=window.open("about:blank"),t.document.title=m.popupWindowTitle,u=t.document,window.focus()):(s=a("<iframe style='display: none' src='about:blank'></iframe>").appendTo("body"),u=g(s)),u.write("<html><head></head><body><form method='"+m.httpMethod+"' action='"+d+"'>"+w+"</form>"+m.popupWindowTitle+"</body></html>"),v=a(u).find("form")),v.submit()}return setTimeout(f,m.checkInterval),n.promise()}})}),function(){require(["jquery","bootstrap/transition","bootstrap/dropdown","bootstrap/modal","bootstrap/tooltip","libs/select_text","libs/xselectable","libs/filedownload"],function(a){"use strict";return a(window).scroll(function(){var b;if(b=a(".navbar"),b.length&&"none"!==b.parent().css("display"))return a(this).scrollTop()>122?(b.addClass("fixed"),a(".content").css({"padding-top":"107px"})):(b.removeClass("fixed"),a(".content").css({"padding-top":"0"}))}),a(document).tooltip({selector:"a[title], span[title]"})})}.call(this),define("init/jquery_pluggins",function(){}),function(){require(["jquery","backbone_all","app","router","models/user","collections/fonts","collections/iconsets","collections/premium_iconsets","views/topbar_view","init/ajax_settings","init/jquery_pluggins"],function(a,b,c,d,e,f,g,h,i){"use strict";var j,k;return j=function(){var b;if(b=window.location.hash,a("a").removeClass("active"),a("a[href='"+b+"']").addClass("active"),/#publish/.test(b))return a("a[href='#publish']").addClass("active")},k=function(){return a("body").scrollTop(0)},c.router=new d({app:c}),c.router.on("route",function(){return 0}),c.router.on("route",j),c.router.on("route",k),c.addInitializer(function(){var d;return c.user=new e,c.fonts=new f,c.iconsets=new g,c.allIconSets=new g,c.premiumIconSets=new h,d=function(a){var b,d,e,f;if(d=a.get("id"),(e=c.premiumIconSets.where({iconset_ids:d},!0))&&(c.allIconSets.remove(a),f=e.get("trial_expires_in"),b=e.get("discount_expires_in"),f&&(a.set({trial_expires_in:f,trial:!0}),a.initCountdown("trial_expires_in"),a.once("expire:trial_expires_in",function(){return this.collection.remove(this)})),b))return a.set({icon_pack_uuid:e.get("uuid")}),a.set({discount_percent:e.get("discount_percent")}),a.set({discount_expires_in:b}),a.initCountdown("discount_expires_in")},a.when(c.user.fetch(),c.fonts.fetch(),c.allIconSets.fetch(),c.premiumIconSets.fetch()).done(function(){var e,f,g,h,j,k,l,m,n,o,p,q,r;for(r=[],o=c.allIconSets.where({is_hidden:!1}),f=0,k=o.length;f<k;f++)g=o[f],g.collection=c.iconsets,c.iconsets.add(g),r.push(g.fetchRelated()),d(g);for(p=c.premiumIconSets.models,h=0,l=p.length;h<l;h++)n=p[h],c.allIconSets.add(n);for(q=c.fonts.models,j=0,m=q.length;j<m;j++)e=q[j],r.push(e.fetchRelated());return a.when.apply(a,r).done(function(){var d;return d=!0,c.fonts.isEmpty()&&(d=c.fonts.create({is_current:!0}).saveDeferred),a.when(d).done(function(){return window.progressLogo.stop(),c.topbarRegion.show(new i),b.history.start()})})})}),c.start()})}.call(this),define("main",function(){})}();